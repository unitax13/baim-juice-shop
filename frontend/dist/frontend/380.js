(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[380],{1167:(hi,mt,ge)=>{!function(J){"use strict";J.defineMode("markdown",function(je,G){var ue=J.getMode(je,"text/html"),ee="null"==ue.name;void 0===G.highlightFormatting&&(G.highlightFormatting=!1),void 0===G.maxBlockquoteDepth&&(G.maxBlockquoteDepth=0),void 0===G.taskLists&&(G.taskLists=!1),void 0===G.strikethrough&&(G.strikethrough=!1),void 0===G.emoji&&(G.emoji=!1),void 0===G.fencedCodeBlockHighlighting&&(G.fencedCodeBlockHighlighting=!0),void 0===G.fencedCodeBlockDefaultMode&&(G.fencedCodeBlockDefaultMode="text/plain"),void 0===G.xml&&(G.xml=!0),void 0===G.tokenTypeOverrides&&(G.tokenTypeOverrides={});var P={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var Me in P)P.hasOwnProperty(Me)&&G.tokenTypeOverrides[Me]&&(P[Me]=G.tokenTypeOverrides[Me]);var ce=/^([*\-_])(?:\s*\1){2,}\s*$/,Ge=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,be=/^\[(x| )\](?=\s)/i,de=G.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,Se=/^ {0,3}(?:\={1,}|-{2,})\s*$/,qe=/^[^#!\[\]*_\\<>` "'(~:]+/,ct=/^(~~~+|```+)[ \t]*([\w\/+#-]*)[^\n`]*$/,ft=/^\s*\[[^\]]+?\]:.*$/,he=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/;function $t(S,v,$){return v.f=v.inline=$,$(S,v)}function er(S,v,$){return v.f=v.block=$,$(S,v)}function Xt(S){if(S.linkTitle=!1,S.linkHref=!1,S.linkText=!1,S.em=!1,S.strong=!1,S.strikethrough=!1,S.quote=0,S.indentedCode=!1,S.f==g){var v=ee;if(!v){var $=J.innerMode(ue,S.htmlState);v="xml"==$.mode.name&&null===$.state.tagStart&&!$.state.context&&$.state.tokenize.isInText}v&&(S.f=T,S.block=lt,S.htmlState=null)}return S.trailingSpace=0,S.trailingSpaceNewLine=!1,S.prevLine=S.thisLine,S.thisLine={stream:null},null}function lt(S,v){var $=S.column()===v.indentation,ye=function rt(S){return!S||!/\S/.test(S.string)}(v.prevLine.stream),z=v.indentedCode,V=v.prevLine.hr,N=!1!==v.list,A=(v.listStack[v.listStack.length-1]||0)+3;v.indentedCode=!1;var le=v.indentation;if(null===v.indentationDiff&&(v.indentationDiff=v.indentation,N)){for(v.list=null;le<v.listStack[v.listStack.length-1];)v.listStack.pop(),v.listStack.length?v.indentation=v.listStack[v.listStack.length-1]:v.list=!1;!1!==v.list&&(v.indentationDiff=le-v.listStack[v.listStack.length-1])}var B=!(ye||V||v.prevLine.header||N&&z||v.prevLine.fencedCodeEnd),se=(!1===v.list||V||ye)&&v.indentation<=A&&S.match(ce),Ce=null;if(v.indentationDiff>=4&&(z||v.prevLine.fencedCodeEnd||v.prevLine.header||ye))return S.skipToEnd(),v.indentedCode=!0,P.code;if(S.eatSpace())return null;if($&&v.indentation<=A&&(Ce=S.match(de))&&Ce[1].length<=6)return v.quote=0,v.header=Ce[1].length,v.thisLine.header=!0,G.highlightFormatting&&(v.formatting="header"),v.f=v.inline,ae(v);if(v.indentation<=A&&S.eat(">"))return v.quote=$?1:v.quote+1,G.highlightFormatting&&(v.formatting="quote"),S.eatSpace(),ae(v);if(!se&&!v.setext&&$&&v.indentation<=A&&(Ce=S.match(Ge))){var ht=Ce[1]?"ol":"ul";return v.indentation=le+S.current().length,v.list=!0,v.quote=0,v.listStack.push(v.indentation),v.em=!1,v.strong=!1,v.code=!1,v.strikethrough=!1,G.taskLists&&S.match(be,!1)&&(v.taskList=!0),v.f=v.inline,G.highlightFormatting&&(v.formatting=["list","list-"+ht]),ae(v)}return $&&v.indentation<=A&&(Ce=S.match(ct,!0))?(v.quote=0,v.fencedEndRE=new RegExp(Ce[1]+"+ *$"),v.localMode=G.fencedCodeBlockHighlighting&&function j(S){if(J.findModeByName){var v=J.findModeByName(S);v&&(S=v.mime||v.mimes[0])}var $=J.getMode(je,S);return"null"==$.name?null:$}(Ce[2]||G.fencedCodeBlockDefaultMode),v.localMode&&(v.localState=J.startState(v.localMode)),v.f=v.block=Wt,G.highlightFormatting&&(v.formatting="code-block"),v.code=-1,ae(v)):v.setext||!(B&&N||v.quote||!1!==v.list||v.code||se||ft.test(S.string))&&(Ce=S.lookAhead(1))&&(Ce=Ce.match(Se))?(v.setext?(v.header=v.setext,v.setext=0,S.skipToEnd(),G.highlightFormatting&&(v.formatting="header")):(v.header="="==Ce[0].charAt(0)?1:2,v.setext=v.header),v.thisLine.header=!0,v.f=v.inline,ae(v)):se?(S.skipToEnd(),v.hr=!0,v.thisLine.hr=!0,P.hr):"["===S.peek()?$t(S,v,re):$t(S,v,v.inline)}function g(S,v){var $=ue.token(S,v.htmlState);if(!ee){var ye=J.innerMode(ue,v.htmlState);("xml"==ye.mode.name&&null===ye.state.tagStart&&!ye.state.context&&ye.state.tokenize.isInText||v.md_inside&&S.current().indexOf(">")>-1)&&(v.f=T,v.block=lt,v.htmlState=null)}return $}function Wt(S,v){var V,$=v.listStack[v.listStack.length-1]||0,ye=v.indentation<$;return v.fencedEndRE&&v.indentation<=$+3&&(ye||S.match(v.fencedEndRE))?(G.highlightFormatting&&(v.formatting="code-block"),ye||(V=ae(v)),v.localMode=v.localState=null,v.block=lt,v.f=T,v.fencedEndRE=null,v.code=0,v.thisLine.fencedCodeEnd=!0,ye?er(S,v,v.block):V):v.localMode?v.localMode.token(S,v.localState):(S.skipToEnd(),P.code)}function ae(S){var v=[];if(S.formatting){v.push(P.formatting),"string"==typeof S.formatting&&(S.formatting=[S.formatting]);for(var $=0;$<S.formatting.length;$++)v.push(P.formatting+"-"+S.formatting[$]),"header"===S.formatting[$]&&v.push(P.formatting+"-"+S.formatting[$]+"-"+S.header),"quote"===S.formatting[$]&&v.push(!G.maxBlockquoteDepth||G.maxBlockquoteDepth>=S.quote?P.formatting+"-"+S.formatting[$]+"-"+S.quote:"error")}if(S.taskOpen)return v.push("meta"),v.length?v.join(" "):null;if(S.taskClosed)return v.push("property"),v.length?v.join(" "):null;if(S.linkHref?v.push(P.linkHref,"url"):(S.strong&&v.push(P.strong),S.em&&v.push(P.em),S.strikethrough&&v.push(P.strikethrough),S.emoji&&v.push(P.emoji),S.linkText&&v.push(P.linkText),S.code&&v.push(P.code),S.image&&v.push(P.image),S.imageAltText&&v.push(P.imageAltText,"link"),S.imageMarker&&v.push(P.imageMarker)),S.header&&v.push(P.header,P.header+"-"+S.header),S.quote&&(v.push(P.quote),v.push(!G.maxBlockquoteDepth||G.maxBlockquoteDepth>=S.quote?P.quote+"-"+S.quote:P.quote+"-"+G.maxBlockquoteDepth)),!1!==S.list){var ye=(S.listStack.length-1)%3;v.push(ye?1===ye?P.list2:P.list3:P.list1)}return S.trailingSpaceNewLine?v.push("trailing-space-new-line"):S.trailingSpace&&v.push("trailing-space-"+(S.trailingSpace%2?"a":"b")),v.length?v.join(" "):null}function Je(S,v){if(S.match(qe,!0))return ae(v)}function T(S,v){var $=v.text(S,v);if(typeof $<"u")return $;if(v.list)return v.list=null,ae(v);if(v.taskList)return" "===S.match(be,!0)[1]?v.taskOpen=!0:v.taskClosed=!0,G.highlightFormatting&&(v.formatting="task"),v.taskList=!1,ae(v);if(v.taskOpen=!1,v.taskClosed=!1,v.header&&S.match(/^#+$/,!0))return G.highlightFormatting&&(v.formatting="header"),ae(v);var z=S.next();if(v.linkTitle){v.linkTitle=!1;var V=z;if("("===z&&(V=")"),V=(V+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1"),S.match(new RegExp("^\\s*(?:[^"+V+"\\\\]+|\\\\\\\\|\\\\.)"+V),!0))return P.linkHref}if("`"===z){var A=v.formatting;G.highlightFormatting&&(v.formatting="code"),S.eatWhile("`");var le=S.current().length;if(0==v.code&&(!v.quote||1==le))return v.code=le,ae(v);if(le==v.code){var B=ae(v);return v.code=0,B}return v.formatting=A,ae(v)}if(v.code)return ae(v);if("\\"===z&&(S.next(),G.highlightFormatting)){var se=ae(v),Ce=P.formatting+"-escape";return se?se+" "+Ce:Ce}if("!"===z&&S.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return v.imageMarker=!0,v.image=!0,G.highlightFormatting&&(v.formatting="image"),ae(v);if("["===z&&v.imageMarker&&S.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return v.imageMarker=!1,v.imageAltText=!0,G.highlightFormatting&&(v.formatting="image"),ae(v);if("]"===z&&v.imageAltText){G.highlightFormatting&&(v.formatting="image");se=ae(v);return v.imageAltText=!1,v.image=!1,v.inline=v.f=x,se}if("["===z&&!v.image)return v.linkText&&S.match(/^.*?\]/)||(v.linkText=!0,G.highlightFormatting&&(v.formatting="link")),ae(v);if("]"===z&&v.linkText){G.highlightFormatting&&(v.formatting="link");se=ae(v);return v.linkText=!1,v.inline=v.f=S.match(/\(.*?\)| ?\[.*?\]/,!1)?x:T,se}if("<"===z&&S.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return v.f=v.inline=te,G.highlightFormatting&&(v.formatting="link"),(se=ae(v))?se+=" ":se="",se+P.linkInline;if("<"===z&&S.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return v.f=v.inline=te,G.highlightFormatting&&(v.formatting="link"),(se=ae(v))?se+=" ":se="",se+P.linkEmail;if(G.xml&&"<"===z&&S.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var ht=S.string.indexOf(">",S.pos);if(-1!=ht){var Yt=S.string.substring(S.start,ht);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(Yt)&&(v.md_inside=!0)}return S.backUp(1),v.htmlState=J.startState(ue),er(S,v,g)}if(G.xml&&"<"===z&&S.match(/^\/\w*?>/))return v.md_inside=!1,"tag";if("*"===z||"_"===z){for(var Ct=1,Et=1==S.pos?" ":S.string.charAt(S.pos-2);Ct<3&&S.eat(z);)Ct++;var xe=S.peek()||" ",nr=!/\s/.test(xe)&&(!he.test(xe)||/\s/.test(Et)||he.test(Et)),Le=!/\s/.test(Et)&&(!he.test(Et)||/\s/.test(xe)||he.test(xe)),qt=null,X=null;if(Ct%2&&(v.em||!nr||"*"!==z&&Le&&!he.test(Et)?v.em==z&&Le&&("*"===z||!nr||he.test(xe))&&(qt=!1):qt=!0),Ct>1&&(v.strong||!nr||"*"!==z&&Le&&!he.test(Et)?v.strong==z&&Le&&("*"===z||!nr||he.test(xe))&&(X=!1):X=!0),null!=X||null!=qt)return G.highlightFormatting&&(v.formatting=null==qt?"strong":null==X?"em":"strong em"),!0===qt&&(v.em=z),!0===X&&(v.strong=z),B=ae(v),!1===qt&&(v.em=!1),!1===X&&(v.strong=!1),B}else if(" "===z&&(S.eat("*")||S.eat("_"))){if(" "===S.peek())return ae(v);S.backUp(1)}if(G.strikethrough)if("~"===z&&S.eatWhile(z)){if(v.strikethrough)return G.highlightFormatting&&(v.formatting="strikethrough"),B=ae(v),v.strikethrough=!1,B;if(S.match(/^[^\s]/,!1))return v.strikethrough=!0,G.highlightFormatting&&(v.formatting="strikethrough"),ae(v)}else if(" "===z&&S.match("~~",!0)){if(" "===S.peek())return ae(v);S.backUp(2)}if(G.emoji&&":"===z&&S.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){v.emoji=!0,G.highlightFormatting&&(v.formatting="emoji");var Ae=ae(v);return v.emoji=!1,Ae}return" "===z&&(S.match(/^ +$/,!1)?v.trailingSpace++:v.trailingSpace&&(v.trailingSpaceNewLine=!0)),ae(v)}function te(S,v){if(">"===S.next()){v.f=v.inline=T,G.highlightFormatting&&(v.formatting="link");var ye=ae(v);return ye?ye+=" ":ye="",ye+P.linkInline}return S.match(/^[^>]+/,!0),P.linkInline}function x(S,v){if(S.eatSpace())return null;var $=S.next();return"("===$||"["===$?(v.f=v.inline=function H(S){return function(v,$){if(v.next()===S){$.f=$.inline=T,G.highlightFormatting&&($.formatting="link-string");var z=ae($);return $.linkHref=!1,z}return v.match(U[S]),$.linkHref=!0,ae($)}}("("===$?")":"]"),G.highlightFormatting&&(v.formatting="link-string"),v.linkHref=!0,ae(v)):"error"}var U={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function re(S,v){return S.match(/^([^\]\\]|\\.)*\]:/,!1)?(v.f=Q,S.next(),G.highlightFormatting&&(v.formatting="link"),v.linkText=!0,ae(v)):$t(S,v,T)}function Q(S,v){if(S.match("]:",!0)){v.f=v.inline=nt,G.highlightFormatting&&(v.formatting="link");var $=ae(v);return v.linkText=!1,$}return S.match(/^([^\]\\]|\\.)+/,!0),P.linkText}function nt(S,v){return S.eatSpace()?null:(S.match(/^[^\s]+/,!0),void 0===S.peek()?v.linkTitle=!0:S.match(/^(?:\s+(?:"(?:[^"\\]|\\.)+"|'(?:[^'\\]|\\.)+'|\((?:[^)\\]|\\.)+\)))?/,!0),v.f=v.inline=T,P.linkHref+" url")}var yt={startState:function(){return{f:lt,prevLine:{stream:null},thisLine:{stream:null},block:lt,htmlState:null,indentation:0,inline:T,text:Je,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(S){return{f:S.f,prevLine:S.prevLine,thisLine:S.thisLine,block:S.block,htmlState:S.htmlState&&J.copyState(ue,S.htmlState),indentation:S.indentation,localMode:S.localMode,localState:S.localMode?J.copyState(S.localMode,S.localState):null,inline:S.inline,text:S.text,formatting:!1,linkText:S.linkText,linkTitle:S.linkTitle,linkHref:S.linkHref,code:S.code,em:S.em,strong:S.strong,strikethrough:S.strikethrough,emoji:S.emoji,header:S.header,setext:S.setext,hr:S.hr,taskList:S.taskList,list:S.list,listStack:S.listStack.slice(0),quote:S.quote,indentedCode:S.indentedCode,trailingSpace:S.trailingSpace,trailingSpaceNewLine:S.trailingSpaceNewLine,md_inside:S.md_inside,fencedEndRE:S.fencedEndRE}},token:function(S,v){if(v.formatting=!1,S!=v.thisLine.stream){if(v.header=0,v.hr=!1,S.match(/^\s*$/,!0))return Xt(v),null;if(v.prevLine=v.thisLine,v.thisLine={stream:S},v.taskList=!1,v.trailingSpace=0,v.trailingSpaceNewLine=!1,!v.localState&&(v.f=v.block,v.f!=g)){var $=S.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(v.indentation=$,v.indentationDiff=null,$>0)return null}}return v.f(S,v)},innerMode:function(S){return S.block==g?{state:S.htmlState,mode:ue}:S.localState?{state:S.localState,mode:S.localMode}:{state:S,mode:yt}},indent:function(S,v,$){return S.block==g&&ue.indent?ue.indent(S.htmlState,v,$):S.localState&&S.localMode.indent?S.localMode.indent(S.localState,v,$):J.Pass},blankLine:Xt,getType:ae,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return yt},"xml"),J.defineMIME("text/markdown","markdown"),J.defineMIME("text/x-markdown","markdown")}(ge(1382),ge(8775),ge(8039))},1382:function(hi){hi.exports=function(){"use strict";var mt=navigator.userAgent,ge=navigator.platform,J=/gecko\/\d/i.test(mt),je=/MSIE \d/.test(mt),G=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(mt),ue=/Edge\/(\d+)/.exec(mt),ee=je||G||ue,j=ee&&(je?document.documentMode||6:+(ue||G)[1]),P=!ue&&/WebKit\//.test(mt),Me=P&&/Qt\/\d+\.\d+/.test(mt),ce=!ue&&/Chrome\/(\d+)/.exec(mt),Ge=ce&&+ce[1],be=/Opera\//.test(mt),de=/Apple Computer/.test(navigator.vendor),Se=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(mt),qe=/PhantomJS/.test(mt),ct=de&&(/Mobile\/\w+/.test(mt)||navigator.maxTouchPoints>2),ft=/Android/.test(mt),he=ct||ft||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(mt),Ze=ct||/Mac/.test(ge),$t=/\bCrOS\b/.test(mt),er=/win/i.test(ge),rt=be&&mt.match(/Version\/(\d*\.\d*)/);rt&&(rt=Number(rt[1])),rt&&rt>=15&&(be=!1,P=!0);var Xt=Ze&&(Me||be&&(null==rt||rt<12.11)),lt=J||ee&&j>=9;function g(r){return new RegExp("(^|\\s)"+r+"(?:$|\\s)\\s*")}var x,Wt=function(r,o){var e=r.className,t=g(o).exec(e);if(t){var n=e.slice(t.index+t[0].length);r.className=e.slice(0,t.index)+(n?t[1]+n:"")}};function ae(r){for(var o=r.childNodes.length;o>0;--o)r.removeChild(r.firstChild);return r}function Je(r,o){return ae(r).appendChild(o)}function T(r,o,e,t){var n=document.createElement(r);if(e&&(n.className=e),t&&(n.style.cssText=t),"string"==typeof o)n.appendChild(document.createTextNode(o));else if(o)for(var i=0;i<o.length;++i)n.appendChild(o[i]);return n}function te(r,o,e,t){var n=T(r,o,e,t);return n.setAttribute("role","presentation"),n}function U(r,o){if(3==o.nodeType&&(o=o.parentNode),r.contains)return r.contains(o);do{if(11==o.nodeType&&(o=o.host),o==r)return!0}while(o=o.parentNode)}function H(r){var e,o=r.ownerDocument||r;try{e=r.activeElement}catch{e=o.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function re(r,o){var e=r.className;g(o).test(e)||(r.className+=(e?" ":"")+o)}function Q(r,o){for(var e=r.split(" "),t=0;t<e.length;t++)e[t]&&!g(e[t]).test(o)&&(o+=" "+e[t]);return o}x=document.createRange?function(r,o,e,t){var n=document.createRange();return n.setEnd(t||r,e),n.setStart(r,o),n}:function(r,o,e){var t=document.body.createTextRange();try{t.moveToElementText(r.parentNode)}catch{return t}return t.collapse(!0),t.moveEnd("character",e),t.moveStart("character",o),t};var nt=function(r){r.select()};function yt(r){return r.display.wrapper.ownerDocument}function S(r){return v(r.display.wrapper)}function v(r){return r.getRootNode?r.getRootNode():r.ownerDocument}function $(r){return yt(r).defaultView}function ye(r){var o=Array.prototype.slice.call(arguments,1);return function(){return r.apply(null,o)}}function z(r,o,e){for(var t in o||(o={}),r)r.hasOwnProperty(t)&&(!1!==e||!o.hasOwnProperty(t))&&(o[t]=r[t]);return o}function V(r,o,e,t,n){null==o&&-1==(o=r.search(/[^\s\u00a0]/))&&(o=r.length);for(var i=t||0,l=n||0;;){var a=r.indexOf("\t",i);if(a<0||a>=o)return l+(o-i);l+=a-i,l+=e-l%e,i=a+1}}ct?nt=function(r){r.selectionStart=0,r.selectionEnd=r.value.length}:ee&&(nt=function(r){try{r.select()}catch{}});var N=function(){this.id=null,this.f=null,this.time=0,this.handler=ye(this.onTimeout,this)};function A(r,o){for(var e=0;e<r.length;++e)if(r[e]==o)return e;return-1}N.prototype.onTimeout=function(r){r.id=0,r.time<=+new Date?r.f():setTimeout(r.handler,r.time-+new Date)},N.prototype.set=function(r,o){this.f=o;var e=+new Date+r;(!this.id||e<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,r),this.time=e)};var B={toString:function(){return"CodeMirror.Pass"}},se={scroll:!1},Ce={origin:"*mouse"},ht={origin:"+move"};function Yt(r,o,e){for(var t=0,n=0;;){var i=r.indexOf("\t",t);-1==i&&(i=r.length);var l=i-t;if(i==r.length||n+l>=o)return t+Math.min(l,o-n);if(n+=i-t,t=i+1,(n+=e-n%e)>=o)return t}}var Ct=[""];function Et(r){for(;Ct.length<=r;)Ct.push(xe(Ct)+" ");return Ct[r]}function xe(r){return r[r.length-1]}function nr(r,o){for(var e=[],t=0;t<r.length;t++)e[t]=o(r[t],t);return e}function qt(){}function X(r,o){var e;return Object.create?e=Object.create(r):(qt.prototype=r,e=new qt),o&&z(o,e),e}var Ae=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function L(r){return/\w/.test(r)||r>"\x80"&&(r.toUpperCase()!=r.toLowerCase()||Ae.test(r))}function R(r,o){return o?!!(o.source.indexOf("\\w")>-1&&L(r))||o.test(r):L(r)}function Y(r){for(var o in r)if(r.hasOwnProperty(o)&&r[o])return!1;return!0}var we=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Te(r){return r.charCodeAt(0)>=768&&we.test(r)}function _t(r,o,e){for(;(e<0?o>0:o<r.length)&&Te(r.charAt(o));)o+=e;return o}function Ue(r,o,e){for(var t=o>e?-1:1;;){if(o==e)return o;var n=(o+e)/2,i=t<0?Math.ceil(n):Math.floor(n);if(i==o)return r(i)?o:e;r(i)?e=i:o=i+t}}var dt=null;function bt(r,o,e){var t;dt=null;for(var n=0;n<r.length;++n){var i=r[n];if(i.from<o&&i.to>o)return n;i.to==o&&(i.from!=i.to&&"before"==e?t=n:dt=n),i.from==o&&(i.from!=i.to&&"before"!=e?t=n:dt=n)}return t??dt}var At=function(){function e(u){return u<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(u):1424<=u&&u<=1524?"R":1536<=u&&u<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(u-1536):1774<=u&&u<=2220?"r":8192<=u&&u<=8203?"w":8204==u?"b":"L"}var t=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,n=/[stwN]/,i=/[LRr]/,l=/[Lb1n]/,a=/[1n]/;function s(u,f,c){this.level=u,this.from=f,this.to=c}return function(u,f){var c="ltr"==f?"L":"R";if(0==u.length||"ltr"==f&&!t.test(u))return!1;for(var h=u.length,d=[],m=0;m<h;++m)d.push(e(u.charCodeAt(m)));for(var y=0,w=c;y<h;++y){var k=d[y];"m"==k?d[y]=w:w=k}for(var M=0,D=c;M<h;++M){var F=d[M];"1"==F&&"r"==D?d[M]="n":i.test(F)&&(D=F,"r"==F&&(d[M]="R"))}for(var W=1,I=d[0];W<h-1;++W){var _=d[W];"+"==_&&"1"==I&&"1"==d[W+1]?d[W]="1":","==_&&I==d[W+1]&&("1"==I||"n"==I)&&(d[W]=I),I=_}for(var q=0;q<h;++q){var fe=d[q];if(","==fe)d[q]="N";else if("%"==fe){var ve=void 0;for(ve=q+1;ve<h&&"%"==d[ve];++ve);for(var Ye=q&&"!"==d[q-1]||ve<h&&"1"==d[ve]?"1":"N",Ne=q;Ne<ve;++Ne)d[Ne]=Ye;q=ve-1}}for(var _e=0,tt=c;_e<h;++_e){var Ee=d[_e];"L"==tt&&"1"==Ee?d[_e]="L":i.test(Ee)&&(tt=Ee)}for(var ze=0;ze<h;++ze)if(n.test(d[ze])){var Fe=void 0;for(Fe=ze+1;Fe<h&&n.test(d[Fe]);++Fe);for(var ke="L"==(ze?d[ze-1]:c),ot=ke==("L"==(Fe<h?d[Fe]:c))?ke?"L":"R":c,Tt=ze;Tt<Fe;++Tt)d[Tt]=ot;ze=Fe-1}for(var Vt,Mt=[],Pe=0;Pe<h;)if(l.test(d[Pe])){var Dr=Pe;for(++Pe;Pe<h&&l.test(d[Pe]);++Pe);Mt.push(new s(0,Dr,Pe))}else{var ut=Pe,gn=Mt.length,lr="rtl"==f?1:0;for(++Pe;Pe<h&&"L"!=d[Pe];++Pe);for(var Dt=ut;Dt<Pe;)if(a.test(d[Dt])){ut<Dt&&(Mt.splice(gn,0,new s(1,ut,Dt)),gn+=lr);var Ar=Dt;for(++Dt;Dt<Pe&&a.test(d[Dt]);++Dt);Mt.splice(gn,0,new s(2,Ar,Dt)),gn+=lr,ut=Dt}else++Dt;ut<Pe&&Mt.splice(gn,0,new s(1,ut,Pe))}return"ltr"==f&&(1==Mt[0].level&&(Vt=u.match(/^\s+/))&&(Mt[0].from=Vt[0].length,Mt.unshift(new s(0,0,Vt[0].length))),1==xe(Mt).level&&(Vt=u.match(/\s+$/))&&(xe(Mt).to-=Vt[0].length,Mt.push(new s(0,h-Vt[0].length,h)))),"rtl"==f?Mt.reverse():Mt}}();function at(r,o){var e=r.order;return null==e&&(e=r.order=At(r.text,o)),e}var Oo=[],K=function(r,o,e){if(r.addEventListener)r.addEventListener(o,e,!1);else if(r.attachEvent)r.attachEvent("on"+o,e);else{var t=r._handlers||(r._handlers={});t[o]=(t[o]||Oo).concat(e)}};function di(r,o){return r._handlers&&r._handlers[o]||Oo}function ne(r,o,e){if(r.removeEventListener)r.removeEventListener(o,e,!1);else if(r.detachEvent)r.detachEvent("on"+o,e);else{var t=r._handlers,n=t&&t[o];if(n){var i=A(n,e);i>-1&&(t[o]=n.slice(0,i).concat(n.slice(i+1)))}}}function Ve(r,o){var e=di(r,o);if(e.length)for(var t=Array.prototype.slice.call(arguments,2),n=0;n<e.length;++n)e[n].apply(null,t)}function We(r,o,e){return"string"==typeof o&&(o={type:o,preventDefault:function(){this.defaultPrevented=!0}}),Ve(r,e||o.type,r,o),It(o)||o.codemirrorIgnore}function xt(r){var o=r._handlers&&r._handlers.cursorActivity;if(o)for(var e=r.curOp.cursorActivityHandlers||(r.curOp.cursorActivityHandlers=[]),t=0;t<o.length;++t)-1==A(e,o[t])&&e.push(o[t])}function Be(r,o){return di(r,o).length>0}function Zt(r){r.prototype.on=function(o,e){K(this,o,e)},r.prototype.off=function(o,e){ne(this,o,e)}}function it(r){r.preventDefault?r.preventDefault():r.returnValue=!1}function yr(r){r.stopPropagation?r.stopPropagation():r.cancelBubble=!0}function It(r){return null!=r.defaultPrevented?r.defaultPrevented:0==r.returnValue}function Gr(r){it(r),yr(r)}function Jt(r){return r.target||r.srcElement}function qr(r){var o=r.which;return null==o&&(1&r.button?o=1:2&r.button?o=3:4&r.button&&(o=2)),Ze&&r.ctrlKey&&1==o&&(o=3),o}var cr,mn,Ki=function(){if(ee&&j<9)return!1;var r=T("div");return"draggable"in r||"dragDrop"in r}();function Sl(r){if(null==cr){var o=T("span","\u200b");Je(r,T("span",[o,document.createTextNode("x")])),0!=r.firstChild.offsetHeight&&(cr=o.offsetWidth<=1&&o.offsetHeight>2&&!(ee&&j<8))}var e=cr?T("span","\u200b"):T("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return e.setAttribute("cm-text",""),e}function Wo(r){if(null!=mn)return mn;var o=Je(r,document.createTextNode("A\u062eA")),e=x(o,0,1).getBoundingClientRect(),t=x(o,1,2).getBoundingClientRect();return ae(r),!(!e||e.left==e.right)&&(mn=t.right-e.right<3)}var r,Rn=3!="\n\nb".split(/\n/).length?function(r){for(var o=0,e=[],t=r.length;o<=t;){var n=r.indexOf("\n",o);-1==n&&(n=r.length);var i=r.slice(o,"\r"==r.charAt(n-1)?n-1:n),l=i.indexOf("\r");-1!=l?(e.push(i.slice(0,l)),o+=l+1):(e.push(i),o=n+1)}return e}:function(r){return r.split(/\r\n?|\n/)},yn=window.getSelection?function(r){try{return r.selectionStart!=r.selectionEnd}catch{return!1}}:function(r){var o;try{o=r.ownerDocument.selection.createRange()}catch{}return!(!o||o.parentElement()!=r)&&0!=o.compareEndPoints("StartToEnd",o)},xr="oncopy"in(r=T("div"))||(r.setAttribute("oncopy","return;"),"function"==typeof r.oncopy),Ur=null;var hr={},xn={};function pi(r,o){arguments.length>2&&(o.dependencies=Array.prototype.slice.call(arguments,2)),hr[r]=o}function ar(r){if("string"==typeof r&&xn.hasOwnProperty(r))r=xn[r];else if(r&&"string"==typeof r.name&&xn.hasOwnProperty(r.name)){var o=xn[r.name];"string"==typeof o&&(o={name:o}),(r=X(o,r)).name=o.name}else{if("string"==typeof r&&/^[\w\-]+\/[\w\-]+\+xml$/.test(r))return ar("application/xml");if("string"==typeof r&&/^[\w\-]+\/[\w\-]+\+json$/.test(r))return ar("application/json")}return"string"==typeof r?{name:r}:r||{name:"null"}}function Zr(r,o){o=ar(o);var e=hr[o.name];if(!e)return Zr(r,"text/plain");var t=e(r,o);if(Er.hasOwnProperty(o.name)){var n=Er[o.name];for(var i in n)n.hasOwnProperty(i)&&(t.hasOwnProperty(i)&&(t["_"+i]=t[i]),t[i]=n[i])}if(t.name=o.name,o.helperType&&(t.helperType=o.helperType),o.modeProps)for(var l in o.modeProps)t[l]=o.modeProps[l];return t}var Er={};function vi(r,o){z(o,Er.hasOwnProperty(r)?Er[r]:Er[r]={})}function sr(r,o){if(!0===o)return o;if(r.copyState)return r.copyState(o);var e={};for(var t in o){var n=o[t];n instanceof Array&&(n=n.concat([])),e[t]=n}return e}function bn(r,o){for(var e;r.innerMode&&(e=r.innerMode(o))&&e.mode!=r;)o=e.state,r=e.mode;return e||{mode:r,state:o}}function Fr(r,o,e){return!r.startState||r.startState(o,e)}var pt=function(r,o,e){this.pos=this.start=0,this.string=r,this.tabSize=o||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=e};function ie(r,o){if((o-=r.first)<0||o>=r.size)throw new Error("There is no line "+(o+r.first)+" in the document.");for(var e=r;!e.lines;)for(var t=0;;++t){var n=e.children[t],i=n.chunkSize();if(o<i){e=n;break}o-=i}return e.lines[o]}function $e(r,o,e){var t=[],n=o.line;return r.iter(o.line,e.line+1,function(i){var l=i.text;n==e.line&&(l=l.slice(0,e.ch)),n==o.line&&(l=l.slice(o.ch)),t.push(l),++n}),t}function oe(r,o,e){var t=[];return r.iter(o,e,function(n){t.push(n.text)}),t}function Gt(r,o){var e=o-r.height;if(e)for(var t=r;t;t=t.parent)t.height+=e}function Re(r){if(null==r.parent)return null;for(var o=r.parent,e=A(o.lines,r),t=o.parent;t;o=t,t=t.parent)for(var n=0;t.children[n]!=o;++n)e+=t.children[n].chunkSize();return e+o.first}function Ht(r,o){var e=r.first;e:do{for(var t=0;t<r.children.length;++t){var n=r.children[t],i=n.height;if(o<i){r=n;continue e}o-=i,e+=n.chunkSize()}return e}while(!r.lines);for(var l=0;l<r.lines.length;++l){var s=r.lines[l].height;if(o<s)break;o-=s}return e+l}function p(r,o){return o>=r.first&&o<r.first+r.size}function b(r,o){return String(r.lineNumberFormatter(o+r.firstLineNumber))}function C(r,o,e){if(void 0===e&&(e=null),!(this instanceof C))return new C(r,o,e);this.line=r,this.ch=o,this.sticky=e}function O(r,o){return r.line-o.line||r.ch-o.ch}function E(r,o){return r.sticky==o.sticky&&0==O(r,o)}function Z(r){return C(r.line,r.ch)}function Ie(r,o){return O(r,o)<0?o:r}function St(r,o){return O(r,o)<0?r:o}function tr(r,o){return Math.max(r.first,Math.min(o,r.first+r.size-1))}function pe(r,o){if(o.line<r.first)return C(r.first,0);var e=r.first+r.size-1;return o.line>e?C(e,ie(r,e).text.length):function Ca(r,o){var e=r.ch;return null==e||e>o?C(r.line,o):e<0?C(r.line,0):r}(o,ie(r,o.line).text.length)}function me(r,o){for(var e=[],t=0;t<o.length;t++)e[t]=pe(r,o[t]);return e}pt.prototype.eol=function(){return this.pos>=this.string.length},pt.prototype.sol=function(){return this.pos==this.lineStart},pt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},pt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},pt.prototype.eat=function(r){var o=this.string.charAt(this.pos);if("string"==typeof r?o==r:o&&(r.test?r.test(o):r(o)))return++this.pos,o},pt.prototype.eatWhile=function(r){for(var o=this.pos;this.eat(r););return this.pos>o},pt.prototype.eatSpace=function(){for(var r=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>r},pt.prototype.skipToEnd=function(){this.pos=this.string.length},pt.prototype.skipTo=function(r){var o=this.string.indexOf(r,this.pos);if(o>-1)return this.pos=o,!0},pt.prototype.backUp=function(r){this.pos-=r},pt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=V(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?V(this.string,this.lineStart,this.tabSize):0)},pt.prototype.indentation=function(){return V(this.string,null,this.tabSize)-(this.lineStart?V(this.string,this.lineStart,this.tabSize):0)},pt.prototype.match=function(r,o,e){if("string"!=typeof r){var i=this.string.slice(this.pos).match(r);return i&&i.index>0?null:(i&&!1!==o&&(this.pos+=i[0].length),i)}var t=function(l){return e?l.toLowerCase():l};if(t(this.string.substr(this.pos,r.length))==t(r))return!1!==o&&(this.pos+=r.length),!0},pt.prototype.current=function(){return this.string.slice(this.start,this.pos)},pt.prototype.hideFirstChars=function(r,o){this.lineStart+=r;try{return o()}finally{this.lineStart-=r}},pt.prototype.lookAhead=function(r){var o=this.lineOracle;return o&&o.lookAhead(r)},pt.prototype.baseToken=function(){var r=this.lineOracle;return r&&r.baseToken(this.pos)};var Ho=function(r,o){this.state=r,this.lookAhead=o},Or=function(r,o,e,t){this.state=o,this.doc=r,this.line=e,this.maxLookAhead=t||0,this.baseTokens=null,this.baseTokenPos=1};function ji(r,o,e,t){var n=[r.state.modeGen],i={};Tl(r,o.text,r.doc.mode,e,function(u,f){return n.push(u,f)},i,t);for(var l=e.state,a=function(u){e.baseTokens=n;var f=r.state.overlays[u],c=1,h=0;e.state=!0,Tl(r,o.text,f.mode,e,function(d,m){for(var y=c;h<d;){var w=n[c];w>d&&n.splice(c,1,d,n[c+1],w),c+=2,h=Math.min(d,w)}if(m)if(f.opaque)n.splice(y,c-y,d,"overlay "+m),c=y+2;else for(;y<c;y+=2){var k=n[y+1];n[y+1]=(k?k+" ":"")+"overlay "+m}},i),e.state=l,e.baseTokens=null,e.baseTokenPos=1},s=0;s<r.state.overlays.length;++s)a(s);return{styles:n,classes:i.bgClass||i.textClass?i:null}}function Wr(r,o,e){if(!o.styles||o.styles[0]!=r.state.modeGen){var t=gi(r,Re(o)),n=o.text.length>r.options.maxHighlightLength&&sr(r.doc.mode,t.state),i=ji(r,o,t);n&&(t.state=n),o.stateAfter=t.save(!n),o.styles=i.styles,i.classes?o.styleClasses=i.classes:o.styleClasses&&(o.styleClasses=null),e===r.doc.highlightFrontier&&(r.doc.modeFrontier=Math.max(r.doc.modeFrontier,++r.doc.highlightFrontier))}return o.styles}function gi(r,o,e){var t=r.doc,n=r.display;if(!t.mode.startState)return new Or(t,!0,o);var i=function Sa(r,o,e){for(var t,n,i=r.doc,l=e?-1:o-(r.doc.mode.innerMode?1e3:100),a=o;a>l;--a){if(a<=i.first)return i.first;var s=ie(i,a-1),u=s.stateAfter;if(u&&(!e||a+(u instanceof Ho?u.lookAhead:0)<=i.modeFrontier))return a;var f=V(s.text,null,r.options.tabSize);(null==n||t>f)&&(n=a-1,t=f)}return n}(r,o,e),l=i>t.first&&ie(t,i-1).stateAfter,a=l?Or.fromSaved(t,l,i):new Or(t,Fr(t.mode),i);return t.iter(i,o,function(s){Po(r,s.text,a);var u=a.line;s.stateAfter=u==o-1||u%5==0||u>=n.viewFrom&&u<n.viewTo?a.save():null,a.nextLine()}),e&&(t.modeFrontier=a.line),a}function Po(r,o,e,t){var n=r.doc.mode,i=new pt(o,r.options.tabSize,e);for(i.start=i.pos=t||0,""==o&&mi(n,e.state);!i.eol();)Xi(n,i,e.state),i.start=i.pos}function mi(r,o){if(r.blankLine)return r.blankLine(o);if(r.innerMode){var e=bn(r,o);if(e.mode.blankLine)return e.mode.blankLine(e.state)}}function Xi(r,o,e,t){for(var n=0;n<10;n++){t&&(t[0]=bn(r,e).mode);var i=r.token(o,e);if(o.pos>o.start)return i}throw new Error("Mode "+r.name+" failed to advance stream.")}Or.prototype.lookAhead=function(r){var o=this.doc.getLine(this.line+r);return null!=o&&r>this.maxLookAhead&&(this.maxLookAhead=r),o},Or.prototype.baseToken=function(r){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=r;)this.baseTokenPos+=2;var o=this.baseTokens[this.baseTokenPos+1];return{type:o&&o.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-r}},Or.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Or.fromSaved=function(r,o,e){return o instanceof Ho?new Or(r,sr(r.mode,o.state),e,o.lookAhead):new Or(r,sr(r.mode,o),e)},Or.prototype.save=function(r){var o=!1!==r?sr(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Ho(o,this.maxLookAhead):o};var kl=function(r,o,e){this.start=r.start,this.end=r.pos,this.string=r.current(),this.type=o||null,this.state=e};function Bo(r,o,e,t){var l,f,n=r.doc,i=n.mode,a=ie(n,(o=pe(n,o)).line),s=gi(r,o.line,e),u=new pt(a.text,r.options.tabSize,s);for(t&&(f=[]);(t||u.pos<o.ch)&&!u.eol();)u.start=u.pos,l=Xi(i,u,s.state),t&&f.push(new kl(u,l,sr(n.mode,s.state)));return t?f:new kl(u,l,s.state)}function Ll(r,o){if(r)for(;;){var e=r.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!e)break;r=r.slice(0,e.index)+r.slice(e.index+e[0].length);var t=e[1]?"bgClass":"textClass";null==o[t]?o[t]=e[2]:new RegExp("(?:^|\\s)"+e[2]+"(?:$|\\s)").test(o[t])||(o[t]+=" "+e[2])}return r}function Tl(r,o,e,t,n,i,l){var a=e.flattenSpans;null==a&&(a=r.options.flattenSpans);var c,s=0,u=null,f=new pt(o,r.options.tabSize,t),h=r.options.addModeClass&&[null];for(""==o&&Ll(mi(e,t.state),i);!f.eol();){if(f.pos>r.options.maxHighlightLength?(a=!1,l&&Po(r,o,t,f.pos),f.pos=o.length,c=null):c=Ll(Xi(e,f,t.state,h),i),h){var d=h[0].name;d&&(c="m-"+(c?d+" "+c:d))}if(!a||u!=c){for(;s<f.start;)n(s=Math.min(f.start,s+5e3),u);u=c}f.start=f.pos}for(;s<f.pos;){var m=Math.min(f.pos,s+5e3);n(m,u),s=m}}var La=!1,Jr=!1;function Ro(r,o,e){this.marker=r,this.from=o,this.to=e}function Yi(r,o){if(r)for(var e=0;e<r.length;++e){var t=r[e];if(t.marker==o)return t}}function _o(r,o){for(var e,t=0;t<r.length;++t)r[t]!=o&&(e||(e=[])).push(r[t]);return e}function Ml(r,o){if(o.full)return null;var e=p(r,o.from.line)&&ie(r,o.from.line).markedSpans,t=p(r,o.to.line)&&ie(r,o.to.line).markedSpans;if(!e&&!t)return null;var n=o.from.ch,i=o.to.ch,l=0==O(o.from,o.to),a=function Ns(r,o,e){var t;if(r)for(var n=0;n<r.length;++n){var i=r[n],l=i.marker;null!=i.from&&!(l.inclusiveLeft?i.from<=o:i.from<o)&&(i.from!=o||"bookmark"!=l.type||e&&i.marker.insertLeft)||(t||(t=[])).push(new Ro(l,i.from,null==i.to||(l.inclusiveRight?i.to>=o:i.to>o)?null:i.to))}return t}(e,n,l),s=function Es(r,o,e){var t;if(r)for(var n=0;n<r.length;++n){var i=r[n],l=i.marker;(null==i.to||(l.inclusiveRight?i.to>=o:i.to>o)||i.from==o&&"bookmark"==l.type&&(!e||i.marker.insertLeft))&&(t||(t=[])).push(new Ro(l,null==i.from||(l.inclusiveLeft?i.from<=o:i.from<o)?null:i.from-o,null==i.to?null:i.to-o))}return t}(t,i,l),u=1==o.text.length,f=xe(o.text).length+(u?n:0);if(a)for(var c=0;c<a.length;++c){var h=a[c];if(null==h.to){var d=Yi(s,h.marker);d?u&&(h.to=null==d.to?null:d.to+f):h.to=n}}if(s)for(var m=0;m<s.length;++m){var y=s[m];null!=y.to&&(y.to+=f),null==y.from?Yi(a,y.marker)||(y.from=f,u&&(a||(a=[])).push(y)):(y.from+=f,u&&(a||(a=[])).push(y))}a&&(a=Ma(a)),s&&s!=a&&(s=Ma(s));var k=[a];if(!u){var D,M=o.text.length-2;if(M>0&&a)for(var F=0;F<a.length;++F)null==a[F].to&&(D||(D=[])).push(new Ro(a[F].marker,null,null));for(var W=0;W<M;++W)k.push(D);k.push(s)}return k}function Ma(r){for(var o=0;o<r.length;++o){var e=r[o];null!=e.from&&e.from==e.to&&!1!==e.marker.clearWhenEmpty&&r.splice(o--,1)}return r.length?r:null}function Al(r){var o=r.markedSpans;if(o){for(var e=0;e<o.length;++e)o[e].marker.detachLine(r);r.markedSpans=null}}function Da(r,o){if(o){for(var e=0;e<o.length;++e)o[e].marker.attachLine(r);r.markedSpans=o}}function Zi(r){return r.inclusiveLeft?-1:0}function Ji(r){return r.inclusiveRight?1:0}function yi(r,o){var e=r.lines.length-o.lines.length;if(0!=e)return e;var t=r.find(),n=o.find(),i=O(t.from,n.from)||Zi(r)-Zi(o);return i?-i:O(t.to,n.to)||Ji(r)-Ji(o)||o.id-r.id}function Qi(r,o){var t,e=Jr&&r.markedSpans;if(e)for(var n=void 0,i=0;i<e.length;++i)(n=e[i]).marker.collapsed&&null==(o?n.from:n.to)&&(!t||yi(t,n.marker)<0)&&(t=n.marker);return t}function zo(r){return Qi(r,!0)}function Vi(r){return Qi(r,!1)}function Aa(r,o){var t,e=Jr&&r.markedSpans;if(e)for(var n=0;n<e.length;++n){var i=e[n];i.marker.collapsed&&(null==i.from||i.from<o)&&(null==i.to||i.to>o)&&(!t||yi(t,i.marker)<0)&&(t=i.marker)}return t}function $i(r,o,e,t,n){var i=ie(r,o),l=Jr&&i.markedSpans;if(l)for(var a=0;a<l.length;++a){var s=l[a];if(s.marker.collapsed){var u=s.marker.find(0),f=O(u.from,e)||Zi(s.marker)-Zi(n),c=O(u.to,t)||Ji(s.marker)-Ji(n);if(!(f>=0&&c<=0||f<=0&&c>=0)&&(f<=0&&(s.marker.inclusiveRight&&n.inclusiveLeft?O(u.to,e)>=0:O(u.to,e)>0)||f>=0&&(s.marker.inclusiveRight&&n.inclusiveLeft?O(u.from,t)<=0:O(u.from,t)<0)))return!0}}}function Ir(r){for(var o;o=zo(r);)r=o.find(-1,!0).line;return r}function Nl(r,o){var e=ie(r,o),t=Ir(e);return e==t?o:Re(t)}function Ea(r,o){if(o>r.lastLine())return o;var t,e=ie(r,o);if(!jr(r,e))return o;for(;t=Vi(e);)e=t.find(1,!0).line;return Re(e)+1}function jr(r,o){var e=Jr&&o.markedSpans;if(e)for(var t=void 0,n=0;n<e.length;++n)if((t=e[n]).marker.collapsed){if(null==t.from)return!0;if(!t.marker.widgetNode&&0==t.from&&t.marker.inclusiveLeft&&Go(r,o,t))return!0}}function Go(r,o,e){if(null==e.to){var t=e.marker.find(1,!0);return Go(r,t.line,Yi(t.line.markedSpans,e.marker))}if(e.marker.inclusiveRight&&e.to==o.text.length)return!0;for(var n=void 0,i=0;i<o.markedSpans.length;++i)if((n=o.markedSpans[i]).marker.collapsed&&!n.marker.widgetNode&&n.from==e.to&&(null==n.to||n.to!=e.from)&&(n.marker.inclusiveLeft||e.marker.inclusiveRight)&&Go(r,o,n))return!0}function rr(r){for(var o=0,e=(r=Ir(r)).parent,t=0;t<e.lines.length;++t){var n=e.lines[t];if(n==r)break;o+=n.height}for(var i=e.parent;i;i=(e=i).parent)for(var l=0;l<i.children.length;++l){var a=i.children[l];if(a==e)break;o+=a.height}return o}function xi(r){if(0==r.height)return 0;for(var e,o=r.text.length,t=r;e=zo(t);){var n=e.find(0,!0);t=n.from.line,o+=n.from.ch-n.to.ch}for(t=r;e=Vi(t);){var i=e.find(0,!0);o-=t.text.length-i.from.ch,o+=(t=i.to.line).text.length-i.to.ch}return o}function Hr(r){var o=r.display,e=r.doc;o.maxLine=ie(e,e.first),o.maxLineLength=xi(o.maxLine),o.maxLineChanged=!0,e.iter(function(t){var n=xi(t);n>o.maxLineLength&&(o.maxLineLength=n,o.maxLine=t)})}var Vr=function(r,o,e){this.text=r,Da(this,o),this.height=e?e(this):1};function bi(r){r.parent=null,Al(r)}Vr.prototype.lineNo=function(){return Re(this)},Zt(Vr);var Fs={},Os={};function Fa(r,o){if(!r||/^\s*$/.test(r))return null;var e=o.addModeClass?Os:Fs;return e[r]||(e[r]=r.replace(/\S+/g,"cm-$&"))}function Oa(r,o){var e=te("span",null,null,P?"padding-right: .1px":null),t={pre:te("pre",[e],"CodeMirror-line"),content:e,col:0,pos:0,cm:r,trailingSpace:!1,splitSpaces:r.getOption("lineWrapping")};o.measure={};for(var n=0;n<=(o.rest?o.rest.length:0);n++){var i=n?o.rest[n-1]:o.line,l=void 0;t.pos=0,t.addToken=Ia,Wo(r.display.measure)&&(l=at(i,r.doc.direction))&&(t.addToken=Is(t.addToken,l)),t.map=[],Hs(i,t,Wr(r,i,o!=r.display.externalMeasured&&Re(i))),i.styleClasses&&(i.styleClasses.bgClass&&(t.bgClass=Q(i.styleClasses.bgClass,t.bgClass||"")),i.styleClasses.textClass&&(t.textClass=Q(i.styleClasses.textClass,t.textClass||""))),0==t.map.length&&t.map.push(0,0,t.content.appendChild(Sl(r.display.measure))),0==n?(o.measure.map=t.map,o.measure.cache={}):((o.measure.maps||(o.measure.maps=[])).push(t.map),(o.measure.caches||(o.measure.caches=[])).push({}))}if(P){var s=t.content.lastChild;(/\bcm-tab\b/.test(s.className)||s.querySelector&&s.querySelector(".cm-tab"))&&(t.content.className="cm-tab-wrap-hack")}return Ve(r,"renderLine",r,o.line,t.pre),t.pre.className&&(t.textClass=Q(t.pre.className,t.textClass||"")),t}function Wa(r){var o=T("span","\u2022","cm-invalidchar");return o.title="\\u"+r.charCodeAt(0).toString(16),o.setAttribute("aria-label",o.title),o}function Ia(r,o,e,t,n,i,l){if(o){var f,a=r.splitSpaces?function Ws(r,o){if(r.length>1&&!/  /.test(r))return r;for(var e=o,t="",n=0;n<r.length;n++){var i=r.charAt(n);" "==i&&e&&(n==r.length-1||32==r.charCodeAt(n+1))&&(i="\xa0"),t+=i,e=" "==i}return t}(o,r.trailingSpace):o,s=r.cm.state.specialChars,u=!1;if(s.test(o)){f=document.createDocumentFragment();for(var c=0;;){s.lastIndex=c;var h=s.exec(o),d=h?h.index-c:o.length-c;if(d){var m=document.createTextNode(a.slice(c,c+d));f.appendChild(ee&&j<9?T("span",[m]):m),r.map.push(r.pos,r.pos+d,m),r.col+=d,r.pos+=d}if(!h)break;c+=d+1;var y=void 0;if("\t"==h[0]){var w=r.cm.options.tabSize,k=w-r.col%w;(y=f.appendChild(T("span",Et(k),"cm-tab"))).setAttribute("role","presentation"),y.setAttribute("cm-text","\t"),r.col+=k}else"\r"==h[0]||"\n"==h[0]?((y=f.appendChild(T("span","\r"==h[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",h[0]),r.col+=1):((y=r.cm.options.specialCharPlaceholder(h[0])).setAttribute("cm-text",h[0]),f.appendChild(ee&&j<9?T("span",[y]):y),r.col+=1);r.map.push(r.pos,r.pos+1,y),r.pos++}}else r.col+=o.length,f=document.createTextNode(a),r.map.push(r.pos,r.pos+o.length,f),ee&&j<9&&(u=!0),r.pos+=o.length;if(r.trailingSpace=32==a.charCodeAt(o.length-1),e||t||n||u||i||l){var M=e||"";t&&(M+=t),n&&(M+=n);var D=T("span",[f],M,i);if(l)for(var F in l)l.hasOwnProperty(F)&&"style"!=F&&"class"!=F&&D.setAttribute(F,l[F]);return r.content.appendChild(D)}r.content.appendChild(f)}}function Is(r,o){return function(e,t,n,i,l,a,s){n=n?n+" cm-force-border":"cm-force-border";for(var u=e.pos,f=u+t.length;;){for(var c=void 0,h=0;h<o.length&&!((c=o[h]).to>u&&c.from<=u);h++);if(c.to>=f)return r(e,t,n,i,l,a,s);r(e,t.slice(0,c.to-u),n,i,null,a,s),i=null,t=t.slice(c.to-u),u=c.to}}}function Ha(r,o,e,t){var n=!t&&e.widgetNode;n&&r.map.push(r.pos,r.pos+o,n),!t&&r.cm.display.input.needsContentAttribute&&(n||(n=r.content.appendChild(document.createElement("span"))),n.setAttribute("cm-marker",e.id)),n&&(r.cm.display.input.setUneditable(n),r.content.appendChild(n)),r.pos+=o,r.trailingSpace=!1}function Hs(r,o,e){var t=r.markedSpans,n=r.text,i=0;if(t)for(var c,h,m,y,w,k,M,a=n.length,s=0,u=1,f="",d=0;;){if(d==s){m=y=w=h="",M=null,k=null,d=1/0;for(var D=[],F=void 0,W=0;W<t.length;++W){var I=t[W],_=I.marker;if("bookmark"==_.type&&I.from==s&&_.widgetNode)D.push(_);else if(I.from<=s&&(null==I.to||I.to>s||_.collapsed&&I.to==s&&I.from==s)){if(null!=I.to&&I.to!=s&&d>I.to&&(d=I.to,y=""),_.className&&(m+=" "+_.className),_.css&&(h=(h?h+";":"")+_.css),_.startStyle&&I.from==s&&(w+=" "+_.startStyle),_.endStyle&&I.to==d&&(F||(F=[])).push(_.endStyle,I.to),_.title&&((M||(M={})).title=_.title),_.attributes)for(var q in _.attributes)(M||(M={}))[q]=_.attributes[q];_.collapsed&&(!k||yi(k.marker,_)<0)&&(k=I)}else I.from>s&&d>I.from&&(d=I.from)}if(F)for(var fe=0;fe<F.length;fe+=2)F[fe+1]==d&&(y+=" "+F[fe]);if(!k||k.from==s)for(var ve=0;ve<D.length;++ve)Ha(o,0,D[ve]);if(k&&(k.from||0)==s){if(Ha(o,(null==k.to?a+1:k.to)-s,k.marker,null==k.from),null==k.to)return;k.to==s&&(k=!1)}}if(s>=a)break;for(var Ye=Math.min(a,d);;){if(f){var Ne=s+f.length;if(!k){var _e=Ne>Ye?f.slice(0,Ye-s):f;o.addToken(o,_e,c?c+m:m,w,s+_e.length==d?y:"",h,M)}if(Ne>=Ye){f=f.slice(Ye-s),s=Ye;break}s=Ne,w=""}f=n.slice(i,i=e[u++]),c=Fa(e[u++],o.cm.options)}}else for(var l=1;l<e.length;l+=2)o.addToken(o,n.slice(i,i=e[l]),Fa(e[l+1],o.cm.options))}function Fl(r,o,e){this.line=o,this.rest=function Kr(r){for(var o,e;o=Vi(r);)r=o.find(1,!0).line,(e||(e=[])).push(r);return e}(o),this.size=this.rest?Re(xe(this.rest))-e+1:1,this.node=this.text=null,this.hidden=jr(r,o)}function Uo(r,o,e){for(var n,t=[],i=o;i<e;i=n){var l=new Fl(r.doc,ie(r.doc,i),i);n=i+l.size,t.push(l)}return t}var _n=null;var eo=null;function Pt(r,o){var e=di(r,o);if(e.length){var n,t=Array.prototype.slice.call(arguments,2);_n?n=_n.delayedCallbacks:eo?n=eo:(n=eo=[],setTimeout(to,0));for(var i=function(a){n.push(function(){return e[a].apply(null,t)})},l=0;l<e.length;++l)i(l)}}function to(){var r=eo;eo=null;for(var o=0;o<r.length;++o)r[o]()}function Ft(r,o,e,t){for(var n=0;n<o.changes.length;n++){var i=o.changes[n];"text"==i?Bs(r,o):"gutter"==i?Ba(r,o,e,t):"class"==i?jo(r,o):"widget"==i&&Ol(r,o,t)}o.changes=null}function ro(r){return r.node==r.text&&(r.node=T("div",null,null,"position: relative"),r.text.parentNode&&r.text.parentNode.replaceChild(r.node,r.text),r.node.appendChild(r.text),ee&&j<8&&(r.node.style.zIndex=2)),r.node}function Ci(r,o){var e=r.display.externalMeasured;return e&&e.line==o.line?(r.display.externalMeasured=null,o.measure=e.measure,e.built):Oa(r,o)}function Bs(r,o){var e=o.text.className,t=Ci(r,o);o.text==o.node&&(o.node=t.pre),o.text.parentNode.replaceChild(t.pre,o.text),o.text=t.pre,t.bgClass!=o.bgClass||t.textClass!=o.textClass?(o.bgClass=t.bgClass,o.textClass=t.textClass,jo(r,o)):e&&(o.text.className=e)}function jo(r,o){(function Pa(r,o){var e=o.bgClass?o.bgClass+" "+(o.line.bgClass||""):o.line.bgClass;if(e&&(e+=" CodeMirror-linebackground"),o.background)e?o.background.className=e:(o.background.parentNode.removeChild(o.background),o.background=null);else if(e){var t=ro(o);o.background=t.insertBefore(T("div",null,e),t.firstChild),r.display.input.setUneditable(o.background)}})(r,o),o.line.wrapClass?ro(o).className=o.line.wrapClass:o.node!=o.text&&(o.node.className=""),o.text.className=(o.textClass?o.textClass+" "+(o.line.textClass||""):o.line.textClass)||""}function Ba(r,o,e,t){if(o.gutter&&(o.node.removeChild(o.gutter),o.gutter=null),o.gutterBackground&&(o.node.removeChild(o.gutterBackground),o.gutterBackground=null),o.line.gutterClass){var n=ro(o);o.gutterBackground=T("div",null,"CodeMirror-gutter-background "+o.line.gutterClass,"left: "+(r.options.fixedGutter?t.fixedPos:-t.gutterTotalWidth)+"px; width: "+t.gutterTotalWidth+"px"),r.display.input.setUneditable(o.gutterBackground),n.insertBefore(o.gutterBackground,o.text)}var i=o.line.gutterMarkers;if(r.options.lineNumbers||i){var l=ro(o),a=o.gutter=T("div",null,"CodeMirror-gutter-wrapper","left: "+(r.options.fixedGutter?t.fixedPos:-t.gutterTotalWidth)+"px");if(a.setAttribute("aria-hidden","true"),r.display.input.setUneditable(a),l.insertBefore(a,o.text),o.line.gutterClass&&(a.className+=" "+o.line.gutterClass),r.options.lineNumbers&&(!i||!i["CodeMirror-linenumbers"])&&(o.lineNumber=a.appendChild(T("div",b(r.options,e),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+t.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+r.display.lineNumInnerWidth+"px"))),i)for(var s=0;s<r.display.gutterSpecs.length;++s){var u=r.display.gutterSpecs[s].className,f=i.hasOwnProperty(u)&&i[u];f&&a.appendChild(T("div",[f],"CodeMirror-gutter-elt","left: "+t.gutterLeft[u]+"px; width: "+t.gutterWidth[u]+"px"))}}}function Ol(r,o,e){o.alignable&&(o.alignable=null);for(var t=g("CodeMirror-linewidget"),n=o.node.firstChild,i=void 0;n;n=i)i=n.nextSibling,t.test(n.className)&&o.node.removeChild(n);_a(r,o,e)}function Ra(r,o,e,t){var n=Ci(r,o);return o.text=o.node=n.pre,n.bgClass&&(o.bgClass=n.bgClass),n.textClass&&(o.textClass=n.textClass),jo(r,o),Ba(r,o,e,t),_a(r,o,t),o.node}function _a(r,o,e){if(za(r,o.line,o,e,!0),o.rest)for(var t=0;t<o.rest.length;t++)za(r,o.rest[t],o,e,!1)}function za(r,o,e,t,n){if(o.widgets)for(var i=ro(e),l=0,a=o.widgets;l<a.length;++l){var s=a[l],u=T("div",[s.node],"CodeMirror-linewidget"+(s.className?" "+s.className:""));s.handleMouseEvents||u.setAttribute("cm-ignore-events","true"),Ga(s,u,e,t),r.display.input.setUneditable(u),n&&s.above?i.insertBefore(u,e.gutter||e.text):i.appendChild(u),Pt(s,"redraw")}}function Ga(r,o,e,t){if(r.noHScroll){(e.alignable||(e.alignable=[])).push(o);var n=t.wrapperWidth;o.style.left=t.fixedPos+"px",r.coverGutter||(n-=t.gutterTotalWidth,o.style.paddingLeft=t.gutterTotalWidth+"px"),o.style.width=n+"px"}r.coverGutter&&(o.style.zIndex=5,o.style.position="relative",r.noHScroll||(o.style.marginLeft=-t.gutterTotalWidth+"px"))}function Si(r){if(null!=r.height)return r.height;var o=r.doc.cm;if(!o)return 0;if(!U(document.body,r.node)){var e="position: relative;";r.coverGutter&&(e+="margin-left: -"+o.display.gutters.offsetWidth+"px;"),r.noHScroll&&(e+="width: "+o.display.wrapper.clientWidth+"px;"),Je(o.display.measure,T("div",[r.node],null,e))}return r.height=r.node.parentNode.offsetHeight}function $r(r,o){for(var e=Jt(o);e!=r.wrapper;e=e.parentNode)if(!e||1==e.nodeType&&"true"==e.getAttribute("cm-ignore-events")||e.parentNode==r.sizer&&e!=r.mover)return!0}function wn(r){return r.lineSpace.offsetTop}function Pr(r){return r.mover.offsetHeight-r.lineSpace.offsetHeight}function no(r){if(r.cachedPaddingH)return r.cachedPaddingH;var o=Je(r.measure,T("pre","x","CodeMirror-line-like")),e=window.getComputedStyle?window.getComputedStyle(o):o.currentStyle,t={left:parseInt(e.paddingLeft),right:parseInt(e.paddingRight)};return!isNaN(t.left)&&!isNaN(t.right)&&(r.cachedPaddingH=t),t}function br(r){return 50-r.display.nativeBarWidth}function Cn(r){return r.display.scroller.clientWidth-br(r)-r.display.barWidth}function wr(r){return r.display.scroller.clientHeight-br(r)-r.display.barHeight}function Xo(r,o,e){if(r.line==o)return{map:r.measure.map,cache:r.measure.cache};if(r.rest){for(var t=0;t<r.rest.length;t++)if(r.rest[t]==o)return{map:r.measure.maps[t],cache:r.measure.caches[t]};for(var n=0;n<r.rest.length;n++)if(Re(r.rest[n])>e)return{map:r.measure.maps[n],cache:r.measure.caches[n],before:!0}}}function Wl(r,o,e,t){return Cr(r,Gn(r,o),e,t)}function Il(r,o){if(o>=r.display.viewFrom&&o<r.display.viewTo)return r.display.view[en(r,o)];var e=r.display.externalMeasured;return e&&o>=e.lineN&&o<e.lineN+e.size?e:void 0}function Gn(r,o){var e=Re(o),t=Il(r,e);t&&!t.text?t=null:t&&t.changes&&(Ft(r,t,e,Sn(r)),r.curOp.forceUpdate=!0),t||(t=function Rs(r,o){var e=Re(o=Ir(o)),t=r.display.externalMeasured=new Fl(r.doc,o,e);t.lineN=e;var n=t.built=Oa(r,t);return t.text=n.pre,Je(r.display.lineMeasure,n.pre),t}(r,o));var n=Xo(t,o,e);return{line:o,view:t,rect:null,map:n.map,cache:n.cache,before:n.before,hasHeights:!1}}function Cr(r,o,e,t,n){o.before&&(e=-1);var l,i=e+(t||"");return o.cache.hasOwnProperty(i)?l=o.cache[i]:(o.rect||(o.rect=o.view.text.getBoundingClientRect()),o.hasHeights||(function zn(r,o,e){var t=r.options.lineWrapping,n=t&&Cn(r);if(!o.measure.heights||t&&o.measure.width!=n){var i=o.measure.heights=[];if(t){o.measure.width=n;for(var l=o.text.firstChild.getClientRects(),a=0;a<l.length-1;a++){var s=l[a],u=l[a+1];Math.abs(s.bottom-u.bottom)>2&&i.push((s.bottom+u.top)/2-e.top)}}i.push(e.bottom-e.top)}}(r,o.view,o.rect),o.hasHeights=!0),(l=function Ka(r,o,e,t){var u,n=Br(o.map,e,t),i=n.node,l=n.start,a=n.end,s=n.collapse;if(3==i.nodeType){for(var f=0;f<4;f++){for(;l&&Te(o.line.text.charAt(n.coverStart+l));)--l;for(;n.coverStart+a<n.coverEnd&&Te(o.line.text.charAt(n.coverStart+a));)++a;if((u=ee&&j<9&&0==l&&a==n.coverEnd-n.coverStart?i.parentNode.getBoundingClientRect():Ua(x(i,l,a).getClientRects(),t)).left||u.right||0==l)break;a=l,l-=1,s="right"}ee&&j<11&&(u=function _s(r,o){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function Io(r){if(null!=Ur)return Ur;var o=Je(r,T("span","x")),e=o.getBoundingClientRect(),t=x(o,0,1).getBoundingClientRect();return Ur=Math.abs(e.left-t.left)>1}(r))return o;var e=screen.logicalXDPI/screen.deviceXDPI,t=screen.logicalYDPI/screen.deviceYDPI;return{left:o.left*e,right:o.right*e,top:o.top*t,bottom:o.bottom*t}}(r.display.measure,u))}else{var c;l>0&&(s=t="right"),u=r.options.lineWrapping&&(c=i.getClientRects()).length>1?c["right"==t?c.length-1:0]:i.getBoundingClientRect()}if(ee&&j<9&&!l&&(!u||!u.left&&!u.right)){var h=i.parentNode.getClientRects()[0];u=h?{left:h.left,right:h.left+kr(r.display),top:h.top,bottom:h.bottom}:Un}for(var d=u.top-o.rect.top,m=u.bottom-o.rect.top,y=(d+m)/2,w=o.view.measure.heights,k=0;k<w.length-1&&!(y<w[k]);k++);var F={left:("right"==s?u.right:u.left)-o.rect.left,right:("left"==s?u.left:u.right)-o.rect.left,top:k?w[k-1]:0,bottom:w[k]};return!u.left&&!u.right&&(F.bogus=!0),r.options.singleCursorHeightPerLine||(F.rtop=d,F.rbottom=m),F}(r,o,e,t)).bogus||(o.cache[i]=l)),{left:l.left,right:l.right,top:n?l.rtop:l.top,bottom:n?l.rbottom:l.bottom}}var jn,Un={left:0,right:0,top:0,bottom:0};function Br(r,o,e){for(var t,n,i,l,a,s,u=0;u<r.length;u+=3)if(s=r[u+1],o<(a=r[u])?(n=0,i=1,l="left"):o<s?i=1+(n=o-a):(u==r.length-3||o==s&&r[u+3]>o)&&(n=(i=s-a)-1,o>=s&&(l="right")),null!=n){if(t=r[u+2],a==s&&e==(t.insertLeft?"left":"right")&&(l=e),"left"==e&&0==n)for(;u&&r[u-2]==r[u-3]&&r[u-1].insertLeft;)t=r[2+(u-=3)],l="left";if("right"==e&&n==s-a)for(;u<r.length-3&&r[u+3]==r[u+4]&&!r[u+5].insertLeft;)t=r[(u+=3)+2],l="right";break}return{node:t,start:n,end:i,collapse:l,coverStart:a,coverEnd:s}}function Ua(r,o){var e=Un;if("left"==o)for(var t=0;t<r.length&&(e=r[t]).left==e.right;t++);else for(var n=r.length-1;n>=0&&(e=r[n]).left==e.right;n--);return e}function ja(r){if(r.measure&&(r.measure.cache={},r.measure.heights=null,r.rest))for(var o=0;o<r.rest.length;o++)r.measure.caches[o]={}}function Xa(r){r.display.externalMeasure=null,ae(r.display.lineMeasure);for(var o=0;o<r.display.view.length;o++)ja(r.display.view[o])}function ki(r){Xa(r),r.display.cachedCharWidth=r.display.cachedTextHeight=r.display.cachedPaddingH=null,r.options.lineWrapping||(r.display.maxLineChanged=!0),r.display.lineNumChars=null}function Hl(r){return ce&&ft?-(r.body.getBoundingClientRect().left-parseInt(getComputedStyle(r.body).marginLeft)):r.defaultView.pageXOffset||(r.documentElement||r.body).scrollLeft}function Li(r){return ce&&ft?-(r.body.getBoundingClientRect().top-parseInt(getComputedStyle(r.body).marginTop)):r.defaultView.pageYOffset||(r.documentElement||r.body).scrollTop}function Yo(r){var e=Ir(r).widgets,t=0;if(e)for(var n=0;n<e.length;++n)e[n].above&&(t+=Si(e[n]));return t}function io(r,o,e,t,n){if(!n){var i=Yo(o);e.top+=i,e.bottom+=i}if("line"==t)return e;t||(t="local");var l=rr(o);if("local"==t?l+=wn(r.display):l-=r.display.viewOffset,"page"==t||"window"==t){var a=r.display.lineSpace.getBoundingClientRect();l+=a.top+("window"==t?0:Li(yt(r)));var s=a.left+("window"==t?0:Hl(yt(r)));e.left+=s,e.right+=s}return e.top+=l,e.bottom+=l,e}function qo(r,o,e){if("div"==e)return o;var t=o.left,n=o.top;if("page"==e)t-=Hl(yt(r)),n-=Li(yt(r));else if("local"==e||!e){var i=r.display.sizer.getBoundingClientRect();t+=i.left,n+=i.top}var l=r.display.lineSpace.getBoundingClientRect();return{left:t-l.left,top:n-l.top}}function Kn(r,o,e,t,n){return t||(t=ie(r.doc,o.line)),io(r,t,Wl(r,t,o.ch,n),e)}function Sr(r,o,e,t,n,i){function l(m,y){var w=Cr(r,n,m,y?"right":"left",i);return y?w.left=w.right:w.right=w.left,io(r,t,w,e)}t=t||ie(r.doc,o.line),n||(n=Gn(r,t));var a=at(t,r.doc.direction),s=o.ch,u=o.sticky;if(s>=t.text.length?(s=t.text.length,u="before"):s<=0&&(s=0,u="after"),!a)return l("before"==u?s-1:s,"before"==u);function f(m,y,w){return l(w?m-1:m,1==a[y].level!=w)}var c=bt(a,s,u),h=dt,d=f(s,c,"before"==u);return null!=h&&(d.other=f(s,h,"before"!=u)),d}function oo(r,o){var e=0;o=pe(r.doc,o),r.options.lineWrapping||(e=kr(r.display)*o.ch);var t=ie(r.doc,o.line),n=rr(t)+wn(r.display);return{left:e,right:e,top:n,bottom:n+t.height}}function dr(r,o,e,t,n){var i=C(r,o,e);return i.xRel=n,t&&(i.outside=t),i}function Zo(r,o,e){var t=r.doc;if((e+=r.display.viewOffset)<0)return dr(t.first,0,null,-1,-1);var n=Ht(t,e),i=t.first+t.size-1;if(n>i)return dr(t.first+t.size-1,ie(t,i).text.length,null,1,1);o<0&&(o=0);for(var l=ie(t,n);;){var a=Ya(r,l,n,o,e),s=Aa(l,a.ch+(a.xRel>0||a.outside>0?1:0));if(!s)return a;var u=s.find(1);if(u.line==n)return u;l=ie(t,n=u.line)}}function Jo(r,o,e,t){t-=Yo(o);var n=o.text.length,i=Ue(function(l){return Cr(r,e,l-1).bottom<=t},n,0);return{begin:i,end:n=Ue(function(l){return Cr(r,e,l).top>t},i,n)}}function Qo(r,o,e,t){return e||(e=Gn(r,o)),Jo(r,o,e,io(r,o,Cr(r,e,t),"line").top)}function Vo(r,o,e,t){return!(r.bottom<=e)&&(r.top>e||(t?r.left:r.right)>o)}function Ya(r,o,e,t,n){n-=rr(o);var i=Gn(r,o),l=Yo(o),a=0,s=o.text.length,u=!0,f=at(o,r.doc.direction);if(f){var c=(r.options.lineWrapping?zs:Pl)(r,o,e,i,f,t,n);a=(u=1!=c.level)?c.from:c.to-1,s=u?c.to:c.from-1}var y,w,h=null,d=null,m=Ue(function(W){var I=Cr(r,i,W);return I.top+=l,I.bottom+=l,!!Vo(I,t,n,!1)&&(I.top<=n&&I.left<=t&&(h=W,d=I),!0)},a,s),k=!1;if(d){var M=t-d.left<d.right-t,D=M==u;m=h+(D?0:1),w=D?"after":"before",y=M?d.left:d.right}else{!u&&(m==s||m==a)&&m++,w=0==m?"after":m==o.text.length?"before":Cr(r,i,m-(u?1:0)).bottom+l<=n==u?"after":"before";var F=Sr(r,C(e,m,w),"line",o,i);y=F.left,k=n<F.top?-1:n>=F.bottom?1:0}return dr(e,m=_t(o.text,m,1),w,k,t-y)}function Pl(r,o,e,t,n,i,l){var a=Ue(function(c){var h=n[c],d=1!=h.level;return Vo(Sr(r,C(e,d?h.to:h.from,d?"before":"after"),"line",o,t),i,l,!0)},0,n.length-1),s=n[a];if(a>0){var u=1!=s.level,f=Sr(r,C(e,u?s.from:s.to,u?"after":"before"),"line",o,t);Vo(f,i,l,!0)&&f.top>l&&(s=n[a-1])}return s}function zs(r,o,e,t,n,i,l){var a=Jo(r,o,t,l),s=a.begin,u=a.end;/\s/.test(o.text.charAt(u-1))&&u--;for(var f=null,c=null,h=0;h<n.length;h++){var d=n[h];if(!(d.from>=u||d.to<=s)){var y=Cr(r,t,1!=d.level?Math.min(u,d.to)-1:Math.max(s,d.from)).right,w=y<i?i-y+1e9:y-i;(!f||c>w)&&(f=d,c=w)}}return f||(f=n[n.length-1]),f.from<s&&(f={from:s,to:f.to,level:f.level}),f.to>u&&(f={from:f.from,to:u,level:f.level}),f}function Ti(r){if(null!=r.cachedTextHeight)return r.cachedTextHeight;if(null==jn){jn=T("pre",null,"CodeMirror-line-like");for(var o=0;o<49;++o)jn.appendChild(document.createTextNode("x")),jn.appendChild(T("br"));jn.appendChild(document.createTextNode("x"))}Je(r.measure,jn);var e=jn.offsetHeight/50;return e>3&&(r.cachedTextHeight=e),ae(r.measure),e||1}function kr(r){if(null!=r.cachedCharWidth)return r.cachedCharWidth;var o=T("span","xxxxxxxxxx"),e=T("pre",[o],"CodeMirror-line-like");Je(r.measure,e);var t=o.getBoundingClientRect(),n=(t.right-t.left)/10;return n>2&&(r.cachedCharWidth=n),n||10}function Sn(r){for(var o=r.display,e={},t={},n=o.gutters.clientLeft,i=o.gutters.firstChild,l=0;i;i=i.nextSibling,++l){var a=r.display.gutterSpecs[l].className;e[a]=i.offsetLeft+i.clientLeft+n,t[a]=i.clientWidth}return{fixedPos:kn(o),gutterTotalWidth:o.gutters.offsetWidth,gutterLeft:e,gutterWidth:t,wrapperWidth:o.wrapper.clientWidth}}function kn(r){return r.scroller.getBoundingClientRect().left-r.sizer.getBoundingClientRect().left}function $o(r){var o=Ti(r.display),e=r.options.lineWrapping,t=e&&Math.max(5,r.display.scroller.clientWidth/kr(r.display)-3);return function(n){if(jr(r.doc,n))return 0;var i=0;if(n.widgets)for(var l=0;l<n.widgets.length;l++)n.widgets[l].height&&(i+=n.widgets[l].height);return e?i+(Math.ceil(n.text.length/t)||1)*o:i+o}}function lo(r){var o=r.doc,e=$o(r);o.iter(function(t){var n=e(t);n!=t.height&&Gt(t,n)})}function Ln(r,o,e,t){var n=r.display;if(!e&&"true"==Jt(o).getAttribute("cm-not-content"))return null;var i,l,a=n.lineSpace.getBoundingClientRect();try{i=o.clientX-a.left,l=o.clientY-a.top}catch{return null}var u,s=Zo(r,i,l);if(t&&s.xRel>0&&(u=ie(r.doc,s.line).text).length==s.ch){var f=V(u,u.length,r.options.tabSize)-u.length;s=C(s.line,Math.max(0,Math.round((i-no(r.display).left)/kr(r.display))-f))}return s}function en(r,o){if(o>=r.display.viewTo||(o-=r.display.viewFrom)<0)return null;for(var e=r.display.view,t=0;t<e.length;t++)if((o-=e[t].size)<0)return t}function Nt(r,o,e,t){null==o&&(o=r.doc.first),null==e&&(e=r.doc.first+r.doc.size),t||(t=0);var n=r.display;if(t&&e<n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>o)&&(n.updateLineNumbers=o),r.curOp.viewChanged=!0,o>=n.viewTo)Jr&&Nl(r.doc,o)<n.viewTo&&kt(r);else if(e<=n.viewFrom)Jr&&Ea(r.doc,e+t)>n.viewFrom?kt(r):(n.viewFrom+=t,n.viewTo+=t);else if(o<=n.viewFrom&&e>=n.viewTo)kt(r);else if(o<=n.viewFrom){var i=Rr(r,e,e+t,1);i?(n.view=n.view.slice(i.index),n.viewFrom=i.lineN,n.viewTo+=t):kt(r)}else if(e>=n.viewTo){var l=Rr(r,o,o,-1);l?(n.view=n.view.slice(0,l.index),n.viewTo=l.lineN):kt(r)}else{var a=Rr(r,o,o,-1),s=Rr(r,e,e+t,1);a&&s?(n.view=n.view.slice(0,a.index).concat(Uo(r,a.lineN,s.lineN)).concat(n.view.slice(s.index)),n.viewTo+=t):kt(r)}var u=n.externalMeasured;u&&(e<u.lineN?u.lineN+=t:o<u.lineN+u.size&&(n.externalMeasured=null))}function ur(r,o,e){r.curOp.viewChanged=!0;var t=r.display,n=r.display.externalMeasured;if(n&&o>=n.lineN&&o<n.lineN+n.size&&(t.externalMeasured=null),!(o<t.viewFrom||o>=t.viewTo)){var i=t.view[en(r,o)];if(null!=i.node){var l=i.changes||(i.changes=[]);-1==A(l,e)&&l.push(e)}}}function kt(r){r.display.viewFrom=r.display.viewTo=r.doc.first,r.display.view=[],r.display.viewOffset=0}function Rr(r,o,e,t){var i,n=en(r,o),l=r.display.view;if(!Jr||e==r.doc.first+r.doc.size)return{index:n,lineN:e};for(var a=r.display.viewFrom,s=0;s<n;s++)a+=l[s].size;if(a!=o){if(t>0){if(n==l.length-1)return null;i=a+l[n].size-o,n++}else i=a-o;o+=i,e+=i}for(;Nl(r.doc,e)!=e;){if(n==(t<0?0:l.length-1))return null;e+=t*l[n-(t<0?1:0)].size,n+=t}return{index:n,lineN:e}}function ao(r){for(var o=r.display.view,e=0,t=0;t<o.length;t++){var n=o[t];!n.hidden&&(!n.node||n.changes)&&++e}return e}function so(r){r.display.input.showSelection(r.display.input.prepareSelection())}function Bl(r,o){void 0===o&&(o=!0);var e=r.doc,t={},n=t.cursors=document.createDocumentFragment(),i=t.selection=document.createDocumentFragment(),l=r.options.$customCursor;l&&(o=!0);for(var a=0;a<e.sel.ranges.length;a++)if(o||a!=e.sel.primIndex){var s=e.sel.ranges[a];if(!(s.from().line>=r.display.viewTo||s.to().line<r.display.viewFrom)){var u=s.empty();if(l){var f=l(r,s);f&&Xn(r,f,n)}else(u||r.options.showCursorWhenSelecting)&&Xn(r,s.head,n);u||Rl(r,s,i)}}return t}function Xn(r,o,e){var t=Sr(r,o,"div",null,null,!r.options.singleCursorHeightPerLine),n=e.appendChild(T("div","\xa0","CodeMirror-cursor"));if(n.style.left=t.left+"px",n.style.top=t.top+"px",n.style.height=Math.max(0,t.bottom-t.top)*r.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(r.getWrapperElement().className)){var i=Kn(r,o,"div",null,null),l=i.right-i.left;n.style.width=(l>0?l:r.defaultCharWidth())+"px"}if(t.other){var a=e.appendChild(T("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));a.style.display="",a.style.left=t.other.left+"px",a.style.top=t.other.top+"px",a.style.height=.85*(t.other.bottom-t.other.top)+"px"}}function uo(r,o){return r.top-o.top||r.left-o.left}function Rl(r,o,e){var t=r.display,n=r.doc,i=document.createDocumentFragment(),l=no(r.display),a=l.left,s=Math.max(t.sizerWidth,Cn(r)-t.sizer.offsetLeft)-l.right,u="ltr"==n.direction;function f(D,F,W,I){F<0&&(F=0),F=Math.round(F),I=Math.round(I),i.appendChild(T("div",null,"CodeMirror-selected","position: absolute; left: "+D+"px;\n                             top: "+F+"px; width: "+(W??s-D)+"px;\n                             height: "+(I-F)+"px"))}function c(D,F,W){var q,fe,I=ie(n,D),_=I.text.length;function ve(_e,tt){return Kn(r,C(D,_e),"div",I,tt)}function Ye(_e,tt,Ee){var ze=Qo(r,I,null,_e),Fe="ltr"==tt==("after"==Ee)?"left":"right";return ve("after"==Ee?ze.begin:ze.end-(/\s/.test(I.text.charAt(ze.end-1))?2:1),Fe)[Fe]}var Ne=at(I,n.direction);return function zt(r,o,e,t){if(!r)return t(o,e,"ltr",0);for(var n=!1,i=0;i<r.length;++i){var l=r[i];(l.from<e&&l.to>o||o==e&&l.to==o)&&(t(Math.max(l.from,o),Math.min(l.to,e),1==l.level?"rtl":"ltr",i),n=!0)}n||t(o,e,"ltr")}(Ne,F||0,W??_,function(_e,tt,Ee,ze){var Fe="ltr"==Ee,ke=ve(_e,Fe?"left":"right"),He=ve(tt-1,Fe?"right":"left"),ot=null==F&&0==_e,Tt=null==W&&tt==_,Mt=0==ze,Vt=!Ne||ze==Ne.length-1;if(He.top-ke.top<=3){var ut=(u?ot:Tt)&&Mt?a:(Fe?ke:He).left;f(ut,ke.top,((u?Tt:ot)&&Vt?s:(Fe?He:ke).right)-ut,ke.bottom)}else{var lr,Dt,Ar,jt;Fe?(lr=u&&ot&&Mt?a:ke.left,Dt=u?s:Ye(_e,Ee,"before"),Ar=u?a:Ye(tt,Ee,"after"),jt=u&&Tt&&Vt?s:He.right):(lr=u?Ye(_e,Ee,"before"):a,Dt=!u&&ot&&Mt?s:ke.right,Ar=!u&&Tt&&Vt?a:He.left,jt=u?Ye(tt,Ee,"after"):s),f(lr,ke.top,Dt-lr,ke.bottom),ke.bottom<He.top&&f(a,ke.bottom,null,He.top),f(Ar,He.top,jt-Ar,He.bottom)}(!q||uo(ke,q)<0)&&(q=ke),uo(He,q)<0&&(q=He),(!fe||uo(ke,fe)<0)&&(fe=ke),uo(He,fe)<0&&(fe=He)}),{start:q,end:fe}}var h=o.from(),d=o.to();if(h.line==d.line)c(h.line,h.ch,d.ch);else{var m=ie(n,h.line),y=ie(n,d.line),w=Ir(m)==Ir(y),k=c(h.line,h.ch,w?m.text.length+1:null).end,M=c(d.line,w?0:null,d.ch).start;w&&(k.top<M.top-2?(f(k.right,k.top,null,k.bottom),f(a,M.top,M.left,M.bottom)):f(k.right,k.top,M.left-k.right,k.bottom)),k.bottom<M.top&&f(a,k.bottom,null,M.top)}e.appendChild(i)}function Mi(r){if(r.state.focused){var o=r.display;clearInterval(o.blinker);var e=!0;o.cursorDiv.style.visibility="",r.options.cursorBlinkRate>0?o.blinker=setInterval(function(){r.hasFocus()||Mn(r),o.cursorDiv.style.visibility=(e=!e)?"":"hidden"},r.options.cursorBlinkRate):r.options.cursorBlinkRate<0&&(o.cursorDiv.style.visibility="hidden")}}function qa(r){r.hasFocus()||(r.display.input.focus(),r.state.focused||el(r))}function fo(r){r.state.delayingBlurEvent=!0,setTimeout(function(){r.state.delayingBlurEvent&&(r.state.delayingBlurEvent=!1,r.state.focused&&Mn(r))},100)}function el(r,o){r.state.delayingBlurEvent&&!r.state.draggingText&&(r.state.delayingBlurEvent=!1),"nocursor"!=r.options.readOnly&&(r.state.focused||(Ve(r,"focus",r,o),r.state.focused=!0,re(r.display.wrapper,"CodeMirror-focused"),!r.curOp&&r.display.selForContextMenu!=r.doc.sel&&(r.display.input.reset(),P&&setTimeout(function(){return r.display.input.reset(!0)},20)),r.display.input.receivedFocus()),Mi(r))}function Mn(r,o){r.state.delayingBlurEvent||(r.state.focused&&(Ve(r,"blur",r,o),r.state.focused=!1,Wt(r.display.wrapper,"CodeMirror-focused")),clearInterval(r.display.blinker),setTimeout(function(){r.state.focused||(r.display.shift=!1)},150))}function Di(r){for(var o=r.display,e=o.lineDiv.offsetTop,t=Math.max(0,o.scroller.getBoundingClientRect().top),n=o.lineDiv.getBoundingClientRect().top,i=0,l=0;l<o.view.length;l++){var a=o.view[l],s=r.options.lineWrapping,u=void 0,f=0;if(!a.hidden){if(n+=a.line.height,ee&&j<8){var c=a.node.offsetTop+a.node.offsetHeight;u=c-e,e=c}else{var h=a.node.getBoundingClientRect();u=h.bottom-h.top,!s&&a.text.firstChild&&(f=a.text.firstChild.getBoundingClientRect().right-h.left-1)}var d=a.line.height-u;if((d>.005||d<-.005)&&(n<t&&(i-=d),Gt(a.line,u),Yn(a.line),a.rest))for(var m=0;m<a.rest.length;m++)Yn(a.rest[m]);if(f>r.display.sizerWidth){var y=Math.ceil(f/kr(r.display));y>r.display.maxLineLength&&(r.display.maxLineLength=y,r.display.maxLine=a.line,r.display.maxLineChanged=!0)}}}Math.abs(i)>2&&(o.scroller.scrollTop+=i)}function Yn(r){if(r.widgets)for(var o=0;o<r.widgets.length;++o){var e=r.widgets[o],t=e.node.parentNode;t&&(e.height=t.offsetHeight)}}function qn(r,o,e){var t=e&&null!=e.top?Math.max(0,e.top):r.scroller.scrollTop;t=Math.floor(t-wn(r));var n=e&&null!=e.bottom?e.bottom:t+r.wrapper.clientHeight,i=Ht(o,t),l=Ht(o,n);if(e&&e.ensure){var a=e.ensure.from.line,s=e.ensure.to.line;a<i?(i=a,l=Ht(o,rr(ie(o,a))+r.wrapper.clientHeight)):Math.min(s,o.lastLine())>=l&&(i=Ht(o,rr(ie(o,s))-r.wrapper.clientHeight),l=s)}return{from:i,to:Math.max(l,i+1)}}function _l(r,o){var e=r.display,t=Ti(r.display);o.top<0&&(o.top=0);var n=r.curOp&&null!=r.curOp.scrollTop?r.curOp.scrollTop:e.scroller.scrollTop,i=wr(r),l={};o.bottom-o.top>i&&(o.bottom=o.top+i);var a=r.doc.height+Pr(e),u=o.bottom>a-t;if(o.top<n)l.scrollTop=o.top<t?0:o.top;else if(o.bottom>n+i){var f=Math.min(o.top,(u?a:o.bottom)-i);f!=n&&(l.scrollTop=f)}var c=r.options.fixedGutter?0:e.gutters.offsetWidth,h=r.curOp&&null!=r.curOp.scrollLeft?r.curOp.scrollLeft:e.scroller.scrollLeft-c,d=Cn(r)-e.gutters.offsetWidth,m=o.right-o.left>d;return m&&(o.right=o.left+d),o.left<10?l.scrollLeft=0:o.left<h?l.scrollLeft=Math.max(0,o.left+c-(m?0:10)):o.right>d+h-3&&(l.scrollLeft=o.right+(m?0:10)-d),l}function zl(r,o){null!=o&&(An(r),r.curOp.scrollTop=(null==r.curOp.scrollTop?r.doc.scrollTop:r.curOp.scrollTop)+o)}function Dn(r){An(r);var o=r.getCursor();r.curOp.scrollToPos={from:o,to:o,margin:r.options.cursorScrollMargin}}function Zn(r,o,e){(null!=o||null!=e)&&An(r),null!=o&&(r.curOp.scrollLeft=o),null!=e&&(r.curOp.scrollTop=e)}function An(r){var o=r.curOp.scrollToPos;o&&(r.curOp.scrollToPos=null,Ja(r,oo(r,o.from),oo(r,o.to),o.margin))}function Ja(r,o,e,t){var n=_l(r,{left:Math.min(o.left,e.left),top:Math.min(o.top,e.top)-t,right:Math.max(o.right,e.right),bottom:Math.max(o.bottom,e.bottom)+t});Zn(r,n.scrollLeft,n.scrollTop)}function Nn(r,o){Math.abs(r.doc.scrollTop-o)<2||(J||co(r,{top:o}),Gl(r,o,!0),J&&co(r),Ot(r,100))}function Gl(r,o,e){o=Math.max(0,Math.min(r.display.scroller.scrollHeight-r.display.scroller.clientHeight,o)),(r.display.scroller.scrollTop!=o||e)&&(r.doc.scrollTop=o,r.display.scrollbars.setScrollTop(o),r.display.scroller.scrollTop!=o&&(r.display.scroller.scrollTop=o))}function _r(r,o,e,t){o=Math.max(0,Math.min(o,r.display.scroller.scrollWidth-r.display.scroller.clientWidth)),(!(e?o==r.doc.scrollLeft:Math.abs(r.doc.scrollLeft-o)<2)||t)&&(r.doc.scrollLeft=o,nl(r),r.display.scroller.scrollLeft!=o&&(r.display.scroller.scrollLeft=o),r.display.scrollbars.setScrollLeft(o))}function Ni(r){var o=r.display,e=o.gutters.offsetWidth,t=Math.round(r.doc.height+Pr(r.display));return{clientHeight:o.scroller.clientHeight,viewHeight:o.wrapper.clientHeight,scrollWidth:o.scroller.scrollWidth,clientWidth:o.scroller.clientWidth,viewWidth:o.wrapper.clientWidth,barLeft:r.options.fixedGutter?e:0,docHeight:t,scrollHeight:t+br(r)+o.barHeight,nativeBarWidth:o.nativeBarWidth,gutterWidth:e}}var pr=function(r,o,e){this.cm=e;var t=this.vert=T("div",[T("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),n=this.horiz=T("div",[T("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");t.tabIndex=n.tabIndex=-1,r(t),r(n),K(t,"scroll",function(){t.clientHeight&&o(t.scrollTop,"vertical")}),K(n,"scroll",function(){n.clientWidth&&o(n.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,ee&&j<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};pr.prototype.update=function(r){var o=r.scrollWidth>r.clientWidth+1,e=r.scrollHeight>r.clientHeight+1,t=r.nativeBarWidth;return e?(this.vert.style.display="block",this.vert.style.bottom=o?t+"px":"0",this.vert.firstChild.style.height=Math.max(0,r.scrollHeight-r.clientHeight+(r.viewHeight-(o?t:0)))+"px"):(this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0"),o?(this.horiz.style.display="block",this.horiz.style.right=e?t+"px":"0",this.horiz.style.left=r.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,r.scrollWidth-r.clientWidth+(r.viewWidth-r.barLeft-(e?t:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&r.clientHeight>0&&(0==t&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:e?t:0,bottom:o?t:0}},pr.prototype.setScrollLeft=function(r){this.horiz.scrollLeft!=r&&(this.horiz.scrollLeft=r),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},pr.prototype.setScrollTop=function(r){this.vert.scrollTop!=r&&(this.vert.scrollTop=r),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},pr.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=Ze&&!Se?"12px":"18px",this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new N,this.disableVert=new N},pr.prototype.enableZeroWidthBar=function(r,o,e){r.style.visibility="",o.set(1e3,function t(){var n=r.getBoundingClientRect();("vert"==e?document.elementFromPoint(n.right-1,(n.top+n.bottom)/2):document.elementFromPoint((n.right+n.left)/2,n.bottom-1))!=r?r.style.visibility="hidden":o.set(1e3,t)})},pr.prototype.clear=function(){var r=this.horiz.parentNode;r.removeChild(this.horiz),r.removeChild(this.vert)};var tn=function(){};function Lr(r,o){o||(o=Ni(r));var e=r.display.barWidth,t=r.display.barHeight;Ei(r,o);for(var n=0;n<4&&e!=r.display.barWidth||t!=r.display.barHeight;n++)e!=r.display.barWidth&&r.options.lineWrapping&&Di(r),Ei(r,Ni(r)),e=r.display.barWidth,t=r.display.barHeight}function Ei(r,o){var e=r.display,t=e.scrollbars.update(o);e.sizer.style.paddingRight=(e.barWidth=t.right)+"px",e.sizer.style.paddingBottom=(e.barHeight=t.bottom)+"px",e.heightForcer.style.borderBottom=t.bottom+"px solid transparent",t.right&&t.bottom?(e.scrollbarFiller.style.display="block",e.scrollbarFiller.style.height=t.bottom+"px",e.scrollbarFiller.style.width=t.right+"px"):e.scrollbarFiller.style.display="",t.bottom&&r.options.coverGutterNextToScrollbar&&r.options.fixedGutter?(e.gutterFiller.style.display="block",e.gutterFiller.style.height=t.bottom+"px",e.gutterFiller.style.width=o.gutterWidth+"px"):e.gutterFiller.style.display=""}tn.prototype.update=function(){return{bottom:0,right:0}},tn.prototype.setScrollLeft=function(){},tn.prototype.setScrollTop=function(){},tn.prototype.clear=function(){};var Jn={native:pr,null:tn};function Ul(r){r.display.scrollbars&&(r.display.scrollbars.clear(),r.display.scrollbars.addClass&&Wt(r.display.wrapper,r.display.scrollbars.addClass)),r.display.scrollbars=new Jn[r.options.scrollbarStyle](function(o){r.display.wrapper.insertBefore(o,r.display.scrollbarFiller),K(o,"mousedown",function(){r.state.focused&&setTimeout(function(){return r.display.input.focus()},0)}),o.setAttribute("cm-not-content","true")},function(o,e){"horizontal"==e?_r(r,o):Nn(r,o)},r),r.display.scrollbars.addClass&&re(r.display.wrapper,r.display.scrollbars.addClass)}var Qa=0;function En(r){r.curOp={cm:r,viewChanged:!1,startHeight:r.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Qa,markArrays:null},function Ko(r){_n?_n.ops.push(r):r.ownsGroup=_n={ops:[r],delayedCallbacks:[]}}(r.curOp)}function Qn(r){var o=r.curOp;o&&function Ps(r,o){var e=r.ownsGroup;if(e)try{!function wi(r){var o=r.delayedCallbacks,e=0;do{for(;e<o.length;e++)o[e].call(null);for(var t=0;t<r.ops.length;t++){var n=r.ops[t];if(n.cursorActivityHandlers)for(;n.cursorActivityCalled<n.cursorActivityHandlers.length;)n.cursorActivityHandlers[n.cursorActivityCalled++].call(null,n.cm)}}while(e<o.length)}(e)}finally{_n=null,o(e)}}(o,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function Vn(r){for(var o=r.ops,e=0;e<o.length;e++)$n(o[e]);for(var t=0;t<o.length;t++)Us(o[t]);for(var n=0;n<o.length;n++)Ks(o[n]);for(var i=0;i<o.length;i++)js(o[i]);for(var l=0;l<o.length;l++)Xs(o[l])}(e)})}function $n(r){var o=r.cm,e=o.display;(function Ys(r){var o=r.display;!o.scrollbarsClipped&&o.scroller.offsetWidth&&(o.nativeBarWidth=o.scroller.offsetWidth-o.scroller.clientWidth,o.heightForcer.style.height=br(r)+"px",o.sizer.style.marginBottom=-o.nativeBarWidth+"px",o.sizer.style.borderRightWidth=br(r)+"px",o.scrollbarsClipped=!0)})(o),r.updateMaxLine&&Hr(o),r.mustUpdate=r.viewChanged||r.forceUpdate||null!=r.scrollTop||r.scrollToPos&&(r.scrollToPos.from.line<e.viewFrom||r.scrollToPos.to.line>=e.viewTo)||e.maxLineChanged&&o.options.lineWrapping,r.update=r.mustUpdate&&new Fn(o,r.mustUpdate&&{top:r.scrollTop,ensure:r.scrollToPos},r.forceUpdate)}function Us(r){r.updatedDisplay=r.mustUpdate&&Kl(r.cm,r.update)}function Ks(r){var o=r.cm,e=o.display;r.updatedDisplay&&Di(o),r.barMeasure=Ni(o),e.maxLineChanged&&!o.options.lineWrapping&&(r.adjustWidthTo=Wl(o,e.maxLine,e.maxLine.text.length).left+3,o.display.sizerWidth=r.adjustWidthTo,r.barMeasure.scrollWidth=Math.max(e.scroller.clientWidth,e.sizer.offsetLeft+r.adjustWidthTo+br(o)+o.display.barWidth),r.maxScrollLeft=Math.max(0,e.sizer.offsetLeft+r.adjustWidthTo-Cn(o))),(r.updatedDisplay||r.selectionChanged)&&(r.preparedSelection=e.input.prepareSelection())}function js(r){var o=r.cm;null!=r.adjustWidthTo&&(o.display.sizer.style.minWidth=r.adjustWidthTo+"px",r.maxScrollLeft<o.doc.scrollLeft&&_r(o,Math.min(o.display.scroller.scrollLeft,r.maxScrollLeft),!0),o.display.maxLineChanged=!1);var e=r.focus&&r.focus==H(S(o));r.preparedSelection&&o.display.input.showSelection(r.preparedSelection,e),(r.updatedDisplay||r.startHeight!=o.doc.height)&&Lr(o,r.barMeasure),r.updatedDisplay&&jl(o,r.barMeasure),r.selectionChanged&&Mi(o),o.state.focused&&r.updateInput&&o.display.input.reset(r.typing),e&&qa(r.cm)}function Xs(r){var o=r.cm,e=o.display,t=o.doc;r.updatedDisplay&&Va(o,r.update),null!=e.wheelStartX&&(null!=r.scrollTop||null!=r.scrollLeft||r.scrollToPos)&&(e.wheelStartX=e.wheelStartY=null),null!=r.scrollTop&&Gl(o,r.scrollTop,r.forceScroll),null!=r.scrollLeft&&_r(o,r.scrollLeft,!0,!0),r.scrollToPos&&function Za(r,o){if(!We(r,"scrollCursorIntoView")){var e=r.display,t=e.sizer.getBoundingClientRect(),n=null,i=e.wrapper.ownerDocument;if(o.top+t.top<0?n=!0:o.bottom+t.top>(i.defaultView.innerHeight||i.documentElement.clientHeight)&&(n=!1),null!=n&&!qe){var l=T("div","\u200b",null,"position: absolute;\n                         top: "+(o.top-e.viewOffset-wn(r.display))+"px;\n                         height: "+(o.bottom-o.top+br(r)+e.barHeight)+"px;\n                         left: "+o.left+"px; width: "+Math.max(2,o.right-o.left)+"px;");r.display.lineSpace.appendChild(l),l.scrollIntoView(n),r.display.lineSpace.removeChild(l)}}}(o,function tl(r,o,e,t){var n;null==t&&(t=0),!r.options.lineWrapping&&o==e&&(e="before"==o.sticky?C(o.line,o.ch+1,"before"):o,o=o.ch?C(o.line,"before"==o.sticky?o.ch-1:o.ch,"after"):o);for(var i=0;i<5;i++){var l=!1,a=Sr(r,o),s=e&&e!=o?Sr(r,e):a,u=_l(r,n={left:Math.min(a.left,s.left),top:Math.min(a.top,s.top)-t,right:Math.max(a.left,s.left),bottom:Math.max(a.bottom,s.bottom)+t}),f=r.doc.scrollTop,c=r.doc.scrollLeft;if(null!=u.scrollTop&&(Nn(r,u.scrollTop),Math.abs(r.doc.scrollTop-f)>1&&(l=!0)),null!=u.scrollLeft&&(_r(r,u.scrollLeft),Math.abs(r.doc.scrollLeft-c)>1&&(l=!0)),!l)break}return n}(o,pe(t,r.scrollToPos.from),pe(t,r.scrollToPos.to),r.scrollToPos.margin));var i=r.maybeHiddenMarkers,l=r.maybeUnhiddenMarkers;if(i)for(var a=0;a<i.length;++a)i[a].lines.length||Ve(i[a],"hide");if(l)for(var s=0;s<l.length;++s)l[s].lines.length&&Ve(l[s],"unhide");e.wrapper.offsetHeight&&(t.scrollTop=o.display.scroller.scrollTop),r.changeObjs&&Ve(o,"changes",o,r.changeObjs),r.update&&r.update.finish()}function fr(r,o){if(r.curOp)return o();En(r);try{return o()}finally{Qn(r)}}function Bt(r,o){return function(){if(r.curOp)return o.apply(r,arguments);En(r);try{return o.apply(r,arguments)}finally{Qn(r)}}}function et(r){return function(){if(this.curOp)return r.apply(this,arguments);En(this);try{return r.apply(this,arguments)}finally{Qn(this)}}}function Oe(r){return function(){var o=this.cm;if(!o||o.curOp)return r.apply(this,arguments);En(o);try{return r.apply(this,arguments)}finally{Qn(o)}}}function Ot(r,o){r.doc.highlightFrontier<r.display.viewTo&&r.state.highlight.set(o,ye(Rt,r))}function Rt(r){var o=r.doc;if(!(o.highlightFrontier>=r.display.viewTo)){var e=+new Date+r.options.workTime,t=gi(r,o.highlightFrontier),n=[];o.iter(t.line,Math.min(o.first+o.size,r.display.viewTo+500),function(i){if(t.line>=r.display.viewFrom){var l=i.styles,a=i.text.length>r.options.maxHighlightLength?sr(o.mode,t.state):null,s=ji(r,i,t,!0);a&&(t.state=a),i.styles=s.styles;var u=i.styleClasses,f=s.classes;f?i.styleClasses=f:u&&(i.styleClasses=null);for(var c=!l||l.length!=i.styles.length||u!=f&&(!u||!f||u.bgClass!=f.bgClass||u.textClass!=f.textClass),h=0;!c&&h<l.length;++h)c=l[h]!=i.styles[h];c&&n.push(t.line),i.stateAfter=t.save(),t.nextLine()}else i.text.length<=r.options.maxHighlightLength&&Po(r,i.text,t),i.stateAfter=t.line%5==0?t.save():null,t.nextLine();if(+new Date>e)return Ot(r,r.options.workDelay),!0}),o.highlightFrontier=t.line,o.modeFrontier=Math.max(o.modeFrontier,t.line),n.length&&fr(r,function(){for(var i=0;i<n.length;i++)ur(r,n[i],"text")})}}var Fn=function(r,o,e){var t=r.display;this.viewport=o,this.visible=qn(t,r.doc,o),this.editorIsHidden=!t.wrapper.offsetWidth,this.wrapperHeight=t.wrapper.clientHeight,this.wrapperWidth=t.wrapper.clientWidth,this.oldDisplayWidth=Cn(r),this.force=e,this.dims=Sn(r),this.events=[]};function Kl(r,o){var e=r.display,t=r.doc;if(o.editorIsHidden)return kt(r),!1;if(!o.force&&o.visible.from>=e.viewFrom&&o.visible.to<=e.viewTo&&(null==e.updateLineNumbers||e.updateLineNumbers>=e.viewTo)&&e.renderedView==e.view&&0==ao(r))return!1;il(r)&&(kt(r),o.dims=Sn(r));var n=t.first+t.size,i=Math.max(o.visible.from-r.options.viewportMargin,t.first),l=Math.min(n,o.visible.to+r.options.viewportMargin);e.viewFrom<i&&i-e.viewFrom<20&&(i=Math.max(t.first,e.viewFrom)),e.viewTo>l&&e.viewTo-l<20&&(l=Math.min(n,e.viewTo)),Jr&&(i=Nl(r.doc,i),l=Ea(r.doc,l));var a=i!=e.viewFrom||l!=e.viewTo||e.lastWrapHeight!=o.wrapperHeight||e.lastWrapWidth!=o.wrapperWidth;(function Tn(r,o,e){var t=r.display;0==t.view.length||o>=t.viewTo||e<=t.viewFrom?(t.view=Uo(r,o,e),t.viewFrom=o):(t.viewFrom>o?t.view=Uo(r,o,t.viewFrom).concat(t.view):t.viewFrom<o&&(t.view=t.view.slice(en(r,o))),t.viewFrom=o,t.viewTo<e?t.view=t.view.concat(Uo(r,t.viewTo,e)):t.viewTo>e&&(t.view=t.view.slice(0,en(r,e)))),t.viewTo=e})(r,i,l),e.viewOffset=rr(ie(r.doc,e.viewFrom)),r.display.mover.style.top=e.viewOffset+"px";var s=ao(r);if(!a&&0==s&&!o.force&&e.renderedView==e.view&&(null==e.updateLineNumbers||e.updateLineNumbers>=e.viewTo))return!1;var u=function rl(r){if(r.hasFocus())return null;var o=H(S(r));if(!o||!U(r.display.lineDiv,o))return null;var e={activeElt:o};if(window.getSelection){var t=$(r).getSelection();t.anchorNode&&t.extend&&U(r.display.lineDiv,t.anchorNode)&&(e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset)}return e}(r);return s>4&&(e.lineDiv.style.display="none"),function $a(r,o,e){var t=r.display,n=r.options.lineNumbers,i=t.lineDiv,l=i.firstChild;function a(m){var y=m.nextSibling;return P&&Ze&&r.display.currentWheelTarget==m?m.style.display="none":m.parentNode.removeChild(m),y}for(var s=t.view,u=t.viewFrom,f=0;f<s.length;f++){var c=s[f];if(!c.hidden)if(c.node&&c.node.parentNode==i){for(;l!=c.node;)l=a(l);var d=n&&null!=o&&o<=u&&c.lineNumber;c.changes&&(A(c.changes,"gutter")>-1&&(d=!1),Ft(r,c,u,e)),d&&(ae(c.lineNumber),c.lineNumber.appendChild(document.createTextNode(b(r.options,u)))),l=c.node.nextSibling}else{var h=Ra(r,c,u,e);i.insertBefore(h,l)}u+=c.size}for(;l;)l=a(l)}(r,e.updateLineNumbers,o.dims),s>4&&(e.lineDiv.style.display=""),e.renderedView=e.view,function qs(r){if(r&&r.activeElt&&r.activeElt!=H(v(r.activeElt))&&(r.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(r.activeElt.nodeName)&&r.anchorNode&&U(document.body,r.anchorNode)&&U(document.body,r.focusNode))){var o=r.activeElt.ownerDocument,e=o.defaultView.getSelection(),t=o.createRange();t.setEnd(r.anchorNode,r.anchorOffset),t.collapse(!1),e.removeAllRanges(),e.addRange(t),e.extend(r.focusNode,r.focusOffset)}}(u),ae(e.cursorDiv),ae(e.selectionDiv),e.gutters.style.height=e.sizer.style.minHeight=0,a&&(e.lastWrapHeight=o.wrapperHeight,e.lastWrapWidth=o.wrapperWidth,Ot(r,400)),e.updateLineNumbers=null,!0}function Va(r,o){for(var e=o.viewport,t=!0;;t=!1){if(t&&r.options.lineWrapping&&o.oldDisplayWidth!=Cn(r))t&&(o.visible=qn(r.display,r.doc,e));else if(e&&null!=e.top&&(e={top:Math.min(r.doc.height+Pr(r.display)-wr(r),e.top)}),o.visible=qn(r.display,r.doc,e),o.visible.from>=r.display.viewFrom&&o.visible.to<=r.display.viewTo)break;if(!Kl(r,o))break;Di(r);var n=Ni(r);so(r),Lr(r,n),jl(r,n),o.force=!1}o.signal(r,"update",r),(r.display.viewFrom!=r.display.reportedViewFrom||r.display.viewTo!=r.display.reportedViewTo)&&(o.signal(r,"viewportChange",r,r.display.viewFrom,r.display.viewTo),r.display.reportedViewFrom=r.display.viewFrom,r.display.reportedViewTo=r.display.viewTo)}function co(r,o){var e=new Fn(r,o);if(Kl(r,e)){Di(r),Va(r,e);var t=Ni(r);so(r),Lr(r,t),jl(r,t),e.finish()}}function ho(r){r.sizer.style.marginLeft=r.gutters.offsetWidth+"px",Pt(r,"gutterChanged",r)}function jl(r,o){r.display.sizer.style.minHeight=o.docHeight+"px",r.display.heightForcer.style.top=o.docHeight+"px",r.display.gutters.style.height=o.docHeight+r.display.barHeight+br(r)+"px"}function nl(r){var o=r.display,e=o.view;if(o.alignWidgets||o.gutters.firstChild&&r.options.fixedGutter){for(var t=kn(o)-o.scroller.scrollLeft+r.doc.scrollLeft,n=o.gutters.offsetWidth,i=t+"px",l=0;l<e.length;l++)if(!e[l].hidden){r.options.fixedGutter&&(e[l].gutter&&(e[l].gutter.style.left=i),e[l].gutterBackground&&(e[l].gutterBackground.style.left=i));var a=e[l].alignable;if(a)for(var s=0;s<a.length;s++)a[s].style.left=i}r.options.fixedGutter&&(o.gutters.style.left=t+n+"px")}}function il(r){if(!r.options.lineNumbers)return!1;var o=r.doc,e=b(r.options,o.first+o.size-1),t=r.display;if(e.length!=t.lineNumChars){var n=t.measure.appendChild(T("div",[T("div",e)],"CodeMirror-linenumber CodeMirror-gutter-elt")),i=n.firstChild.offsetWidth,l=n.offsetWidth-i;return t.lineGutter.style.width="",t.lineNumInnerWidth=Math.max(i,t.lineGutter.offsetWidth-l)+1,t.lineNumWidth=t.lineNumInnerWidth+l,t.lineNumChars=t.lineNumInnerWidth?e.length:-1,t.lineGutter.style.width=t.lineNumWidth+"px",ho(r.display),!0}return!1}function ol(r,o){for(var e=[],t=!1,n=0;n<r.length;n++){var i=r[n],l=null;if("string"!=typeof i&&(l=i.style,i=i.className),"CodeMirror-linenumbers"==i){if(!o)continue;t=!0}e.push({className:i,style:l})}return o&&!t&&e.push({className:"CodeMirror-linenumbers",style:null}),e}function Xl(r){var o=r.gutters,e=r.gutterSpecs;ae(o),r.lineGutter=null;for(var t=0;t<e.length;++t){var n=e[t],i=n.className,l=n.style,a=o.appendChild(T("div",null,"CodeMirror-gutter "+i));l&&(a.style.cssText=l),"CodeMirror-linenumbers"==i&&(r.lineGutter=a,a.style.width=(r.lineNumWidth||1)+"px")}o.style.display=e.length?"":"none",ho(r)}function ei(r){Xl(r.display),Nt(r),nl(r)}function es(r,o,e,t){var n=this;this.input=e,n.scrollbarFiller=T("div",null,"CodeMirror-scrollbar-filler"),n.scrollbarFiller.setAttribute("cm-not-content","true"),n.gutterFiller=T("div",null,"CodeMirror-gutter-filler"),n.gutterFiller.setAttribute("cm-not-content","true"),n.lineDiv=te("div",null,"CodeMirror-code"),n.selectionDiv=T("div",null,null,"position: relative; z-index: 1"),n.cursorDiv=T("div",null,"CodeMirror-cursors"),n.measure=T("div",null,"CodeMirror-measure"),n.lineMeasure=T("div",null,"CodeMirror-measure"),n.lineSpace=te("div",[n.measure,n.lineMeasure,n.selectionDiv,n.cursorDiv,n.lineDiv],null,"position: relative; outline: none");var i=te("div",[n.lineSpace],"CodeMirror-lines");n.mover=T("div",[i],null,"position: relative"),n.sizer=T("div",[n.mover],"CodeMirror-sizer"),n.sizerWidth=null,n.heightForcer=T("div",null,null,"position: absolute; height: 50px; width: 1px;"),n.gutters=T("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=T("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=T("div",[n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),ce&&Ge>=105&&(n.wrapper.style.clipPath="inset(0px)"),n.wrapper.setAttribute("translate","no"),ee&&j<8&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),!P&&!(J&&he)&&(n.scroller.draggable=!0),r&&(r.appendChild?r.appendChild(n.wrapper):r(n.wrapper)),n.viewFrom=n.viewTo=o.first,n.reportedViewFrom=n.reportedViewTo=o.first,n.view=[],n.renderedView=null,n.externalMeasured=null,n.viewOffset=0,n.lastWrapHeight=n.lastWrapWidth=0,n.updateLineNumbers=null,n.nativeBarWidth=n.barHeight=n.barWidth=0,n.scrollbarsClipped=!1,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.alignWidgets=!1,n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n.shift=!1,n.selForContextMenu=null,n.activeTouch=null,n.gutterSpecs=ol(t.gutters,t.lineNumbers),Xl(n),e.init(n)}Fn.prototype.signal=function(r,o){Be(r,o)&&this.events.push(arguments)},Fn.prototype.finish=function(){for(var r=0;r<this.events.length;r++)Ve.apply(null,this.events[r])};var On=0,rn=null;function po(r){var o=r.wheelDeltaX,e=r.wheelDeltaY;return null==o&&r.detail&&r.axis==r.HORIZONTAL_AXIS&&(o=r.detail),null==e&&r.detail&&r.axis==r.VERTICAL_AXIS?e=r.detail:null==e&&(e=r.wheelDelta),{x:o,y:e}}function nn(r){var o=po(r);return o.x*=rn,o.y*=rn,o}function Yl(r,o){ce&&102==Ge&&(null==r.display.chromeScrollHack?r.display.sizer.style.pointerEvents="none":clearTimeout(r.display.chromeScrollHack),r.display.chromeScrollHack=setTimeout(function(){r.display.chromeScrollHack=null,r.display.sizer.style.pointerEvents=""},100));var e=po(o),t=e.x,n=e.y,i=rn;0===o.deltaMode&&(t=o.deltaX,n=o.deltaY,i=1);var l=r.display,a=l.scroller,u=a.scrollHeight>a.clientHeight;if(t&&a.scrollWidth>a.clientWidth||n&&u){if(n&&Ze&&P)e:for(var f=o.target,c=l.view;f!=a;f=f.parentNode)for(var h=0;h<c.length;h++)if(c[h].node==f){r.display.currentWheelTarget=f;break e}if(t&&!J&&!be&&null!=i)return n&&u&&Nn(r,Math.max(0,a.scrollTop+n*i)),_r(r,Math.max(0,a.scrollLeft+t*i)),(!n||n&&u)&&it(o),void(l.wheelStartX=null);if(n&&null!=i){var d=n*i,m=r.doc.scrollTop,y=m+l.wrapper.clientHeight;d<0?m=Math.max(0,m+d-50):y=Math.min(r.doc.height,y+d+50),co(r,{top:m,bottom:y})}On<20&&0!==o.deltaMode&&(null==l.wheelStartX?(l.wheelStartX=a.scrollLeft,l.wheelStartY=a.scrollTop,l.wheelDX=t,l.wheelDY=n,setTimeout(function(){if(null!=l.wheelStartX){var w=a.scrollLeft-l.wheelStartX,k=a.scrollTop-l.wheelStartY,M=k&&l.wheelDY&&k/l.wheelDY||w&&l.wheelDX&&w/l.wheelDX;l.wheelStartX=l.wheelStartY=null,M&&(rn=(rn*On+M)/(On+1),++On)}},200)):(l.wheelDX+=t,l.wheelDY+=n))}}ee?rn=-.53:J?rn=15:ce?rn=-.7:de&&(rn=-1/3);var vr=function(r,o){this.ranges=r,this.primIndex=o};vr.prototype.primary=function(){return this.ranges[this.primIndex]},vr.prototype.equals=function(r){if(r==this)return!0;if(r.primIndex!=this.primIndex||r.ranges.length!=this.ranges.length)return!1;for(var o=0;o<this.ranges.length;o++){var e=this.ranges[o],t=r.ranges[o];if(!E(e.anchor,t.anchor)||!E(e.head,t.head))return!1}return!0},vr.prototype.deepCopy=function(){for(var r=[],o=0;o<this.ranges.length;o++)r[o]=new Ke(Z(this.ranges[o].anchor),Z(this.ranges[o].head));return new vr(r,this.primIndex)},vr.prototype.somethingSelected=function(){for(var r=0;r<this.ranges.length;r++)if(!this.ranges[r].empty())return!0;return!1},vr.prototype.contains=function(r,o){o||(o=r);for(var e=0;e<this.ranges.length;e++){var t=this.ranges[e];if(O(o,t.from())>=0&&O(r,t.to())<=0)return e}return-1};var Ke=function(r,o){this.anchor=r,this.head=o};function wt(r,o,e){var t=r&&r.options.selectionsMayTouch,n=o[e];o.sort(function(h,d){return O(h.from(),d.from())}),e=A(o,n);for(var i=1;i<o.length;i++){var l=o[i],a=o[i-1],s=O(a.to(),l.from());if(t&&!l.empty()?s>0:s>=0){var u=St(a.from(),l.from()),f=Ie(a.to(),l.to()),c=a.empty()?l.from()==l.head:a.from()==a.head;i<=e&&--e,o.splice(--i,2,new Ke(c?f:u,c?u:f))}}return new vr(o,e)}function De(r,o){return new vr([new Ke(r,o||r)],0)}function Ut(r){return r.text?C(r.from.line+r.text.length-1,xe(r.text).length+(1==r.text.length?r.from.ch:0)):r.to}function on(r,o){if(O(r,o.from)<0)return r;if(O(r,o.to)<=0)return Ut(o);var e=r.line+o.text.length-(o.to.line-o.from.line)-1,t=r.ch;return r.line==o.to.line&&(t+=Ut(o).ch-o.to.ch),C(e,t)}function Xr(r,o){for(var e=[],t=0;t<r.sel.ranges.length;t++){var n=r.sel.ranges[t];e.push(new Ke(on(n.anchor,o),on(n.head,o)))}return wt(r.cm,e,r.sel.primIndex)}function ql(r,o,e){return r.line==o.line?C(e.line,r.ch-o.ch+e.ch):C(e.line+(r.line-o.line),r.ch)}function ll(r){r.doc.mode=Zr(r.options,r.doc.modeOption),vo(r)}function vo(r){r.doc.iter(function(o){o.stateAfter&&(o.stateAfter=null),o.styles&&(o.styles=null)}),r.doc.modeFrontier=r.doc.highlightFrontier=r.doc.first,Ot(r,100),r.state.modeGen++,r.curOp&&Nt(r)}function al(r,o){return 0==o.from.ch&&0==o.to.ch&&""==xe(o.text)&&(!r.cm||r.cm.options.wholeLineUpdateBefore)}function ti(r,o,e,t){function n(M){return e?e[M]:null}function i(M,D,F){(function El(r,o,e,t){r.text=o,r.stateAfter&&(r.stateAfter=null),r.styles&&(r.styles=null),null!=r.order&&(r.order=null),Al(r),Da(r,e);var n=t?t(r):1;n!=r.height&&Gt(r,n)})(M,D,F,t),Pt(M,"change",M,o)}function l(M,D){for(var F=[],W=M;W<D;++W)F.push(new Vr(u[W],n(W),t));return F}var a=o.from,s=o.to,u=o.text,f=ie(r,a.line),c=ie(r,s.line),h=xe(u),d=n(u.length-1),m=s.line-a.line;if(o.full)r.insert(0,l(0,u.length)),r.remove(u.length,r.size-u.length);else if(al(r,o)){var y=l(0,u.length-1);i(c,c.text,d),m&&r.remove(a.line,m),y.length&&r.insert(a.line,y)}else if(f==c)if(1==u.length)i(f,f.text.slice(0,a.ch)+h+f.text.slice(s.ch),d);else{var w=l(1,u.length-1);w.push(new Vr(h+f.text.slice(s.ch),d,t)),i(f,f.text.slice(0,a.ch)+u[0],n(0)),r.insert(a.line+1,w)}else if(1==u.length)i(f,f.text.slice(0,a.ch)+u[0]+c.text.slice(s.ch),n(0)),r.remove(a.line+1,m);else{i(f,f.text.slice(0,a.ch)+u[0],n(0)),i(c,h+c.text.slice(s.ch),d);var k=l(1,u.length-1);m>1&&r.remove(a.line+1,m-1),r.insert(a.line+1,k)}Pt(r,"change",r,o)}function ln(r,o,e){!function t(n,i,l){if(n.linked)for(var a=0;a<n.linked.length;++a){var s=n.linked[a];if(s.doc!=i){var u=l&&s.sharedHist;e&&!u||(o(s.doc,u),t(s.doc,n,u))}}}(r,null,!0)}function sl(r,o){if(o.cm)throw new Error("This document is already in use.");r.doc=o,o.cm=r,lo(r),ll(r),an(r),r.options.direction=o.direction,r.options.lineWrapping||Hr(r),r.options.mode=o.modeOption,Nt(r)}function an(r){("rtl"==r.doc.direction?re:Wt)(r.display.lineDiv,"CodeMirror-rtl")}function go(r){this.done=[],this.undone=[],this.undoDepth=r?r.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=r?r.maxGeneration:1}function Jl(r,o){var e={from:Z(o.from),to:Ut(o),text:$e(r,o.from,o.to)};return ns(r,e,o.from.line,o.to.line+1),ln(r,function(t){return ns(t,e,o.from.line,o.to.line+1)},!0),e}function mo(r){for(;r.length&&xe(r).ranges;)r.pop()}function Vl(r,o,e,t){var n=r.history;n.undone.length=0;var l,a,i=+new Date;if((n.lastOp==t||n.lastOrigin==o.origin&&o.origin&&("+"==o.origin.charAt(0)&&n.lastModTime>i-(r.cm?r.cm.options.historyEventDelay:500)||"*"==o.origin.charAt(0)))&&(l=function Ql(r,o){return o?(mo(r.done),xe(r.done)):r.done.length&&!xe(r.done).ranges?xe(r.done):r.done.length>1&&!r.done[r.done.length-2].ranges?(r.done.pop(),xe(r.done)):void 0}(n,n.lastOp==t)))a=xe(l.changes),0==O(o.from,o.to)&&0==O(o.from,a.to)?a.to=Ut(o):l.changes.push(Jl(r,o));else{var s=xe(n.done);for((!s||!s.ranges)&&ul(r.sel,n.done),l={changes:[Jl(r,o)],generation:n.generation},n.done.push(l);n.done.length>n.undoDepth;)n.done.shift(),n.done[0].ranges||n.done.shift()}n.done.push(e),n.generation=++n.maxGeneration,n.lastModTime=n.lastSelTime=i,n.lastOp=n.lastSelOp=t,n.lastOrigin=n.lastSelOrigin=o.origin,a||Ve(r,"historyAdded")}function rs(r,o,e,t){var n=r.history,i=t&&t.origin;e==n.lastSelOp||i&&n.lastSelOrigin==i&&(n.lastModTime==n.lastSelTime&&n.lastOrigin==i||function Zs(r,o,e,t){var n=o.charAt(0);return"*"==n||"+"==n&&e.ranges.length==t.ranges.length&&e.somethingSelected()==t.somethingSelected()&&new Date-r.history.lastSelTime<=(r.cm?r.cm.options.historyEventDelay:500)}(r,i,xe(n.done),o))?n.done[n.done.length-1]=o:ul(o,n.done),n.lastSelTime=+new Date,n.lastSelOrigin=i,n.lastSelOp=e,t&&!1!==t.clearRedo&&mo(n.undone)}function ul(r,o){var e=xe(o);e&&e.ranges&&e.equals(r)||o.push(r)}function ns(r,o,e,t){var n=o["spans_"+r.id],i=0;r.iter(Math.max(r.first,e),Math.min(r.first+r.size,t),function(l){l.markedSpans&&((n||(n=o["spans_"+r.id]={}))[i]=l.markedSpans),++i})}function fl(r){if(!r)return null;for(var o,e=0;e<r.length;++e)r[e].marker.explicitlyCleared?o||(o=r.slice(0,e)):o&&o.push(r[e]);return o?o.length?o:null:r}function os(r,o){var e=function is(r,o){var e=o["spans_"+r.id];if(!e)return null;for(var t=[],n=0;n<o.text.length;++n)t.push(fl(e[n]));return t}(r,o),t=Ml(r,o);if(!e)return t;if(!t)return e;for(var n=0;n<e.length;++n){var i=e[n],l=t[n];if(i&&l)e:for(var a=0;a<l.length;++a){for(var s=l[a],u=0;u<i.length;++u)if(i[u].marker==s.marker)continue e;i.push(s)}else l&&(e[n]=l)}return e}function Fi(r,o,e){for(var t=[],n=0;n<r.length;++n){var i=r[n];if(i.ranges)t.push(e?vr.prototype.deepCopy.call(i):i);else{var l=i.changes,a=[];t.push({changes:a});for(var s=0;s<l.length;++s){var u=l[s],f=void 0;if(a.push({from:u.from,to:u.to,text:u.text}),o)for(var c in u)(f=c.match(/^spans_(\d+)$/))&&A(o,Number(f[1]))>-1&&(xe(a)[c]=u[c],delete u[c])}}}return t}function cl(r,o,e,t){if(t){var n=r.anchor;if(e){var i=O(o,n)<0;i!=O(e,n)<0?(n=o,o=e):i!=O(o,e)<0&&(o=e)}return new Ke(n,o)}return new Ke(e||o,o)}function sn(r,o,e,t,n){null==n&&(n=r.cm&&(r.cm.display.shift||r.extend)),Qt(r,new vr([cl(r.sel.primary(),o,e,n)],0),t)}function hl(r,o,e){for(var t=[],n=r.cm&&(r.cm.display.shift||r.extend),i=0;i<r.sel.ranges.length;i++)t[i]=cl(r.sel.ranges[i],o[i],null,n);Qt(r,wt(r.cm,t,r.sel.primIndex),e)}function Oi(r,o,e,t){var n=r.sel.ranges.slice(0);n[o]=e,Qt(r,wt(r.cm,n,r.sel.primIndex),t)}function $l(r,o,e,t){Qt(r,De(o,e),t)}function ta(r,o,e){var t=r.history.done,n=xe(t);n&&n.ranges?(t[t.length-1]=o,yo(r,o,e)):Qt(r,o,e)}function Qt(r,o,e){yo(r,o,e),rs(r,r.sel,r.cm?r.cm.curOp.id:NaN,e)}function yo(r,o,e){(Be(r,"beforeSelectionChange")||r.cm&&Be(r.cm,"beforeSelectionChange"))&&(o=function ea(r,o,e){var t={ranges:o.ranges,update:function(n){this.ranges=[];for(var i=0;i<n.length;i++)this.ranges[i]=new Ke(pe(r,n[i].anchor),pe(r,n[i].head))},origin:e&&e.origin};return Ve(r,"beforeSelectionChange",r,t),r.cm&&Ve(r.cm,"beforeSelectionChange",r.cm,t),t.ranges!=o.ranges?wt(r.cm,t.ranges,t.ranges.length-1):o}(r,o,e));var t=e&&e.bias||(O(o.primary().head,r.sel.primary().head)<0?-1:1);Kt(r,ra(r,o,t,!0)),(!e||!1!==e.scroll)&&r.cm&&"nocursor"!=r.cm.getOption("readOnly")&&Dn(r.cm)}function Kt(r,o){o.equals(r.sel)||(r.sel=o,r.cm&&(r.cm.curOp.updateInput=1,r.cm.curOp.selectionChanged=!0,xt(r.cm)),Pt(r,"cursorActivity",r))}function xo(r){Kt(r,ra(r,r.sel,null,!1))}function ra(r,o,e,t){for(var n,i=0;i<o.ranges.length;i++){var l=o.ranges[i],a=o.ranges.length==r.sel.ranges.length&&r.sel.ranges[i],s=bo(r,l.anchor,a&&a.anchor,e,t),u=l.head==l.anchor?s:bo(r,l.head,a&&a.head,e,t);(n||s!=l.anchor||u!=l.head)&&(n||(n=o.ranges.slice(0,i)),n[i]=new Ke(s,u))}return n?wt(r.cm,n,o.primIndex):o}function ri(r,o,e,t,n){var i=ie(r,o.line);if(i.markedSpans)for(var l=0;l<i.markedSpans.length;++l){var a=i.markedSpans[l],s=a.marker,u="selectLeft"in s?!s.selectLeft:s.inclusiveLeft,f="selectRight"in s?!s.selectRight:s.inclusiveRight;if((null==a.from||(u?a.from<=o.ch:a.from<o.ch))&&(null==a.to||(f?a.to>=o.ch:a.to>o.ch))){if(n&&(Ve(s,"beforeCursorEnter"),s.explicitlyCleared)){if(i.markedSpans){--l;continue}break}if(!s.atomic)continue;if(e){var c=s.find(t<0?1:-1),h=void 0;if((t<0?f:u)&&(c=ni(r,c,-t,c&&c.line==o.line?i:null)),c&&c.line==o.line&&(h=O(c,e))&&(t<0?h<0:h>0))return ri(r,c,o,t,n)}var d=s.find(t<0?-1:1);return(t<0?u:f)&&(d=ni(r,d,t,d.line==o.line?i:null)),d?ri(r,d,o,t,n):null}}return o}function bo(r,o,e,t,n){var i=t||1;return ri(r,o,e,i,n)||!n&&ri(r,o,e,i,!0)||ri(r,o,e,-i,n)||!n&&ri(r,o,e,-i,!0)||(r.cantEdit=!0,C(r.first,0))}function ni(r,o,e,t){return e<0&&0==o.ch?o.line>r.first?pe(r,C(o.line-1)):null:e>0&&o.ch==(t||ie(r,o.line)).text.length?o.line<r.first+r.size-1?C(o.line+1,0):null:new C(o.line,o.ch+e)}function wo(r){r.setSelection(C(r.firstLine(),0),C(r.lastLine()),se)}function na(r,o,e){var t={canceled:!1,from:o.from,to:o.to,text:o.text,origin:o.origin,cancel:function(){return t.canceled=!0}};return e&&(t.update=function(n,i,l,a){n&&(t.from=pe(r,n)),i&&(t.to=pe(r,i)),l&&(t.text=l),void 0!==a&&(t.origin=a)}),Ve(r,"beforeChange",r,t),r.cm&&Ve(r.cm,"beforeChange",r.cm,t),t.canceled?(r.cm&&(r.cm.curOp.updateInput=2),null):{from:t.from,to:t.to,text:t.text,origin:t.origin}}function ii(r,o,e){if(r.cm){if(!r.cm.curOp)return Bt(r.cm,ii)(r,o,e);if(r.cm.state.suppressEdits)return}if(!(Be(r,"beforeChange")||r.cm&&Be(r.cm,"beforeChange"))||(o=na(r,o,!0))){var t=La&&!e&&function Dl(r,o,e){var t=null;if(r.iter(o.line,e.line+1,function(d){if(d.markedSpans)for(var m=0;m<d.markedSpans.length;++m){var y=d.markedSpans[m].marker;y.readOnly&&(!t||-1==A(t,y))&&(t||(t=[])).push(y)}}),!t)return null;for(var n=[{from:o,to:e}],i=0;i<t.length;++i)for(var l=t[i],a=l.find(0),s=0;s<n.length;++s){var u=n[s];if(!(O(u.to,a.from)<0||O(u.from,a.to)>0)){var f=[s,1],c=O(u.from,a.from),h=O(u.to,a.to);(c<0||!l.inclusiveLeft&&!c)&&f.push({from:u.from,to:a.from}),(h>0||!l.inclusiveRight&&!h)&&f.push({from:a.to,to:u.to}),n.splice.apply(n,f),s+=f.length-3}}return n}(r,o.from,o.to);if(t)for(var n=t.length-1;n>=0;--n)ia(r,{from:t[n].from,to:t[n].to,text:n?[""]:o.text,origin:o.origin});else ia(r,o)}}function ia(r,o){if(1!=o.text.length||""!=o.text[0]||0!=O(o.from,o.to)){var e=Xr(r,o);Vl(r,o,e,r.cm?r.cm.curOp.id:NaN),Wn(r,o,e,Ml(r,o));var t=[];ln(r,function(n,i){!i&&-1==A(t,n.history)&&(la(n.history,o),t.push(n.history)),Wn(n,o,null,Ml(n,o))})}}function un(r,o,e){var t=r.cm&&r.cm.state.suppressEdits;if(!t||e){for(var i,n=r.history,l=r.sel,a="undo"==o?n.done:n.undone,s="undo"==o?n.undone:n.done,u=0;u<a.length&&(i=a[u],!(e?i.ranges&&!i.equals(r.sel):!i.ranges));u++);if(u!=a.length){for(n.lastOrigin=n.lastSelOrigin=null;;){if(!(i=a.pop()).ranges){if(t)return void a.push(i);break}if(ul(i,s),e&&!i.equals(r.sel))return void Qt(r,i,{clearRedo:!1});l=i}var f=[];ul(l,s),s.push({changes:f,generation:n.generation}),n.generation=i.generation||++n.maxGeneration;for(var c=Be(r,"beforeChange")||r.cm&&Be(r.cm,"beforeChange"),h=function(y){var w=i.changes[y];if(w.origin=o,c&&!na(r,w,!1))return a.length=0,{};f.push(Jl(r,w));var k=y?Xr(r,w):xe(a);Wn(r,w,k,os(r,w)),!y&&r.cm&&r.cm.scrollIntoView({from:w.from,to:Ut(w)});var M=[];ln(r,function(D,F){!F&&-1==A(M,D.history)&&(la(D.history,w),M.push(D.history)),Wn(D,w,null,os(D,w))})},d=i.changes.length-1;d>=0;--d){var m=h(d);if(m)return m.v}}}}function oa(r,o){if(0!=o&&(r.first+=o,r.sel=new vr(nr(r.sel.ranges,function(n){return new Ke(C(n.anchor.line+o,n.anchor.ch),C(n.head.line+o,n.head.ch))}),r.sel.primIndex),r.cm)){Nt(r.cm,r.first,r.first-o,o);for(var e=r.cm.display,t=e.viewFrom;t<e.viewTo;t++)ur(r.cm,t,"gutter")}}function Wn(r,o,e,t){if(r.cm&&!r.cm.curOp)return Bt(r.cm,Wn)(r,o,e,t);if(o.to.line<r.first)oa(r,o.text.length-1-(o.to.line-o.from.line));else if(!(o.from.line>r.lastLine())){if(o.from.line<r.first){var n=o.text.length-1-(r.first-o.from.line);oa(r,n),o={from:C(r.first,0),to:C(o.to.line+n,o.to.ch),text:[xe(o.text)],origin:o.origin}}var i=r.lastLine();o.to.line>i&&(o={from:o.from,to:C(i,ie(r,i).text.length),text:[o.text[0]],origin:o.origin}),o.removed=$e(r,o.from,o.to),e||(e=Xr(r,o)),r.cm?function ls(r,o,e){var t=r.doc,n=r.display,i=o.from,l=o.to,a=!1,s=i.line;r.options.lineWrapping||(s=Re(Ir(ie(t,i.line))),t.iter(s,l.line+1,function(d){if(d==n.maxLine)return a=!0,!0})),t.sel.contains(o.from,o.to)>-1&&xt(r),ti(t,o,e,$o(r)),r.options.lineWrapping||(t.iter(s,i.line+o.text.length,function(d){var m=xi(d);m>n.maxLineLength&&(n.maxLine=d,n.maxLineLength=m,n.maxLineChanged=!0,a=!1)}),a&&(r.curOp.updateMaxLine=!0)),function ka(r,o){if(r.modeFrontier=Math.min(r.modeFrontier,o),!(r.highlightFrontier<o-10)){for(var e=r.first,t=o-1;t>e;t--){var n=ie(r,t).stateAfter;if(n&&(!(n instanceof Ho)||t+n.lookAhead<o)){e=t+1;break}}r.highlightFrontier=Math.min(r.highlightFrontier,e)}}(t,i.line),Ot(r,400);var u=o.text.length-(l.line-i.line)-1;o.full?Nt(r):i.line!=l.line||1!=o.text.length||al(r.doc,o)?Nt(r,i.line,l.line+1,u):ur(r,i.line,"text");var f=Be(r,"changes"),c=Be(r,"change");if(c||f){var h={from:i,to:l,text:o.text,removed:o.removed,origin:o.origin};c&&Pt(r,"change",r,h),f&&(r.curOp.changeObjs||(r.curOp.changeObjs=[])).push(h)}r.display.selForContextMenu=null}(r.cm,o,t):ti(r,o,t),yo(r,e,se),r.cantEdit&&bo(r,C(r.firstLine(),0))&&(r.cantEdit=!1)}}function Yr(r,o,e,t,n){var i;t||(t=e),O(t,e)<0&&(e=(i=[t,e])[0],t=i[1]),"string"==typeof o&&(o=r.splitLines(o)),ii(r,{from:e,to:t,text:o,origin:n})}function as(r,o,e,t){e<r.line?r.line+=t:o<r.line&&(r.line=o,r.ch=0)}function oi(r,o,e,t){for(var n=0;n<r.length;++n){var i=r[n],l=!0;if(i.ranges){i.copied||((i=r[n]=i.deepCopy()).copied=!0);for(var a=0;a<i.ranges.length;a++)as(i.ranges[a].anchor,o,e,t),as(i.ranges[a].head,o,e,t)}else{for(var s=0;s<i.changes.length;++s){var u=i.changes[s];if(e<u.from.line)u.from=C(u.from.line+t,u.from.ch),u.to=C(u.to.line+t,u.to.ch);else if(o<=u.to.line){l=!1;break}}l||(r.splice(0,n+1),n=0)}}}function la(r,o){var e=o.from.line,t=o.to.line,n=o.text.length-(t-e)-1;oi(r.done,e,t,n),oi(r.undone,e,t,n)}function Wi(r,o,e,t){var n=o,i=o;return"number"==typeof o?i=ie(r,tr(r,o)):n=Re(o),null==n?null:(t(i,n)&&r.cm&&ur(r.cm,n,e),i)}function Ii(r){this.lines=r,this.parent=null;for(var o=0,e=0;e<r.length;++e)r[e].parent=this,o+=r[e].height;this.height=o}function fn(r){this.children=r;for(var o=0,e=0,t=0;t<r.length;++t){var n=r[t];o+=n.chunkSize(),e+=n.height,n.parent=this}this.size=o,this.height=e,this.parent=null}Ke.prototype.from=function(){return St(this.anchor,this.head)},Ke.prototype.to=function(){return Ie(this.anchor,this.head)},Ke.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Ii.prototype={chunkSize:function(){return this.lines.length},removeInner:function(r,o){for(var e=r,t=r+o;e<t;++e){var n=this.lines[e];this.height-=n.height,bi(n),Pt(n,"delete")}this.lines.splice(r,o)},collapse:function(r){r.push.apply(r,this.lines)},insertInner:function(r,o,e){this.height+=e,this.lines=this.lines.slice(0,r).concat(o).concat(this.lines.slice(r));for(var t=0;t<o.length;++t)o[t].parent=this},iterN:function(r,o,e){for(var t=r+o;r<t;++r)if(e(this.lines[r]))return!0}},fn.prototype={chunkSize:function(){return this.size},removeInner:function(r,o){this.size-=o;for(var e=0;e<this.children.length;++e){var t=this.children[e],n=t.chunkSize();if(r<n){var i=Math.min(o,n-r),l=t.height;if(t.removeInner(r,i),this.height-=l-t.height,n==i&&(this.children.splice(e--,1),t.parent=null),0==(o-=i))break;r=0}else r-=n}if(this.size-o<25&&(this.children.length>1||!(this.children[0]instanceof Ii))){var a=[];this.collapse(a),this.children=[new Ii(a)],this.children[0].parent=this}},collapse:function(r){for(var o=0;o<this.children.length;++o)this.children[o].collapse(r)},insertInner:function(r,o,e){this.size+=o.length,this.height+=e;for(var t=0;t<this.children.length;++t){var n=this.children[t],i=n.chunkSize();if(r<=i){if(n.insertInner(r,o,e),n.lines&&n.lines.length>50){for(var l=n.lines.length%25+25,a=l;a<n.lines.length;){var s=new Ii(n.lines.slice(a,a+=25));n.height-=s.height,this.children.splice(++t,0,s),s.parent=this}n.lines=n.lines.slice(0,l),this.maybeSpill()}break}r-=i}},maybeSpill:function(){if(!(this.children.length<=10)){var r=this;do{var e=new fn(r.children.splice(r.children.length-5,5));if(r.parent){r.size-=e.size,r.height-=e.height;var n=A(r.parent.children,r);r.parent.children.splice(n+1,0,e)}else{var t=new fn(r.children);t.parent=r,r.children=[t,e],r=t}e.parent=r.parent}while(r.children.length>10);r.parent.maybeSpill()}},iterN:function(r,o,e){for(var t=0;t<this.children.length;++t){var n=this.children[t],i=n.chunkSize();if(r<i){var l=Math.min(o,i-r);if(n.iterN(r,l,e))return!0;if(0==(o-=l))break;r=0}else r-=i}}};var cn=function(r,o,e){if(e)for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);this.doc=r,this.node=o};function Hi(r,o,e){rr(o)<(r.curOp&&r.curOp.scrollTop||r.doc.scrollTop)&&zl(r,e)}cn.prototype.clear=function(){var r=this.doc.cm,o=this.line.widgets,e=this.line,t=Re(e);if(null!=t&&o){for(var n=0;n<o.length;++n)o[n]==this&&o.splice(n--,1);o.length||(e.widgets=null);var i=Si(this);Gt(e,Math.max(0,e.height-i)),r&&(fr(r,function(){Hi(r,e,-i),ur(r,t,"widget")}),Pt(r,"lineWidgetCleared",r,this,t))}},cn.prototype.changed=function(){var r=this,o=this.height,e=this.doc.cm,t=this.line;this.height=null;var n=Si(this)-o;n&&(jr(this.doc,t)||Gt(t,t.height+n),e&&fr(e,function(){e.curOp.forceUpdate=!0,Hi(e,t,n),Pt(e,"lineWidgetChanged",e,r,Re(t))}))},Zt(cn);var aa=0,In=function(r,o){this.lines=[],this.type=o,this.doc=r,this.id=++aa};function li(r,o,e,t,n){if(t&&t.shared)return function Pi(r,o,e,t,n){(t=z(t)).shared=!1;var i=[li(r,o,e,t,n)],l=i[0],a=t.widgetNode;return ln(r,function(s){a&&(t.widgetNode=a.cloneNode(!0)),i.push(li(s,pe(s,o),pe(s,e),t,n));for(var u=0;u<s.linked.length;++u)if(s.linked[u].isParent)return;l=xe(i)}),new Tr(i,l)}(r,o,e,t,n);if(r.cm&&!r.cm.curOp)return Bt(r.cm,li)(r,o,e,t,n);var i=new In(r,n),l=O(o,e);if(t&&z(t,i,!1),l>0||0==l&&!1!==i.clearWhenEmpty)return i;if(i.replacedWith&&(i.collapsed=!0,i.widgetNode=te("span",[i.replacedWith],"CodeMirror-widget"),t.handleMouseEvents||i.widgetNode.setAttribute("cm-ignore-events","true"),t.insertLeft&&(i.widgetNode.insertLeft=!0)),i.collapsed){if($i(r,o.line,o,e,i)||o.line!=e.line&&$i(r,e.line,o,e,i))throw new Error("Inserting collapsed marker partially overlapping an existing one");!function Qr(){Jr=!0}()}i.addToHistory&&Vl(r,{from:o,to:e,origin:"markText"},r.sel,NaN);var u,a=o.line,s=r.cm;if(r.iter(a,e.line+1,function(c){s&&i.collapsed&&!s.options.lineWrapping&&Ir(c)==s.display.maxLine&&(u=!0),i.collapsed&&a!=o.line&&Gt(c,0),function qi(r,o,e){var t=e&&window.WeakSet&&(e.markedSpans||(e.markedSpans=new WeakSet));t&&r.markedSpans&&t.has(r.markedSpans)?r.markedSpans.push(o):(r.markedSpans=r.markedSpans?r.markedSpans.concat([o]):[o],t&&t.add(r.markedSpans)),o.marker.attachLine(r)}(c,new Ro(i,a==o.line?o.ch:null,a==e.line?e.ch:null),r.cm&&r.cm.curOp),++a}),i.collapsed&&r.iter(o.line,e.line+1,function(c){jr(r,c)&&Gt(c,0)}),i.clearOnEnter&&K(i,"beforeCursorEnter",function(){return i.clear()}),i.readOnly&&(function Ta(){La=!0}(),(r.history.done.length||r.history.undone.length)&&r.clearHistory()),i.collapsed&&(i.id=++aa,i.atomic=!0),s){if(u&&(s.curOp.updateMaxLine=!0),i.collapsed)Nt(s,o.line,e.line+1);else if(i.className||i.startStyle||i.endStyle||i.css||i.attributes||i.title)for(var f=o.line;f<=e.line;f++)ur(s,f,"text");i.atomic&&xo(s.doc),Pt(s,"markerAdded",s,i)}return i}In.prototype.clear=function(){if(!this.explicitlyCleared){var r=this.doc.cm,o=r&&!r.curOp;if(o&&En(r),Be(this,"clear")){var e=this.find();e&&Pt(this,"clear",e.from,e.to)}for(var t=null,n=null,i=0;i<this.lines.length;++i){var l=this.lines[i],a=Yi(l.markedSpans,this);r&&!this.collapsed?ur(r,Re(l),"text"):r&&(null!=a.to&&(n=Re(l)),null!=a.from&&(t=Re(l))),l.markedSpans=_o(l.markedSpans,a),null==a.from&&this.collapsed&&!jr(this.doc,l)&&r&&Gt(l,Ti(r.display))}if(r&&this.collapsed&&!r.options.lineWrapping)for(var s=0;s<this.lines.length;++s){var u=Ir(this.lines[s]),f=xi(u);f>r.display.maxLineLength&&(r.display.maxLine=u,r.display.maxLineLength=f,r.display.maxLineChanged=!0)}null!=t&&r&&this.collapsed&&Nt(r,t,n+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,r&&xo(r.doc)),r&&Pt(r,"markerCleared",r,this,t,n),o&&Qn(r),this.parent&&this.parent.clear()}},In.prototype.find=function(r,o){null==r&&"bookmark"==this.type&&(r=1);for(var e,t,n=0;n<this.lines.length;++n){var i=this.lines[n],l=Yi(i.markedSpans,this);if(null!=l.from&&(e=C(o?i:Re(i),l.from),-1==r))return e;if(null!=l.to&&(t=C(o?i:Re(i),l.to),1==r))return t}return e&&{from:e,to:t}},In.prototype.changed=function(){var r=this,o=this.find(-1,!0),e=this,t=this.doc.cm;!o||!t||fr(t,function(){var n=o.line,i=Re(o.line),l=Il(t,i);if(l&&(ja(l),t.curOp.selectionChanged=t.curOp.forceUpdate=!0),t.curOp.updateMaxLine=!0,!jr(e.doc,n)&&null!=e.height){var a=e.height;e.height=null;var s=Si(e)-a;s&&Gt(n,n.height+s)}Pt(t,"markerChanged",t,r)})},In.prototype.attachLine=function(r){if(!this.lines.length&&this.doc.cm){var o=this.doc.cm.curOp;(!o.maybeHiddenMarkers||-1==A(o.maybeHiddenMarkers,this))&&(o.maybeUnhiddenMarkers||(o.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(r)},In.prototype.detachLine=function(r){if(this.lines.splice(A(this.lines,r),1),!this.lines.length&&this.doc.cm){var o=this.doc.cm.curOp;(o.maybeHiddenMarkers||(o.maybeHiddenMarkers=[])).push(this)}},Zt(In);var Tr=function(r,o){this.markers=r,this.primary=o;for(var e=0;e<r.length;++e)r[e].parent=this};function Bi(r){return r.findMarks(C(r.first,0),r.clipPos(C(r.lastLine())),function(o){return o.parent})}function ss(r){for(var o=function(t){var n=r[t],i=[n.primary.doc];ln(n.primary.doc,function(s){return i.push(s)});for(var l=0;l<n.markers.length;l++){var a=n.markers[l];-1==A(i,a.doc)&&(a.parent=null,n.markers.splice(l--,1))}},e=0;e<r.length;e++)o(e)}Tr.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var r=0;r<this.markers.length;++r)this.markers[r].clear();Pt(this,"clear")}},Tr.prototype.find=function(r,o){return this.primary.find(r,o)},Zt(Tr);var Qs=0,ir=function(r,o,e,t,n){if(!(this instanceof ir))return new ir(r,o,e,t,n);null==e&&(e=0),fn.call(this,[new Ii([new Vr("",null)])]),this.first=e,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=e;var i=C(e,0);this.sel=De(i),this.history=new go(null),this.id=++Qs,this.modeOption=o,this.lineSep=t,this.direction="rtl"==n?"rtl":"ltr",this.extend=!1,"string"==typeof r&&(r=this.splitLines(r)),ti(this,{from:i,to:i,text:r}),Qt(this,De(i),se)};ir.prototype=X(fn.prototype,{constructor:ir,iter:function(r,o,e){e?this.iterN(r-this.first,o-r,e):this.iterN(this.first,this.first+this.size,r)},insert:function(r,o){for(var e=0,t=0;t<o.length;++t)e+=o[t].height;this.insertInner(r-this.first,o,e)},remove:function(r,o){this.removeInner(r-this.first,o)},getValue:function(r){var o=oe(this,this.first,this.first+this.size);return!1===r?o:o.join(r||this.lineSeparator())},setValue:Oe(function(r){var o=C(this.first,0),e=this.first+this.size-1;ii(this,{from:o,to:C(e,ie(this,e).text.length),text:this.splitLines(r),origin:"setValue",full:!0},!0),this.cm&&Zn(this.cm,0,0),Qt(this,De(o),se)}),replaceRange:function(r,o,e,t){Yr(this,r,o=pe(this,o),e=e?pe(this,e):o,t)},getRange:function(r,o,e){var t=$e(this,pe(this,r),pe(this,o));return!1===e?t:t.join(""===e?"":e||this.lineSeparator())},getLine:function(r){var o=this.getLineHandle(r);return o&&o.text},getLineHandle:function(r){if(p(this,r))return ie(this,r)},getLineNumber:function(r){return Re(r)},getLineHandleVisualStart:function(r){return"number"==typeof r&&(r=ie(this,r)),Ir(r)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(r){return pe(this,r)},getCursor:function(r){var o=this.sel.primary();return null==r||"head"==r?o.head:"anchor"==r?o.anchor:"end"==r||"to"==r||!1===r?o.to():o.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Oe(function(r,o,e){$l(this,pe(this,"number"==typeof r?C(r,o||0):r),null,e)}),setSelection:Oe(function(r,o,e){$l(this,pe(this,r),pe(this,o||r),e)}),extendSelection:Oe(function(r,o,e){sn(this,pe(this,r),o&&pe(this,o),e)}),extendSelections:Oe(function(r,o){hl(this,me(this,r),o)}),extendSelectionsBy:Oe(function(r,o){hl(this,me(this,nr(this.sel.ranges,r)),o)}),setSelections:Oe(function(r,o,e){if(r.length){for(var t=[],n=0;n<r.length;n++)t[n]=new Ke(pe(this,r[n].anchor),pe(this,r[n].head||r[n].anchor));null==o&&(o=Math.min(r.length-1,this.sel.primIndex)),Qt(this,wt(this.cm,t,o),e)}}),addSelection:Oe(function(r,o,e){var t=this.sel.ranges.slice(0);t.push(new Ke(pe(this,r),pe(this,o||r))),Qt(this,wt(this.cm,t,t.length-1),e)}),getSelection:function(r){for(var e,o=this.sel.ranges,t=0;t<o.length;t++){var n=$e(this,o[t].from(),o[t].to());e=e?e.concat(n):n}return!1===r?e:e.join(r||this.lineSeparator())},getSelections:function(r){for(var o=[],e=this.sel.ranges,t=0;t<e.length;t++){var n=$e(this,e[t].from(),e[t].to());!1!==r&&(n=n.join(r||this.lineSeparator())),o[t]=n}return o},replaceSelection:function(r,o,e){for(var t=[],n=0;n<this.sel.ranges.length;n++)t[n]=r;this.replaceSelections(t,o,e||"+input")},replaceSelections:Oe(function(r,o,e){for(var t=[],n=this.sel,i=0;i<n.ranges.length;i++){var l=n.ranges[i];t[i]={from:l.from(),to:l.to(),text:this.splitLines(r[i]),origin:e}}for(var a=o&&"end"!=o&&function Zl(r,o,e){for(var t=[],n=C(r.first,0),i=n,l=0;l<o.length;l++){var a=o[l],s=ql(a.from,n,i),u=ql(Ut(a),n,i);if(n=a.to,i=u,"around"==e){var f=r.sel.ranges[l],c=O(f.head,f.anchor)<0;t[l]=new Ke(c?u:s,c?s:u)}else t[l]=new Ke(s,s)}return new vr(t,r.sel.primIndex)}(this,t,o),s=t.length-1;s>=0;s--)ii(this,t[s]);a?ta(this,a):this.cm&&Dn(this.cm)}),undo:Oe(function(){un(this,"undo")}),redo:Oe(function(){un(this,"redo")}),undoSelection:Oe(function(){un(this,"undo",!0)}),redoSelection:Oe(function(){un(this,"redo",!0)}),setExtending:function(r){this.extend=r},getExtending:function(){return this.extend},historySize:function(){for(var r=this.history,o=0,e=0,t=0;t<r.done.length;t++)r.done[t].ranges||++o;for(var n=0;n<r.undone.length;n++)r.undone[n].ranges||++e;return{undo:o,redo:e}},clearHistory:function(){var r=this;this.history=new go(this.history),ln(this,function(o){return o.history=r.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(r){return r&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(r){return this.history.generation==(r||this.cleanGeneration)},getHistory:function(){return{done:Fi(this.history.done),undone:Fi(this.history.undone)}},setHistory:function(r){var o=this.history=new go(this.history);o.done=Fi(r.done.slice(0),null,!0),o.undone=Fi(r.undone.slice(0),null,!0)},setGutterMarker:Oe(function(r,o,e){return Wi(this,r,"gutter",function(t){var n=t.gutterMarkers||(t.gutterMarkers={});return n[o]=e,!e&&Y(n)&&(t.gutterMarkers=null),!0})}),clearGutter:Oe(function(r){var o=this;this.iter(function(e){e.gutterMarkers&&e.gutterMarkers[r]&&Wi(o,e,"gutter",function(){return e.gutterMarkers[r]=null,Y(e.gutterMarkers)&&(e.gutterMarkers=null),!0})})}),lineInfo:function(r){var o;if("number"==typeof r){if(!(p(this,r)&&(o=r,r=ie(this,r))))return null}else if(null==(o=Re(r)))return null;return{line:o,handle:r,text:r.text,gutterMarkers:r.gutterMarkers,textClass:r.textClass,bgClass:r.bgClass,wrapClass:r.wrapClass,widgets:r.widgets}},addLineClass:Oe(function(r,o,e){return Wi(this,r,"gutter"==o?"gutter":"class",function(t){var n="text"==o?"textClass":"background"==o?"bgClass":"gutter"==o?"gutterClass":"wrapClass";if(t[n]){if(g(e).test(t[n]))return!1;t[n]+=" "+e}else t[n]=e;return!0})}),removeLineClass:Oe(function(r,o,e){return Wi(this,r,"gutter"==o?"gutter":"class",function(t){var n="text"==o?"textClass":"background"==o?"bgClass":"gutter"==o?"gutterClass":"wrapClass",i=t[n];if(!i)return!1;if(null==e)t[n]=null;else{var l=i.match(g(e));if(!l)return!1;var a=l.index+l[0].length;t[n]=i.slice(0,l.index)+(l.index&&a!=i.length?" ":"")+i.slice(a)||null}return!0})}),addLineWidget:Oe(function(r,o,e){return function Co(r,o,e,t){var n=new cn(r,e,t),i=r.cm;return i&&n.noHScroll&&(i.display.alignWidgets=!0),Wi(r,o,"widget",function(l){var a=l.widgets||(l.widgets=[]);if(null==n.insertAt?a.push(n):a.splice(Math.min(a.length,Math.max(0,n.insertAt)),0,n),n.line=l,i&&!jr(r,l)){var s=rr(l)<r.scrollTop;Gt(l,l.height+Si(n)),s&&zl(i,n.height),i.curOp.forceUpdate=!0}return!0}),i&&Pt(i,"lineWidgetAdded",i,n,"number"==typeof o?o:Re(o)),n}(this,r,o,e)}),removeLineWidget:function(r){r.clear()},markText:function(r,o,e){return li(this,pe(this,r),pe(this,o),e,e&&e.type||"range")},setBookmark:function(r,o){var e={replacedWith:o&&(null==o.nodeType?o.widget:o),insertLeft:o&&o.insertLeft,clearWhenEmpty:!1,shared:o&&o.shared,handleMouseEvents:o&&o.handleMouseEvents};return li(this,r=pe(this,r),r,e,"bookmark")},findMarksAt:function(r){var o=[],e=ie(this,(r=pe(this,r)).line).markedSpans;if(e)for(var t=0;t<e.length;++t){var n=e[t];(null==n.from||n.from<=r.ch)&&(null==n.to||n.to>=r.ch)&&o.push(n.marker.parent||n.marker)}return o},findMarks:function(r,o,e){r=pe(this,r),o=pe(this,o);var t=[],n=r.line;return this.iter(r.line,o.line+1,function(i){var l=i.markedSpans;if(l)for(var a=0;a<l.length;a++){var s=l[a];!(null!=s.to&&n==r.line&&r.ch>=s.to||null==s.from&&n!=r.line||null!=s.from&&n==o.line&&s.from>=o.ch)&&(!e||e(s.marker))&&t.push(s.marker.parent||s.marker)}++n}),t},getAllMarks:function(){var r=[];return this.iter(function(o){var e=o.markedSpans;if(e)for(var t=0;t<e.length;++t)null!=e[t].from&&r.push(e[t].marker)}),r},posFromIndex:function(r){var o,e=this.first,t=this.lineSeparator().length;return this.iter(function(n){var i=n.text.length+t;if(i>r)return o=r,!0;r-=i,++e}),pe(this,C(e,o))},indexFromPos:function(r){var o=(r=pe(this,r)).ch;if(r.line<this.first||r.ch<0)return 0;var e=this.lineSeparator().length;return this.iter(this.first,r.line,function(t){o+=t.text.length+e}),o},copy:function(r){var o=new ir(oe(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return o.scrollTop=this.scrollTop,o.scrollLeft=this.scrollLeft,o.sel=this.sel,o.extend=!1,r&&(o.history.undoDepth=this.history.undoDepth,o.setHistory(this.getHistory())),o},linkedDoc:function(r){r||(r={});var o=this.first,e=this.first+this.size;null!=r.from&&r.from>o&&(o=r.from),null!=r.to&&r.to<e&&(e=r.to);var t=new ir(oe(this,o,e),r.mode||this.modeOption,o,this.lineSep,this.direction);return r.sharedHist&&(t.history=this.history),(this.linked||(this.linked=[])).push({doc:t,sharedHist:r.sharedHist}),t.linked=[{doc:this,isParent:!0,sharedHist:r.sharedHist}],function Js(r,o){for(var e=0;e<o.length;e++){var t=o[e],n=t.find(),i=r.clipPos(n.from),l=r.clipPos(n.to);if(O(i,l)){var a=li(r,i,l,t.primary,t.primary.type);t.markers.push(a),a.parent=t}}}(t,Bi(this)),t},unlinkDoc:function(r){if(r instanceof vt&&(r=r.doc),this.linked)for(var o=0;o<this.linked.length;++o)if(this.linked[o].doc==r){this.linked.splice(o,1),r.unlinkDoc(this),ss(Bi(this));break}if(r.history==this.history){var t=[r.id];ln(r,function(n){return t.push(n.id)},!0),r.history=new go(null),r.history.done=Fi(this.history.done,t),r.history.undone=Fi(this.history.undone,t)}},iterLinkedDocs:function(r){ln(this,r)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(r){return this.lineSep?r.split(this.lineSep):Rn(r)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Oe(function(r){"rtl"!=r&&(r="ltr"),r!=this.direction&&(this.direction=r,this.iter(function(o){return o.order=null}),this.cm&&function ts(r){fr(r,function(){an(r),Nt(r)})}(this.cm))})}),ir.prototype.eachLine=ir.prototype.iter;var us=0;function or(r){var o=this;if(cs(o),!We(o,r)&&!$r(o.display,r)){it(r),ee&&(us=+new Date);var e=Ln(o,r,!0),t=r.dataTransfer.files;if(e&&!o.isReadOnly())if(t&&t.length&&window.FileReader&&window.File)for(var n=t.length,i=Array(n),l=0,a=function(){++l==n&&Bt(o,function(){var d={from:e=pe(o.doc,e),to:e,text:o.doc.splitLines(i.filter(function(m){return null!=m}).join(o.doc.lineSeparator())),origin:"paste"};ii(o.doc,d),ta(o.doc,De(pe(o.doc,e),pe(o.doc,Ut(d))))})()},s=function(d,m){if(o.options.allowDropFileTypes&&-1==A(o.options.allowDropFileTypes,d.type))a();else{var y=new FileReader;y.onerror=function(){return a()},y.onload=function(){var w=y.result;/[\x00-\x08\x0e-\x1f]{2}/.test(w)||(i[m]=w),a()},y.readAsText(d)}},u=0;u<t.length;u++)s(t[u],u);else{if(o.state.draggingText&&o.doc.sel.contains(e)>-1)return o.state.draggingText(r),void setTimeout(function(){return o.display.input.focus()},20);try{var f=r.dataTransfer.getData("Text");if(f){var c;if(o.state.draggingText&&!o.state.draggingText.copy&&(c=o.listSelections()),yo(o.doc,De(e,e)),c)for(var h=0;h<c.length;++h)Yr(o.doc,"",c[h].anchor,c[h].head,"drag");o.replaceSelection(f,"around","paste"),o.display.input.focus()}}catch{}}}}function cs(r){r.display.dragCursor&&(r.display.lineSpace.removeChild(r.display.dragCursor),r.display.dragCursor=null)}function hs(r){if(document.getElementsByClassName){for(var o=document.getElementsByClassName("CodeMirror"),e=[],t=0;t<o.length;t++){var n=o[t].CodeMirror;n&&e.push(n)}e.length&&e[0].operation(function(){for(var i=0;i<e.length;i++)r(e[i])})}}var sa=!1;function ds(){sa||(function ps(){var r;K(window,"resize",function(){null==r&&(r=setTimeout(function(){r=null,hs($s)},100))}),K(window,"blur",function(){return hs(Mn)})}(),sa=!0)}function $s(r){var o=r.display;o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.scrollbarsClipped=!1,r.setSize()}for(var Hn={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},So=0;So<10;So++)Hn[So+48]=Hn[So+96]=String(So);for(var zr=65;zr<=90;zr++)Hn[zr]=String.fromCharCode(zr);for(var hn=1;hn<=12;hn++)Hn[hn+111]=Hn[hn+63235]="F"+hn;var Mr={};function ko(r){var o=r.split(/-(?!$)/);r=o[o.length-1];for(var e,t,n,i,l=0;l<o.length-1;l++){var a=o[l];if(/^(cmd|meta|m)$/i.test(a))i=!0;else if(/^a(lt)?$/i.test(a))e=!0;else if(/^(c|ctrl|control)$/i.test(a))t=!0;else{if(!/^s(hift)?$/i.test(a))throw new Error("Unrecognized modifier name: "+a);n=!0}}return e&&(r="Alt-"+r),t&&(r="Ctrl-"+r),i&&(r="Cmd-"+r),n&&(r="Shift-"+r),r}function dn(r){var o={};for(var e in r)if(r.hasOwnProperty(e)){var t=r[e];if(/^(name|fallthrough|(de|at)tach)$/.test(e))continue;if("..."==t){delete r[e];continue}for(var n=nr(e.split(" "),ko),i=0;i<n.length;i++){var l=void 0,a=void 0;i==n.length-1?(a=n.join(" "),l=t):(a=n.slice(0,i+1).join(" "),l="...");var s=o[a];if(s){if(s!=l)throw new Error("Inconsistent bindings for "+a)}else o[a]=l}delete r[e]}for(var u in o)r[u]=o[u];return r}function Ri(r,o,e,t){var n=(o=Lo(o)).call?o.call(r,t):o[r];if(!1===n)return"nothing";if("..."===n)return"multi";if(null!=n&&e(n))return"handled";if(o.fallthrough){if("[object Array]"!=Object.prototype.toString.call(o.fallthrough))return Ri(r,o.fallthrough,e,t);for(var i=0;i<o.fallthrough.length;i++){var l=Ri(r,o.fallthrough[i],e,t);if(l)return l}}}function vs(r){var o="string"==typeof r?r:Hn[r.keyCode];return"Ctrl"==o||"Alt"==o||"Shift"==o||"Mod"==o}function ai(r,o,e){var t=r;return o.altKey&&"Alt"!=t&&(r="Alt-"+r),(Xt?o.metaKey:o.ctrlKey)&&"Ctrl"!=t&&(r="Ctrl-"+r),(Xt?o.ctrlKey:o.metaKey)&&"Mod"!=t&&(r="Cmd-"+r),!e&&o.shiftKey&&"Shift"!=t&&(r="Shift-"+r),r}function ua(r,o){if(be&&34==r.keyCode&&r.char)return!1;var e=Hn[r.keyCode];return null!=e&&!r.altGraphKey&&(3==r.keyCode&&r.code&&(e=r.code),ai(e,r,o))}function Lo(r){return"string"==typeof r?Mr[r]:r}function si(r,o){for(var e=r.doc.sel.ranges,t=[],n=0;n<e.length;n++){for(var i=o(e[n]);t.length&&O(i.from,xe(t).to)<=0;){var l=t.pop();if(O(l.from,i.from)<0){i.from=l.from;break}}t.push(i)}fr(r,function(){for(var a=t.length-1;a>=0;a--)Yr(r.doc,"",t[a].from,t[a].to,"+delete");Dn(r)})}function _i(r,o,e){var t=_t(r.text,o+e,e);return t<0||t>r.text.length?null:t}function Pn(r,o,e){var t=_i(r,o.ch,e);return null==t?null:new C(o.line,t,e<0?"after":"before")}function To(r,o,e,t,n){if(r){"rtl"==o.doc.direction&&(n=-n);var i=at(e,o.doc.direction);if(i){var u,l=n<0?xe(i):i[0],s=n<0==(1==l.level)?"after":"before";if(l.level>0||"rtl"==o.doc.direction){var f=Gn(o,e),c=Cr(o,f,u=n<0?e.text.length-1:0).top;u=Ue(function(h){return Cr(o,f,h).top==c},n<0==(1==l.level)?l.from:l.to-1,u),"before"==s&&(u=_i(e,u,1))}else u=n<0?l.to:l.from;return new C(t,u,s)}}return new C(t,n<0?e.text.length:0,n<0?"before":"after")}Mr.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Mr.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Mr.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Mr.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Mr.default=Ze?Mr.macDefault:Mr.pcDefault;var ui={selectAll:wo,singleSelection:function(r){return r.setSelection(r.getCursor("anchor"),r.getCursor("head"),se)},killLine:function(r){return si(r,function(o){if(o.empty()){var e=ie(r.doc,o.head.line).text.length;return o.head.ch==e&&o.head.line<r.lastLine()?{from:o.head,to:C(o.head.line+1,0)}:{from:o.head,to:C(o.head.line,e)}}return{from:o.from(),to:o.to()}})},deleteLine:function(r){return si(r,function(o){return{from:C(o.from().line,0),to:pe(r.doc,C(o.to().line+1,0))}})},delLineLeft:function(r){return si(r,function(o){return{from:C(o.from().line,0),to:o.from()}})},delWrappedLineLeft:function(r){return si(r,function(o){var e=r.charCoords(o.head,"div").top+5;return{from:r.coordsChar({left:0,top:e},"div"),to:o.from()}})},delWrappedLineRight:function(r){return si(r,function(o){var e=r.charCoords(o.head,"div").top+5,t=r.coordsChar({left:r.display.lineDiv.offsetWidth+100,top:e},"div");return{from:o.from(),to:t}})},undo:function(r){return r.undo()},redo:function(r){return r.redo()},undoSelection:function(r){return r.undoSelection()},redoSelection:function(r){return r.redoSelection()},goDocStart:function(r){return r.extendSelection(C(r.firstLine(),0))},goDocEnd:function(r){return r.extendSelection(C(r.lastLine()))},goLineStart:function(r){return r.extendSelectionsBy(function(o){return gs(r,o.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(r){return r.extendSelectionsBy(function(o){return ca(r,o.head)},{origin:"+move",bias:1})},goLineEnd:function(r){return r.extendSelectionsBy(function(o){return function Mo(r,o){var e=ie(r.doc,o),t=function Na(r){for(var o;o=Vi(r);)r=o.find(1,!0).line;return r}(e);return t!=e&&(o=Re(t)),To(!0,r,e,o,-1)}(r,o.head.line)},{origin:"+move",bias:-1})},goLineRight:function(r){return r.extendSelectionsBy(function(o){var e=r.cursorCoords(o.head,"div").top+5;return r.coordsChar({left:r.display.lineDiv.offsetWidth+100,top:e},"div")},ht)},goLineLeft:function(r){return r.extendSelectionsBy(function(o){var e=r.cursorCoords(o.head,"div").top+5;return r.coordsChar({left:0,top:e},"div")},ht)},goLineLeftSmart:function(r){return r.extendSelectionsBy(function(o){var e=r.cursorCoords(o.head,"div").top+5,t=r.coordsChar({left:0,top:e},"div");return t.ch<r.getLine(t.line).search(/\S/)?ca(r,o.head):t},ht)},goLineUp:function(r){return r.moveV(-1,"line")},goLineDown:function(r){return r.moveV(1,"line")},goPageUp:function(r){return r.moveV(-1,"page")},goPageDown:function(r){return r.moveV(1,"page")},goCharLeft:function(r){return r.moveH(-1,"char")},goCharRight:function(r){return r.moveH(1,"char")},goColumnLeft:function(r){return r.moveH(-1,"column")},goColumnRight:function(r){return r.moveH(1,"column")},goWordLeft:function(r){return r.moveH(-1,"word")},goGroupRight:function(r){return r.moveH(1,"group")},goGroupLeft:function(r){return r.moveH(-1,"group")},goWordRight:function(r){return r.moveH(1,"word")},delCharBefore:function(r){return r.deleteH(-1,"codepoint")},delCharAfter:function(r){return r.deleteH(1,"char")},delWordBefore:function(r){return r.deleteH(-1,"word")},delWordAfter:function(r){return r.deleteH(1,"word")},delGroupBefore:function(r){return r.deleteH(-1,"group")},delGroupAfter:function(r){return r.deleteH(1,"group")},indentAuto:function(r){return r.indentSelection("smart")},indentMore:function(r){return r.indentSelection("add")},indentLess:function(r){return r.indentSelection("subtract")},insertTab:function(r){return r.replaceSelection("\t")},insertSoftTab:function(r){for(var o=[],e=r.listSelections(),t=r.options.tabSize,n=0;n<e.length;n++){var i=e[n].from(),l=V(r.getLine(i.line),i.ch,t);o.push(Et(t-l%t))}r.replaceSelections(o)},defaultTab:function(r){r.somethingSelected()?r.indentSelection("add"):r.execCommand("insertTab")},transposeChars:function(r){return fr(r,function(){for(var o=r.listSelections(),e=[],t=0;t<o.length;t++)if(o[t].empty()){var n=o[t].head,i=ie(r.doc,n.line).text;if(i)if(n.ch==i.length&&(n=new C(n.line,n.ch-1)),n.ch>0)n=new C(n.line,n.ch+1),r.replaceRange(i.charAt(n.ch-1)+i.charAt(n.ch-2),C(n.line,n.ch-2),n,"+transpose");else if(n.line>r.doc.first){var l=ie(r.doc,n.line-1).text;l&&(n=new C(n.line,1),r.replaceRange(i.charAt(0)+r.doc.lineSeparator()+l.charAt(l.length-1),C(n.line-1,l.length-1),n,"+transpose"))}e.push(new Ke(n,n))}r.setSelections(e)})},newlineAndIndent:function(r){return fr(r,function(){for(var o=r.listSelections(),e=o.length-1;e>=0;e--)r.replaceRange(r.doc.lineSeparator(),o[e].anchor,o[e].head,"+input");o=r.listSelections();for(var t=0;t<o.length;t++)r.indentLine(o[t].from().line,null,!0);Dn(r)})},openLine:function(r){return r.replaceSelection("\n","start")},toggleOverwrite:function(r){return r.toggleOverwrite()}};function gs(r,o){var e=ie(r.doc,o),t=Ir(e);return t!=e&&(o=Re(t)),To(!0,r,t,o,1)}function ca(r,o){var e=gs(r,o.line),t=ie(r.doc,e.line),n=at(t,r.doc.direction);if(!n||0==n[0].level){var i=Math.max(e.ch,t.text.search(/\S/));return C(e.line,o.line==e.line&&o.ch<=i&&o.ch?0:i,e.sticky)}return e}function dl(r,o,e){if("string"==typeof o&&!(o=ui[o]))return!1;r.display.input.ensurePolled();var t=r.display.shift,n=!1;try{r.isReadOnly()&&(r.state.suppressEdits=!0),e&&(r.display.shift=!1),n=o(r)!=B}finally{r.display.shift=t,r.state.suppressEdits=!1}return n}var pl=new N;function Do(r,o,e,t){var n=r.state.keySeq;if(n){if(vs(o))return"handled";if(/\'$/.test(o)?r.state.keySeq=null:pl.set(50,function(){r.state.keySeq==n&&(r.state.keySeq=null,r.display.input.reset())}),ys(r,n+" "+o,e,t))return!0}return ys(r,o,e,t)}function ys(r,o,e,t){var n=function ms(r,o,e){for(var t=0;t<r.state.keyMaps.length;t++){var n=Ri(o,r.state.keyMaps[t],e,r);if(n)return n}return r.options.extraKeys&&Ri(o,r.options.extraKeys,e,r)||Ri(o,r.options.keyMap,e,r)}(r,o,t);return"multi"==n&&(r.state.keySeq=o),"handled"==n&&Pt(r,"keyHandled",r,o,e),("handled"==n||"multi"==n)&&(it(e),Mi(r)),!!n}function zi(r,o){var e=ua(o,!0);return!!e&&(o.shiftKey&&!r.state.keySeq?Do(r,"Shift-"+e,o,function(t){return dl(r,t,!0)})||Do(r,e,o,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return dl(r,t)}):Do(r,e,o,function(t){return dl(r,t)}))}var vl=null;function bs(r){var o=this;if(!(r.target&&r.target!=o.display.input.getField()||(o.curOp.focus=H(S(o)),We(o,r)))){ee&&j<11&&27==r.keyCode&&(r.returnValue=!1);var e=r.keyCode;o.display.shift=16==e||r.shiftKey;var t=zi(o,r);be&&(vl=t?e:null,!t&&88==e&&!xr&&(Ze?r.metaKey:r.ctrlKey)&&o.replaceSelection("",null,"cut")),J&&!Ze&&!t&&46==e&&r.shiftKey&&!r.ctrlKey&&document.execCommand&&document.execCommand("cut"),18==e&&!/\bCodeMirror-crosshair\b/.test(o.display.lineDiv.className)&&function ha(r){var o=r.display.lineDiv;function e(t){(18==t.keyCode||!t.altKey)&&(Wt(o,"CodeMirror-crosshair"),ne(document,"keyup",e),ne(document,"mouseover",e))}re(o,"CodeMirror-crosshair"),K(document,"keyup",e),K(document,"mouseover",e)}(o)}}function da(r){16==r.keyCode&&(this.doc.sel.shift=!1),We(this,r)}function ws(r){var o=this;if(!(r.target&&r.target!=o.display.input.getField()||$r(o.display,r)||We(o,r)||r.ctrlKey&&!r.altKey||Ze&&r.metaKey)){var e=r.keyCode,t=r.charCode;if(be&&e==vl)return vl=null,void it(r);if(!be||r.which&&!(r.which<10)||!zi(o,r)){var n=String.fromCharCode(t??e);"\b"!=n&&(function xs(r,o,e){return Do(r,"'"+e+"'",o,function(t){return dl(r,t,!0)})}(o,r,n)||o.display.input.onKeyPress(r))}}}var Ao,fi,gl=function(r,o,e){this.time=r,this.pos=o,this.button=e};function Gi(r){var o=this,e=o.display;if(!(We(o,r)||e.activeTouch&&e.input.supportsTouch())){if(e.input.ensurePolled(),e.shift=r.shiftKey,$r(e,r))return void(P||(e.scroller.draggable=!1,setTimeout(function(){return e.scroller.draggable=!0},100)));if(!pa(o,r)){var t=Ln(o,r),n=qr(r),i=t?function No(r,o){var e=+new Date;return fi&&fi.compare(e,r,o)?(Ao=fi=null,"triple"):Ao&&Ao.compare(e,r,o)?(fi=new gl(e,r,o),Ao=null,"double"):(Ao=new gl(e,r,o),fi=null,"single")}(t,n):"single";$(o).focus(),1==n&&o.state.selectingText&&o.state.selectingText(r),(!t||!function eu(r,o,e,t,n){var i="Click";return"double"==t?i="Double"+i:"triple"==t&&(i="Triple"+i),Do(r,ai(i=(1==o?"Left":2==o?"Middle":"Right")+i,n),n,function(l){if("string"==typeof l&&(l=ui[l]),!l)return!1;var a=!1;try{r.isReadOnly()&&(r.state.suppressEdits=!0),a=l(r,e)!=B}finally{r.state.suppressEdits=!1}return a})}(o,n,t,i,r))&&(1==n?t?function tu(r,o,e,t){ee?setTimeout(ye(qa,r),0):r.curOp.focus=H(S(r));var l,n=function Ss(r,o,e){var t=r.getOption("configureMouse"),n=t?t(r,o,e):{};return null==n.unit&&(n.unit=($t?e.shiftKey&&e.metaKey:e.altKey)?"rectangle":"single"==o?"char":"double"==o?"word":"line"),(null==n.extend||r.doc.extend)&&(n.extend=r.doc.extend||e.shiftKey),null==n.addNew&&(n.addNew=Ze?e.metaKey:e.ctrlKey),null==n.moveOnDrag&&(n.moveOnDrag=!(Ze?e.altKey:e.ctrlKey)),n}(r,e,t),i=r.doc.sel;r.options.dragDrop&&Ki&&!r.isReadOnly()&&"single"==e&&(l=i.contains(o))>-1&&(O((l=i.ranges[l]).from(),o)<0||o.xRel>0)&&(O(l.to(),o)>0||o.xRel<0)?function ru(r,o,e,t){var n=r.display,i=!1,l=Bt(r,function(u){P&&(n.scroller.draggable=!1),r.state.draggingText=!1,r.state.delayingBlurEvent&&(r.hasFocus()?r.state.delayingBlurEvent=!1:fo(r)),ne(n.wrapper.ownerDocument,"mouseup",l),ne(n.wrapper.ownerDocument,"mousemove",a),ne(n.scroller,"dragstart",s),ne(n.scroller,"drop",l),i||(it(u),t.addNew||sn(r.doc,e,null,null,t.extend),P&&!de||ee&&9==j?setTimeout(function(){n.wrapper.ownerDocument.body.focus({preventScroll:!0}),n.input.focus()},20):n.input.focus())}),a=function(u){i=i||Math.abs(o.clientX-u.clientX)+Math.abs(o.clientY-u.clientY)>=10},s=function(){return i=!0};P&&(n.scroller.draggable=!0),r.state.draggingText=l,l.copy=!t.moveOnDrag,K(n.wrapper.ownerDocument,"mouseup",l),K(n.wrapper.ownerDocument,"mousemove",a),K(n.scroller,"dragstart",s),K(n.scroller,"drop",l),r.state.delayingBlurEvent=!0,setTimeout(function(){return n.input.focus()},20),n.scroller.dragDrop&&n.scroller.dragDrop()}(r,t,o,n):function nu(r,o,e,t){ee&&fo(r);var n=r.display,i=r.doc;it(o);var l,a,s=i.sel,u=s.ranges;if(t.addNew&&!t.extend?(a=i.sel.contains(e),l=a>-1?u[a]:new Ke(e,e)):(l=i.sel.primary(),a=i.sel.primIndex),"rectangle"==t.unit)t.addNew||(l=new Ke(e,e)),e=Ln(r,o,!0,!0),a=-1;else{var f=ks(r,e,t.unit);l=t.extend?cl(l,f.anchor,f.head,t.extend):f}t.addNew?-1==a?(a=u.length,Qt(i,wt(r,u.concat([l]),a),{scroll:!1,origin:"*mouse"})):u.length>1&&u[a].empty()&&"char"==t.unit&&!t.extend?(Qt(i,wt(r,u.slice(0,a).concat(u.slice(a+1)),0),{scroll:!1,origin:"*mouse"}),s=i.sel):Oi(i,a,l,Ce):(a=0,Qt(i,new vr([l],0),Ce),s=i.sel);var c=e;function h(D){if(0!=O(c,D))if(c=D,"rectangle"==t.unit){for(var F=[],W=r.options.tabSize,I=V(ie(i,e.line).text,e.ch,W),_=V(ie(i,D.line).text,D.ch,W),q=Math.min(I,_),fe=Math.max(I,_),ve=Math.min(e.line,D.line),Ye=Math.min(r.lastLine(),Math.max(e.line,D.line));ve<=Ye;ve++){var Ne=ie(i,ve).text,_e=Yt(Ne,q,W);q==fe?F.push(new Ke(C(ve,_e),C(ve,_e))):Ne.length>_e&&F.push(new Ke(C(ve,_e),C(ve,Yt(Ne,fe,W))))}F.length||F.push(new Ke(e,e)),Qt(i,wt(r,s.ranges.slice(0,a).concat(F),a),{origin:"*mouse",scroll:!1}),r.scrollIntoView(D)}else{var Fe,tt=l,Ee=ks(r,D,t.unit),ze=tt.anchor;O(Ee.anchor,ze)>0?(Fe=Ee.head,ze=St(tt.from(),Ee.anchor)):(Fe=Ee.anchor,ze=Ie(tt.to(),Ee.head));var ke=s.ranges.slice(0);ke[a]=function Ls(r,o){var e=o.anchor,t=o.head,n=ie(r.doc,e.line);if(0==O(e,t)&&e.sticky==t.sticky)return o;var i=at(n);if(!i)return o;var l=bt(i,e.ch,e.sticky),a=i[l];if(a.from!=e.ch&&a.to!=e.ch)return o;var u,s=l+(a.from==e.ch==(1!=a.level)?0:1);if(0==s||s==i.length)return o;if(t.line!=e.line)u=(t.line-e.line)*("ltr"==r.doc.direction?1:-1)>0;else{var f=bt(i,t.ch,t.sticky),c=f-l||(t.ch-e.ch)*(1==a.level?-1:1);u=f==s-1||f==s?c<0:c>0}var h=i[s+(u?-1:0)],d=u==(1==h.level),m=d?h.from:h.to,y=d?"after":"before";return e.ch==m&&e.sticky==y?o:new Ke(new C(e.line,m,y),t)}(r,new Ke(pe(i,ze),Fe)),Qt(i,wt(r,ke,a),Ce)}}var d=n.wrapper.getBoundingClientRect(),m=0;function y(D){var F=++m,W=Ln(r,D,!0,"rectangle"==t.unit);if(W)if(0!=O(W,c)){r.curOp.focus=H(S(r)),h(W);var I=qn(n,i);(W.line>=I.to||W.line<I.from)&&setTimeout(Bt(r,function(){m==F&&y(D)}),150)}else{var _=D.clientY<d.top?-20:D.clientY>d.bottom?20:0;_&&setTimeout(Bt(r,function(){m==F&&(n.scroller.scrollTop+=_,y(D))}),50)}}function w(D){r.state.selectingText=!1,m=1/0,D&&(it(D),n.input.focus()),ne(n.wrapper.ownerDocument,"mousemove",k),ne(n.wrapper.ownerDocument,"mouseup",M),i.history.lastSelOrigin=null}var k=Bt(r,function(D){0!==D.buttons&&qr(D)?y(D):w(D)}),M=Bt(r,w);r.state.selectingText=M,K(n.wrapper.ownerDocument,"mousemove",k),K(n.wrapper.ownerDocument,"mouseup",M)}(r,t,o,n)}(o,t,i,r):Jt(r)==e.scroller&&it(r):2==n?(t&&sn(o.doc,t),setTimeout(function(){return e.input.focus()},20)):3==n&&(lt?o.display.input.onContextMenu(r):fo(o)))}}}function ks(r,o,e){if("char"==e)return new Ke(o,o);if("word"==e)return r.findWordAt(o);if("line"==e)return new Ke(C(o.line,0),pe(r.doc,C(o.line+1,0)));var t=e(r,o);return new Ke(t.from,t.to)}function Ts(r,o,e,t){var n,i;if(o.touches)n=o.touches[0].clientX,i=o.touches[0].clientY;else try{n=o.clientX,i=o.clientY}catch{return!1}if(n>=Math.floor(r.display.gutters.getBoundingClientRect().right))return!1;t&&it(o);var l=r.display,a=l.lineDiv.getBoundingClientRect();if(i>a.bottom||!Be(r,e))return It(o);i-=a.top-l.viewOffset;for(var s=0;s<r.display.gutterSpecs.length;++s){var u=l.gutters.childNodes[s];if(u&&u.getBoundingClientRect().right>=n)return Ve(r,e,r,Ht(r.doc,i),r.display.gutterSpecs[s].className,o),It(o)}}function pa(r,o){return Ts(r,o,"gutterClick",!0)}function va(r,o){$r(r.display,o)||function ga(r,o){return!!Be(r,"gutterContextMenu")&&Ts(r,o,"gutterContextMenu",!1)}(r,o)||We(r,o,"contextmenu")||lt||r.display.input.onContextMenu(o)}function ma(r){r.display.wrapper.className=r.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+r.options.theme.replace(/(^|\s)\s*/g," cm-s-"),ki(r)}gl.prototype.compare=function(r,o,e){return this.time+400>r&&0==O(o,this.pos)&&e==this.button};var Ui={toString:function(){return"CodeMirror.Init"}},ya={},pn={};function ml(r,o,e){if(!o!=!(e&&e!=Ui)){var n=r.display.dragFunctions,i=o?K:ne;i(r.display.scroller,"dragstart",n.start),i(r.display.scroller,"dragenter",n.enter),i(r.display.scroller,"dragover",n.over),i(r.display.scroller,"dragleave",n.leave),i(r.display.scroller,"drop",n.drop)}}function iu(r){r.options.lineWrapping?(re(r.display.wrapper,"CodeMirror-wrap"),r.display.sizer.style.minWidth="",r.display.sizerWidth=null):(Wt(r.display.wrapper,"CodeMirror-wrap"),Hr(r)),lo(r),Nt(r),ki(r),setTimeout(function(){return Lr(r)},100)}function vt(r,o){var e=this;if(!(this instanceof vt))return new vt(r,o);this.options=o=o?z(o):{},z(ya,o,!1);var t=o.value;"string"==typeof t?t=new ir(t,o.mode,null,o.lineSeparator,o.direction):o.mode&&(t.modeOption=o.mode),this.doc=t;var n=new vt.inputStyles[o.inputStyle](this),i=this.display=new es(r,t,n,o);for(var l in i.wrapper.CodeMirror=this,ma(this),o.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Ul(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new N,keySeq:null,specialChars:null},o.autofocus&&!he&&i.input.focus(),ee&&j<11&&setTimeout(function(){return e.display.input.reset(!0)},20),function ou(r){var o=r.display;K(o.scroller,"mousedown",Bt(r,Gi)),K(o.scroller,"dblclick",ee&&j<11?Bt(r,function(s){if(!We(r,s)){var u=Ln(r,s);if(u&&!pa(r,s)&&!$r(r.display,s)){it(s);var f=r.findWordAt(u);sn(r.doc,f.anchor,f.head)}}}):function(s){return We(r,s)||it(s)}),K(o.scroller,"contextmenu",function(s){return va(r,s)}),K(o.input.getField(),"contextmenu",function(s){o.scroller.contains(s.target)||va(r,s)});var e,t={end:0};function n(){o.activeTouch&&(e=setTimeout(function(){return o.activeTouch=null},1e3),(t=o.activeTouch).end=+new Date)}function i(s){if(1!=s.touches.length)return!1;var u=s.touches[0];return u.radiusX<=1&&u.radiusY<=1}function l(s,u){if(null==u.left)return!0;var f=u.left-s.left,c=u.top-s.top;return f*f+c*c>400}K(o.scroller,"touchstart",function(s){if(!We(r,s)&&!i(s)&&!pa(r,s)){o.input.ensurePolled(),clearTimeout(e);var u=+new Date;o.activeTouch={start:u,moved:!1,prev:u-t.end<=300?t:null},1==s.touches.length&&(o.activeTouch.left=s.touches[0].pageX,o.activeTouch.top=s.touches[0].pageY)}}),K(o.scroller,"touchmove",function(){o.activeTouch&&(o.activeTouch.moved=!0)}),K(o.scroller,"touchend",function(s){var u=o.activeTouch;if(u&&!$r(o,s)&&null!=u.left&&!u.moved&&new Date-u.start<300){var c,f=r.coordsChar(o.activeTouch,"page");c=!u.prev||l(u,u.prev)?new Ke(f,f):!u.prev.prev||l(u,u.prev.prev)?r.findWordAt(f):new Ke(C(f.line,0),pe(r.doc,C(f.line+1,0))),r.setSelection(c.anchor,c.head),r.focus(),it(s)}n()}),K(o.scroller,"touchcancel",n),K(o.scroller,"scroll",function(){o.scroller.clientHeight&&(Nn(r,o.scroller.scrollTop),_r(r,o.scroller.scrollLeft,!0),Ve(r,"scroll",r))}),K(o.scroller,"mousewheel",function(s){return Yl(r,s)}),K(o.scroller,"DOMMouseScroll",function(s){return Yl(r,s)}),K(o.wrapper,"scroll",function(){return o.wrapper.scrollTop=o.wrapper.scrollLeft=0}),o.dragFunctions={enter:function(s){We(r,s)||Gr(s)},over:function(s){We(r,s)||(function Vs(r,o){var e=Ln(r,o);if(e){var t=document.createDocumentFragment();Xn(r,e,t),r.display.dragCursor||(r.display.dragCursor=T("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),r.display.lineSpace.insertBefore(r.display.dragCursor,r.display.cursorDiv)),Je(r.display.dragCursor,t)}}(r,s),Gr(s))},start:function(s){return function fs(r,o){if(ee&&(!r.state.draggingText||+new Date-us<100))Gr(o);else if(!We(r,o)&&!$r(r.display,o)&&(o.dataTransfer.setData("Text",r.getSelection()),o.dataTransfer.effectAllowed="copyMove",o.dataTransfer.setDragImage&&!de)){var e=T("img",null,null,"position: fixed; left: 0; top: 0;");e.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",be&&(e.width=e.height=1,r.display.wrapper.appendChild(e),e._top=e.offsetTop),o.dataTransfer.setDragImage(e,0,0),be&&e.parentNode.removeChild(e)}}(r,s)},drop:Bt(r,or),leave:function(s){We(r,s)||cs(r)}};var a=o.input.getField();K(a,"keyup",function(s){return da.call(r,s)}),K(a,"keydown",Bt(r,bs)),K(a,"keypress",Bt(r,ws)),K(a,"focus",function(s){return el(r,s)}),K(a,"blur",function(s){return Mn(r,s)})}(this),ds(),En(this),this.curOp.forceUpdate=!0,sl(this,t),o.autofocus&&!he||this.hasFocus()?setTimeout(function(){e.hasFocus()&&!e.state.focused&&el(e)},20):Mn(this),pn)pn.hasOwnProperty(l)&&pn[l](this,o[l],Ui);il(this),o.finishInit&&o.finishInit(this);for(var a=0;a<st.length;++a)st[a](this);Qn(this),P&&o.lineWrapping&&"optimizelegibility"==getComputedStyle(i.lineDiv).textRendering&&(i.lineDiv.style.textRendering="auto")}vt.defaults=ya,vt.optionHandlers=pn;var st=[];function Eo(r,o,e,t){var i,n=r.doc;null==e&&(e="add"),"smart"==e&&(n.mode.indent?i=gi(r,o).state:e="prev");var l=r.options.tabSize,a=ie(n,o),s=V(a.text,null,l);a.stateAfter&&(a.stateAfter=null);var f,u=a.text.match(/^\s*/)[0];if(t||/\S/.test(a.text)){if("smart"==e&&((f=n.mode.indent(i,a.text.slice(u.length),a.text))==B||f>150)){if(!t)return;e="prev"}}else f=0,e="not";"prev"==e?f=o>n.first?V(ie(n,o-1).text,null,l):0:"add"==e?f=s+r.options.indentUnit:"subtract"==e?f=s-r.options.indentUnit:"number"==typeof e&&(f=s+e),f=Math.max(0,f);var c="",h=0;if(r.options.indentWithTabs)for(var d=Math.floor(f/l);d;--d)h+=l,c+="\t";if(h<f&&(c+=Et(f-h)),c!=u)return Yr(n,c,C(o,0),C(o,u.length),"+input"),a.stateAfter=null,!0;for(var m=0;m<n.sel.ranges.length;m++){var y=n.sel.ranges[m];if(y.head.line==o&&y.head.ch<u.length){var w=C(o,u.length);Oi(n,m,new Ke(w,w));break}}}vt.defineInitHook=function(r){return st.push(r)};var gr=null;function Bn(r){gr=r}function mr(r,o,e,t,n){var i=r.doc;r.display.shift=!1,t||(t=i.sel);var l=+new Date-200,a="paste"==n||r.state.pasteIncoming>l,s=Rn(o),u=null;if(a&&t.ranges.length>1)if(gr&&gr.text.join("\n")==o){if(t.ranges.length%gr.text.length==0){u=[];for(var f=0;f<gr.text.length;f++)u.push(i.splitLines(gr.text[f]))}}else s.length==t.ranges.length&&r.options.pasteLinesPerSelection&&(u=nr(s,function(k){return[k]}));for(var c=r.curOp.updateInput,h=t.ranges.length-1;h>=0;h--){var d=t.ranges[h],m=d.from(),y=d.to();d.empty()&&(e&&e>0?m=C(m.line,m.ch-e):r.state.overwrite&&!a?y=C(y.line,Math.min(ie(i,y.line).text.length,y.ch+xe(s).length)):a&&gr&&gr.lineWise&&gr.text.join("\n")==s.join("\n")&&(m=y=C(m.line,0)));var w={from:m,to:y,text:u?u[h%u.length]:s,origin:n||(a?"paste":r.state.cutIncoming>l?"cut":"+input")};ii(r.doc,w),Pt(r,"inputRead",r,w)}o&&!a&&yl(r,o),Dn(r),r.curOp.updateInput<2&&(r.curOp.updateInput=c),r.curOp.typing=!0,r.state.pasteIncoming=r.state.cutIncoming=-1}function Fo(r,o){var e=r.clipboardData&&r.clipboardData.getData("Text");if(e)return r.preventDefault(),!o.isReadOnly()&&!o.options.disableInput&&o.hasFocus()&&fr(o,function(){return mr(o,e,0,null,"paste")}),!0}function yl(r,o){if(r.options.electricChars&&r.options.smartIndent)for(var e=r.doc.sel,t=e.ranges.length-1;t>=0;t--){var n=e.ranges[t];if(!(n.head.ch>100||t&&e.ranges[t-1].head.line==n.head.line)){var i=r.getModeAt(n.head),l=!1;if(i.electricChars){for(var a=0;a<i.electricChars.length;a++)if(o.indexOf(i.electricChars.charAt(a))>-1){l=Eo(r,n.head.line,"smart");break}}else i.electricInput&&i.electricInput.test(ie(r.doc,n.head.line).text.slice(0,n.head.ch))&&(l=Eo(r,n.head.line,"smart"));l&&Pt(r,"electricInput",r,n.head.line)}}}function xa(r){for(var o=[],e=[],t=0;t<r.doc.sel.ranges.length;t++){var n=r.doc.sel.ranges[t].head.line,i={anchor:C(n,0),head:C(n+1,0)};e.push(i),o.push(r.getRange(i.anchor,i.head))}return{text:o,ranges:e}}function xl(r,o,e,t){r.setAttribute("autocorrect",e?"on":"off"),r.setAttribute("autocapitalize",t?"on":"off"),r.setAttribute("spellcheck",!!o)}function ba(){var r=T("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),o=T("div",[r],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return P?r.style.width="1000px":r.setAttribute("wrap","off"),ct&&(r.style.border="1px solid black"),o}function bl(r,o,e,t,n){var i=o,l=e,a=ie(r,o.line),s=n&&"rtl"==r.direction?-e:e;function f(M){var D;if("codepoint"==t){var F=a.text.charCodeAt(o.ch+(e>0?0:-1));D=isNaN(F)?null:new C(o.line,Math.max(0,Math.min(a.text.length,o.ch+e*((e>0?F>=55296&&F<56320:F>=56320&&F<57343)?2:1))),-e)}else D=n?function fa(r,o,e,t){var n=at(o,r.doc.direction);if(!n)return Pn(o,e,t);e.ch>=o.text.length?(e.ch=o.text.length,e.sticky="before"):e.ch<=0&&(e.ch=0,e.sticky="after");var i=bt(n,e.ch,e.sticky),l=n[i];if("ltr"==r.doc.direction&&l.level%2==0&&(t>0?l.to>e.ch:l.from<e.ch))return Pn(o,e,t);var s,a=function(k,M){return _i(o,k instanceof C?k.ch:k,M)},u=function(k){return r.options.lineWrapping?(s=s||Gn(r,o),Qo(r,o,s,k)):{begin:0,end:o.text.length}},f=u("before"==e.sticky?a(e,-1):e.ch);if("rtl"==r.doc.direction||1==l.level){var c=1==l.level==t<0,h=a(e,c?1:-1);if(null!=h&&(c?h<=l.to&&h<=f.end:h>=l.from&&h>=f.begin))return new C(e.line,h,c?"before":"after")}var m=function(k,M,D){for(;k>=0&&k<n.length;k+=M){var W=n[k],I=M>0==(1!=W.level),_=I?D.begin:a(D.end,-1);if(W.from<=_&&_<W.to||(_=I?W.from:a(W.to,-1),D.begin<=_&&_<D.end))return q=_,I?new C(e.line,a(q,1),"before"):new C(e.line,q,"after")}var q},y=m(i+t,t,f);if(y)return y;var w=t>0?f.end:a(f.begin,-1);return null==w||t>0&&w==o.text.length||!(y=m(t>0?0:n.length-1,t,u(w)))?null:y}(r.cm,a,o,e):Pn(a,o,e);if(null==D){if(M||!function u(){var M=o.line+s;return!(M<r.first||M>=r.first+r.size)&&(o=new C(M,o.ch,o.sticky),a=ie(r,M))}())return!1;o=To(n,r.cm,a,o.line,s)}else o=D;return!0}if("char"==t||"codepoint"==t)f();else if("column"==t)f(!0);else if("word"==t||"group"==t)for(var c=null,h="group"==t,d=r.cm&&r.cm.getHelper(o,"wordChars"),m=!0;!(e<0)||f(!m);m=!1){var y=a.text.charAt(o.ch)||"\n",w=R(y,d)?"w":h&&"\n"==y?"n":!h||/\s/.test(y)?null:"p";if(h&&!m&&!w&&(w="s"),c&&c!=w){e<0&&(e=1,f(),o.sticky="after");break}if(w&&(c=w),e>0&&!f(!m))break}var k=bo(r,o,i,l,!0);return E(i,k)&&(k.hitSide=!0),k}function As(r,o,e,t){var l,u,n=r.doc,i=o.left;if("page"==t){var a=Math.min(r.display.wrapper.clientHeight,$(r).innerHeight||n(r).documentElement.clientHeight),s=Math.max(a-.5*Ti(r.display),3);l=(e>0?o.bottom:o.top)+e*s}else"line"==t&&(l=e>0?o.bottom+3:o.top-3);for(;(u=Zo(r,i,l)).outside;){if(e<0?l<=0:l>=n.height){u.hitSide=!0;break}l+=5*e}return u}var Xe=function(r){this.cm=r,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new N,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function wa(r,o){var e=Il(r,o.line);if(!e||e.hidden)return null;var t=ie(r.doc,o.line),n=Xo(e,t,o.line),i=at(t,r.doc.direction),l="left";i&&(l=bt(i,o.ch)%2?"right":"left");var s=Br(n.map,o.ch,l);return s.offset="right"==s.collapse?s.end:s.start,s}function ci(r,o){return o&&(r.bad=!0),r}function vn(r,o,e){var t;if(o==r.display.lineDiv){if(!(t=r.display.lineDiv.childNodes[e]))return ci(r.clipPos(C(r.display.viewTo-1)),!0);o=null,e=0}else for(t=o;;t=t.parentNode){if(!t||t==r.display.lineDiv)return null;if(t.parentNode&&t.parentNode==r.display.lineDiv)break}for(var n=0;n<r.display.view.length;n++){var i=r.display.view[n];if(i.node==t)return au(i,o,e)}}function au(r,o,e){var t=r.text.firstChild,n=!1;if(!o||!U(t,o))return ci(C(Re(r.line),0),!0);if(o==t&&(n=!0,o=t.childNodes[e],e=0,!o)){var i=r.rest?xe(r.rest):r.line;return ci(C(Re(i),i.text.length),n)}var l=3==o.nodeType?o:null,a=o;for(!l&&1==o.childNodes.length&&3==o.firstChild.nodeType&&(l=o.firstChild,e&&(e=l.nodeValue.length));a.parentNode!=t;)a=a.parentNode;var s=r.measure,u=s.maps;function f(w,k,M){for(var D=-1;D<(u?u.length:0);D++)for(var F=D<0?s.map:u[D],W=0;W<F.length;W+=3){var I=F[W+2];if(I==w||I==k){var _=Re(D<0?r.line:r.rest[D]),q=F[W]+M;return(M<0||I!=w)&&(q=F[W+(M?1:0)]),C(_,q)}}}var c=f(l,a,e);if(c)return ci(c,n);for(var h=a.nextSibling,d=l?l.nodeValue.length-e:0;h;h=h.nextSibling){if(c=f(h,h.firstChild,0))return ci(C(c.line,c.ch-d),n);d+=h.textContent.length}for(var m=a.previousSibling,y=e;m;m=m.previousSibling){if(c=f(m,m.firstChild,-1))return ci(C(c.line,c.ch+y),n);y+=m.textContent.length}}Xe.prototype.init=function(r){var o=this,e=this,t=e.cm,n=e.div=r.lineDiv;function i(a){for(var s=a.target;s;s=s.parentNode){if(s==n)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(s.className))break}return!1}function l(a){if(i(a)&&!We(t,a)){if(t.somethingSelected())Bn({lineWise:!1,text:t.getSelections()}),"cut"==a.type&&t.replaceSelection("",null,"cut");else{if(!t.options.lineWiseCopyCut)return;var s=xa(t);Bn({lineWise:!0,text:s.text}),"cut"==a.type&&t.operation(function(){t.setSelections(s.ranges,0,se),t.replaceSelection("",null,"cut")})}if(a.clipboardData){a.clipboardData.clearData();var u=gr.text.join("\n");if(a.clipboardData.setData("Text",u),a.clipboardData.getData("Text")==u)return void a.preventDefault()}var f=ba(),c=f.firstChild;xl(c),t.display.lineSpace.insertBefore(f,t.display.lineSpace.firstChild),c.value=gr.text.join("\n");var h=H(v(n));nt(c),setTimeout(function(){t.display.lineSpace.removeChild(f),h.focus(),h==n&&e.showPrimarySelection()},50)}}n.contentEditable=!0,xl(n,t.options.spellcheck,t.options.autocorrect,t.options.autocapitalize),K(n,"paste",function(a){!i(a)||We(t,a)||Fo(a,t)||j<=11&&setTimeout(Bt(t,function(){return o.updateFromDOM()}),20)}),K(n,"compositionstart",function(a){o.composing={data:a.data,done:!1}}),K(n,"compositionupdate",function(a){o.composing||(o.composing={data:a.data,done:!1})}),K(n,"compositionend",function(a){o.composing&&(a.data!=o.composing.data&&o.readFromDOMSoon(),o.composing.done=!0)}),K(n,"touchstart",function(){return e.forceCompositionEnd()}),K(n,"input",function(){o.composing||o.readFromDOMSoon()}),K(n,"copy",l),K(n,"cut",l)},Xe.prototype.screenReaderLabelChanged=function(r){r?this.div.setAttribute("aria-label",r):this.div.removeAttribute("aria-label")},Xe.prototype.prepareSelection=function(){var r=Bl(this.cm,!1);return r.focus=H(v(this.div))==this.div,r},Xe.prototype.showSelection=function(r,o){!r||!this.cm.display.view.length||((r.focus||o)&&this.showPrimarySelection(),this.showMultipleSelections(r))},Xe.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Xe.prototype.showPrimarySelection=function(){var r=this.getSelection(),o=this.cm,e=o.doc.sel.primary(),t=e.from(),n=e.to();if(o.display.viewTo==o.display.viewFrom||t.line>=o.display.viewTo||n.line<o.display.viewFrom)r.removeAllRanges();else{var i=vn(o,r.anchorNode,r.anchorOffset),l=vn(o,r.focusNode,r.focusOffset);if(!i||i.bad||!l||l.bad||0!=O(St(i,l),t)||0!=O(Ie(i,l),n)){var a=o.display.view,s=t.line>=o.display.viewFrom&&wa(o,t)||{node:a[0].measure.map[2],offset:0},u=n.line<o.display.viewTo&&wa(o,n);if(!u){var f=a[a.length-1].measure,c=f.maps?f.maps[f.maps.length-1]:f.map;u={node:c[c.length-1],offset:c[c.length-2]-c[c.length-3]}}if(!s||!u)return void r.removeAllRanges();var d,h=r.rangeCount&&r.getRangeAt(0);try{d=x(s.node,s.offset,u.offset,u.node)}catch{}d&&(!J&&o.state.focused?(r.collapse(s.node,s.offset),d.collapsed||(r.removeAllRanges(),r.addRange(d))):(r.removeAllRanges(),r.addRange(d)),h&&null==r.anchorNode?r.addRange(h):J&&this.startGracePeriod()),this.rememberSelection()}}},Xe.prototype.startGracePeriod=function(){var r=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){r.gracePeriod=!1,r.selectionChanged()&&r.cm.operation(function(){return r.cm.curOp.selectionChanged=!0})},20)},Xe.prototype.showMultipleSelections=function(r){Je(this.cm.display.cursorDiv,r.cursors),Je(this.cm.display.selectionDiv,r.selection)},Xe.prototype.rememberSelection=function(){var r=this.getSelection();this.lastAnchorNode=r.anchorNode,this.lastAnchorOffset=r.anchorOffset,this.lastFocusNode=r.focusNode,this.lastFocusOffset=r.focusOffset},Xe.prototype.selectionInEditor=function(){var r=this.getSelection();if(!r.rangeCount)return!1;var o=r.getRangeAt(0).commonAncestorContainer;return U(this.div,o)},Xe.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&((!this.selectionInEditor()||H(v(this.div))!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Xe.prototype.blur=function(){this.div.blur()},Xe.prototype.getField=function(){return this.div},Xe.prototype.supportsTouch=function(){return!0},Xe.prototype.receivedFocus=function(){var r=this,o=this;this.selectionInEditor()?setTimeout(function(){return r.pollSelection()},20):fr(this.cm,function(){return o.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function e(){o.cm.state.focused&&(o.pollSelection(),o.polling.set(o.cm.options.pollInterval,e))})},Xe.prototype.selectionChanged=function(){var r=this.getSelection();return r.anchorNode!=this.lastAnchorNode||r.anchorOffset!=this.lastAnchorOffset||r.focusNode!=this.lastFocusNode||r.focusOffset!=this.lastFocusOffset},Xe.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var r=this.getSelection(),o=this.cm;if(ft&&ce&&this.cm.display.gutterSpecs.length&&function Qe(r){for(var o=r;o;o=o.parentNode)if(/CodeMirror-gutter-wrapper/.test(o.className))return!0;return!1}(r.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var e=vn(o,r.anchorNode,r.anchorOffset),t=vn(o,r.focusNode,r.focusOffset);e&&t&&fr(o,function(){Qt(o.doc,De(e,t),se),(e.bad||t.bad)&&(o.curOp.selectionChanged=!0)})}}},Xe.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var i,l,a,r=this.cm,o=r.display,e=r.doc.sel.primary(),t=e.from(),n=e.to();if(0==t.ch&&t.line>r.firstLine()&&(t=C(t.line-1,ie(r.doc,t.line-1).length)),n.ch==ie(r.doc,n.line).text.length&&n.line<r.lastLine()&&(n=C(n.line+1,0)),t.line<o.viewFrom||n.line>o.viewTo-1)return!1;t.line==o.viewFrom||0==(i=en(r,t.line))?(l=Re(o.view[0].line),a=o.view[0].node):(l=Re(o.view[i].line),a=o.view[i-1].node.nextSibling);var u,f,s=en(r,n.line);if(s==o.view.length-1?(u=o.viewTo-1,f=o.lineDiv.lastChild):(u=Re(o.view[s+1].line)-1,f=o.view[s+1].node.previousSibling),!a)return!1;for(var c=r.doc.splitLines(function lu(r,o,e,t,n){var i="",l=!1,a=r.doc.lineSeparator(),s=!1;function f(){l&&(i+=a,s&&(i+=a),l=s=!1)}function c(d){d&&(f(),i+=d)}function h(d){if(1==d.nodeType){var m=d.getAttribute("cm-text");if(m)return void c(m);var w,y=d.getAttribute("cm-marker");if(y){var k=r.findMarks(C(t,0),C(n+1,0),function u(d){return function(m){return m.id==d}}(+y));return void(k.length&&(w=k[0].find(0))&&c($e(r.doc,w.from,w.to).join(a)))}if("false"==d.getAttribute("contenteditable"))return;var M=/^(pre|div|p|li|table|br)$/i.test(d.nodeName);if(!/^br$/i.test(d.nodeName)&&0==d.textContent.length)return;M&&f();for(var D=0;D<d.childNodes.length;D++)h(d.childNodes[D]);/^(pre|p)$/i.test(d.nodeName)&&(s=!0),M&&(l=!0)}else 3==d.nodeType&&c(d.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;h(o),o!=e;)o=o.nextSibling,s=!1;return i}(r,a,f,l,u)),h=$e(r.doc,C(l,0),C(u,ie(r.doc,u).text.length));c.length>1&&h.length>1;)if(xe(c)==xe(h))c.pop(),h.pop(),u--;else{if(c[0]!=h[0])break;c.shift(),h.shift(),l++}for(var d=0,m=0,y=c[0],w=h[0],k=Math.min(y.length,w.length);d<k&&y.charCodeAt(d)==w.charCodeAt(d);)++d;for(var M=xe(c),D=xe(h),F=Math.min(M.length-(1==c.length?d:0),D.length-(1==h.length?d:0));m<F&&M.charCodeAt(M.length-m-1)==D.charCodeAt(D.length-m-1);)++m;if(1==c.length&&1==h.length&&l==t.line)for(;d&&d>t.ch&&M.charCodeAt(M.length-m-1)==D.charCodeAt(D.length-m-1);)d--,m++;c[c.length-1]=M.slice(0,M.length-m).replace(/^\u200b+/,""),c[0]=c[0].slice(d).replace(/\u200b+$/,"");var W=C(l,d),I=C(u,h.length?xe(h).length-m:0);return c.length>1||c[0]||O(W,I)?(Yr(r.doc,c,W,I,"+input"),!0):void 0},Xe.prototype.ensurePolled=function(){this.forceCompositionEnd()},Xe.prototype.reset=function(){this.forceCompositionEnd()},Xe.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Xe.prototype.readFromDOMSoon=function(){var r=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(r.readDOMTimeout=null,r.composing){if(!r.composing.done)return;r.composing=null}r.updateFromDOM()},80))},Xe.prototype.updateFromDOM=function(){var r=this;(this.cm.isReadOnly()||!this.pollContent())&&fr(this.cm,function(){return Nt(r.cm)})},Xe.prototype.setUneditable=function(r){r.contentEditable="false"},Xe.prototype.onKeyPress=function(r){0==r.charCode||this.composing||(r.preventDefault(),this.cm.isReadOnly()||Bt(this.cm,mr)(this.cm,String.fromCharCode(null==r.charCode?r.keyCode:r.charCode),0))},Xe.prototype.readOnlyChanged=function(r){this.div.contentEditable=String("nocursor"!=r)},Xe.prototype.onContextMenu=function(){},Xe.prototype.resetPosition=function(){},Xe.prototype.needsContentAttribute=!0;var gt=function(r){this.cm=r,this.prevInput="",this.pollingFast=!1,this.polling=new N,this.hasSelection=!1,this.composing=null,this.resetting=!1};gt.prototype.init=function(r){var o=this,e=this,t=this.cm;this.createField(r);var n=this.textarea;function i(l){if(!We(t,l)){if(t.somethingSelected())Bn({lineWise:!1,text:t.getSelections()});else{if(!t.options.lineWiseCopyCut)return;var a=xa(t);Bn({lineWise:!0,text:a.text}),"cut"==l.type?t.setSelections(a.ranges,null,se):(e.prevInput="",n.value=a.text.join("\n"),nt(n))}"cut"==l.type&&(t.state.cutIncoming=+new Date)}}r.wrapper.insertBefore(this.wrapper,r.wrapper.firstChild),ct&&(n.style.width="0px"),K(n,"input",function(){ee&&j>=9&&o.hasSelection&&(o.hasSelection=null),e.poll()}),K(n,"paste",function(l){We(t,l)||Fo(l,t)||(t.state.pasteIncoming=+new Date,e.fastPoll())}),K(n,"cut",i),K(n,"copy",i),K(r.scroller,"paste",function(l){if(!$r(r,l)&&!We(t,l)){if(!n.dispatchEvent)return t.state.pasteIncoming=+new Date,void e.focus();var a=new Event("paste");a.clipboardData=l.clipboardData,n.dispatchEvent(a)}}),K(r.lineSpace,"selectstart",function(l){$r(r,l)||it(l)}),K(n,"compositionstart",function(){var l=t.getCursor("from");e.composing&&e.composing.range.clear(),e.composing={start:l,range:t.markText(l,t.getCursor("to"),{className:"CodeMirror-composing"})}}),K(n,"compositionend",function(){e.composing&&(e.poll(),e.composing.range.clear(),e.composing=null)})},gt.prototype.createField=function(r){this.wrapper=ba(),this.textarea=this.wrapper.firstChild;var o=this.cm.options;xl(this.textarea,o.spellcheck,o.autocorrect,o.autocapitalize)},gt.prototype.screenReaderLabelChanged=function(r){r?this.textarea.setAttribute("aria-label",r):this.textarea.removeAttribute("aria-label")},gt.prototype.prepareSelection=function(){var r=this.cm,o=r.display,e=r.doc,t=Bl(r);if(r.options.moveInputWithCursor){var n=Sr(r,e.sel.primary().head,"div"),i=o.wrapper.getBoundingClientRect(),l=o.lineDiv.getBoundingClientRect();t.teTop=Math.max(0,Math.min(o.wrapper.clientHeight-10,n.top+l.top-i.top)),t.teLeft=Math.max(0,Math.min(o.wrapper.clientWidth-10,n.left+l.left-i.left))}return t},gt.prototype.showSelection=function(r){var e=this.cm.display;Je(e.cursorDiv,r.cursors),Je(e.selectionDiv,r.selection),null!=r.teTop&&(this.wrapper.style.top=r.teTop+"px",this.wrapper.style.left=r.teLeft+"px")},gt.prototype.reset=function(r){if(!(this.contextMenuPending||this.composing&&r)){var o=this.cm;if(this.resetting=!0,o.somethingSelected()){this.prevInput="";var e=o.getSelection();this.textarea.value=e,o.state.focused&&nt(this.textarea),ee&&j>=9&&(this.hasSelection=e)}else r||(this.prevInput=this.textarea.value="",ee&&j>=9&&(this.hasSelection=null));this.resetting=!1}},gt.prototype.getField=function(){return this.textarea},gt.prototype.supportsTouch=function(){return!1},gt.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!he||H(v(this.textarea))!=this.textarea))try{this.textarea.focus()}catch{}},gt.prototype.blur=function(){this.textarea.blur()},gt.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},gt.prototype.receivedFocus=function(){this.slowPoll()},gt.prototype.slowPoll=function(){var r=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){r.poll(),r.cm.state.focused&&r.slowPoll()})},gt.prototype.fastPoll=function(){var r=!1,o=this;o.pollingFast=!0,o.polling.set(20,function e(){o.poll()||r?(o.pollingFast=!1,o.slowPoll()):(r=!0,o.polling.set(60,e))})},gt.prototype.poll=function(){var r=this,o=this.cm,e=this.textarea,t=this.prevInput;if(this.contextMenuPending||this.resetting||!o.state.focused||yn(e)&&!t&&!this.composing||o.isReadOnly()||o.options.disableInput||o.state.keySeq)return!1;var n=e.value;if(n==t&&!o.somethingSelected())return!1;if(ee&&j>=9&&this.hasSelection===n||Ze&&/[\uf700-\uf7ff]/.test(n))return o.display.input.reset(),!1;if(o.doc.sel==o.display.selForContextMenu){var i=n.charCodeAt(0);if(8203==i&&!t&&(t="\u200b"),8666==i)return this.reset(),this.cm.execCommand("undo")}for(var l=0,a=Math.min(t.length,n.length);l<a&&t.charCodeAt(l)==n.charCodeAt(l);)++l;return fr(o,function(){mr(o,n.slice(l),t.length-l,null,r.composing?"*compose":null),n.length>1e3||n.indexOf("\n")>-1?e.value=r.prevInput="":r.prevInput=n,r.composing&&(r.composing.range.clear(),r.composing.range=o.markText(r.composing.start,o.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},gt.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},gt.prototype.onKeyPress=function(){ee&&j>=9&&(this.hasSelection=null),this.fastPoll()},gt.prototype.onContextMenu=function(r){var o=this,e=o.cm,t=e.display,n=o.textarea;o.contextMenuPending&&o.contextMenuPending();var i=Ln(e,r),l=t.scroller.scrollTop;if(i&&!be){e.options.resetSelectionOnContextMenu&&-1==e.doc.sel.contains(i)&&Bt(e,Qt)(e.doc,De(i),se);var c,s=n.style.cssText,u=o.wrapper.style.cssText,f=o.wrapper.offsetParent.getBoundingClientRect();if(o.wrapper.style.cssText="position: static",n.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(r.clientY-f.top-5)+"px; left: "+(r.clientX-f.left-5)+"px;\n      z-index: 1000; background: "+(ee?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",P&&(c=n.ownerDocument.defaultView.scrollY),t.input.focus(),P&&n.ownerDocument.defaultView.scrollTo(null,c),t.input.reset(),e.somethingSelected()||(n.value=o.prevInput=" "),o.contextMenuPending=d,t.selForContextMenu=e.doc.sel,clearTimeout(t.detectingSelectAll),ee&&j>=9&&h(),lt){Gr(r);var m=function(){ne(window,"mouseup",m),setTimeout(d,20)};K(window,"mouseup",m)}else setTimeout(d,50)}function h(){if(null!=n.selectionStart){var y=e.somethingSelected(),w="\u200b"+(y?n.value:"");n.value="\u21da",n.value=w,o.prevInput=y?"":"\u200b",n.selectionStart=1,n.selectionEnd=w.length,t.selForContextMenu=e.doc.sel}}function d(){if(o.contextMenuPending==d&&(o.contextMenuPending=!1,o.wrapper.style.cssText=u,n.style.cssText=s,ee&&j<9&&t.scrollbars.setScrollTop(t.scroller.scrollTop=l),null!=n.selectionStart)){(!ee||ee&&j<9)&&h();var y=0,w=function(){t.selForContextMenu==e.doc.sel&&0==n.selectionStart&&n.selectionEnd>0&&"\u200b"==o.prevInput?Bt(e,wo)(e):y++<10?t.detectingSelectAll=setTimeout(w,500):(t.selForContextMenu=null,t.input.reset())};t.detectingSelectAll=setTimeout(w,200)}}},gt.prototype.readOnlyChanged=function(r){r||this.reset(),this.textarea.disabled="nocursor"==r,this.textarea.readOnly=!!r},gt.prototype.setUneditable=function(){},gt.prototype.needsContentAttribute=!1,function Ms(r){var o=r.optionHandlers;function e(t,n,i,l){r.defaults[t]=n,i&&(o[t]=l?function(a,s,u){u!=Ui&&i(a,s,u)}:i)}r.defineOption=e,r.Init=Ui,e("value","",function(t,n){return t.setValue(n)},!0),e("mode",null,function(t,n){t.doc.modeOption=n,ll(t)},!0),e("indentUnit",2,ll,!0),e("indentWithTabs",!1),e("smartIndent",!0),e("tabSize",4,function(t){vo(t),ki(t),Nt(t)},!0),e("lineSeparator",null,function(t,n){if(t.doc.lineSep=n,n){var i=[],l=t.doc.first;t.doc.iter(function(s){for(var u=0;;){var f=s.text.indexOf(n,u);if(-1==f)break;u=f+n.length,i.push(C(l,f))}l++});for(var a=i.length-1;a>=0;a--)Yr(t.doc,n,i[a],C(i[a].line,i[a].ch+n.length))}}),e("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(t,n,i){t.state.specialChars=new RegExp(n.source+(n.test("\t")?"":"|\t"),"g"),i!=Ui&&t.refresh()}),e("specialCharPlaceholder",Wa,function(t){return t.refresh()},!0),e("electricChars",!0),e("inputStyle",he?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),e("spellcheck",!1,function(t,n){return t.getInputField().spellcheck=n},!0),e("autocorrect",!1,function(t,n){return t.getInputField().autocorrect=n},!0),e("autocapitalize",!1,function(t,n){return t.getInputField().autocapitalize=n},!0),e("rtlMoveVisually",!er),e("wholeLineUpdateBefore",!0),e("theme","default",function(t){ma(t),ei(t)},!0),e("keyMap","default",function(t,n,i){var l=Lo(n),a=i!=Ui&&Lo(i);a&&a.detach&&a.detach(t,l),l.attach&&l.attach(t,a||null)}),e("extraKeys",null),e("configureMouse",null),e("lineWrapping",!1,iu,!0),e("gutters",[],function(t,n){t.display.gutterSpecs=ol(n,t.options.lineNumbers),ei(t)},!0),e("fixedGutter",!0,function(t,n){t.display.gutters.style.left=n?kn(t.display)+"px":"0",t.refresh()},!0),e("coverGutterNextToScrollbar",!1,function(t){return Lr(t)},!0),e("scrollbarStyle","native",function(t){Ul(t),Lr(t),t.display.scrollbars.setScrollTop(t.doc.scrollTop),t.display.scrollbars.setScrollLeft(t.doc.scrollLeft)},!0),e("lineNumbers",!1,function(t,n){t.display.gutterSpecs=ol(t.options.gutters,n),ei(t)},!0),e("firstLineNumber",1,ei,!0),e("lineNumberFormatter",function(t){return t},ei,!0),e("showCursorWhenSelecting",!1,so,!0),e("resetSelectionOnContextMenu",!0),e("lineWiseCopyCut",!0),e("pasteLinesPerSelection",!0),e("selectionsMayTouch",!1),e("readOnly",!1,function(t,n){"nocursor"==n&&(Mn(t),t.display.input.blur()),t.display.input.readOnlyChanged(n)}),e("screenReaderLabel",null,function(t,n){t.display.input.screenReaderLabelChanged(n=""===n?null:n)}),e("disableInput",!1,function(t,n){n||t.display.input.reset()},!0),e("dragDrop",!0,ml),e("allowDropFileTypes",null),e("cursorBlinkRate",530),e("cursorScrollMargin",0),e("cursorHeight",1,so,!0),e("singleCursorHeightPerLine",!0,so,!0),e("workTime",100),e("workDelay",100),e("flattenSpans",!0,vo,!0),e("addModeClass",!1,vo,!0),e("pollInterval",100),e("undoDepth",200,function(t,n){return t.doc.history.undoDepth=n}),e("historyEventDelay",1250),e("viewportMargin",10,function(t){return t.refresh()},!0),e("maxHighlightLength",1e4,vo,!0),e("moveInputWithCursor",!0,function(t,n){n||t.display.input.resetPosition()}),e("tabindex",null,function(t,n){return t.display.input.getField().tabIndex=n||""}),e("autofocus",null),e("direction","ltr",function(t,n){return t.doc.setDirection(n)},!0),e("phrases",null)}(vt),function Ds(r){var o=r.optionHandlers,e=r.helpers={};r.prototype={constructor:r,focus:function(){$(this).focus(),this.display.input.focus()},setOption:function(t,n){var i=this.options,l=i[t];i[t]==n&&"mode"!=t||(i[t]=n,o.hasOwnProperty(t)&&Bt(this,o[t])(this,n,l),Ve(this,"optionChange",this,t))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,n){this.state.keyMaps[n?"push":"unshift"](Lo(t))},removeKeyMap:function(t){for(var n=this.state.keyMaps,i=0;i<n.length;++i)if(n[i]==t||n[i].name==t)return n.splice(i,1),!0},addOverlay:et(function(t,n){var i=t.token?t:r.getMode(this.options,t);if(i.startState)throw new Error("Overlays may not be stateful.");(function Le(r,o,e){for(var t=0,n=e(o);t<r.length&&e(r[t])<=n;)t++;r.splice(t,0,o)})(this.state.overlays,{mode:i,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},function(l){return l.priority}),this.state.modeGen++,Nt(this)}),removeOverlay:et(function(t){for(var n=this.state.overlays,i=0;i<n.length;++i){var l=n[i].modeSpec;if(l==t||"string"==typeof t&&l.name==t)return n.splice(i,1),this.state.modeGen++,void Nt(this)}}),indentLine:et(function(t,n,i){"string"!=typeof n&&"number"!=typeof n&&(n=null==n?this.options.smartIndent?"smart":"prev":n?"add":"subtract"),p(this.doc,t)&&Eo(this,t,n,i)}),indentSelection:et(function(t){for(var n=this.doc.sel.ranges,i=-1,l=0;l<n.length;l++){var a=n[l];if(a.empty())a.head.line>i&&(Eo(this,a.head.line,t,!0),i=a.head.line,l==this.doc.sel.primIndex&&Dn(this));else{var s=a.from(),u=a.to(),f=Math.max(i,s.line);i=Math.min(this.lastLine(),u.line-(u.ch?0:1))+1;for(var c=f;c<i;++c)Eo(this,c,t);var h=this.doc.sel.ranges;0==s.ch&&n.length==h.length&&h[l].from().ch>0&&Oi(this.doc,l,new Ke(s,h[l].to()),se)}}}),getTokenAt:function(t,n){return Bo(this,t,n)},getLineTokens:function(t,n){return Bo(this,C(t),n,!0)},getTokenTypeAt:function(t){t=pe(this.doc,t);var s,n=Wr(this,ie(this.doc,t.line)),i=0,l=(n.length-1)/2,a=t.ch;if(0==a)s=n[2];else for(;;){var u=i+l>>1;if((u?n[2*u-1]:0)>=a)l=u;else{if(!(n[2*u+1]<a)){s=n[2*u+2];break}i=u+1}}var f=s?s.indexOf("overlay "):-1;return f<0?s:0==f?null:s.slice(0,f-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?r.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(t,n){return this.getHelpers(t,n)[0]},getHelpers:function(t,n){var i=[];if(!e.hasOwnProperty(n))return i;var l=e[n],a=this.getModeAt(t);if("string"==typeof a[n])l[a[n]]&&i.push(l[a[n]]);else if(a[n])for(var s=0;s<a[n].length;s++){var u=l[a[n][s]];u&&i.push(u)}else a.helperType&&l[a.helperType]?i.push(l[a.helperType]):l[a.name]&&i.push(l[a.name]);for(var f=0;f<l._global.length;f++){var c=l._global[f];c.pred(a,this)&&-1==A(i,c.val)&&i.push(c.val)}return i},getStateAfter:function(t,n){var i=this.doc;return gi(this,(t=tr(i,t??i.first+i.size-1))+1,n).state},cursorCoords:function(t,n){var l=this.doc.sel.primary();return Sr(this,null==t?l.head:"object"==typeof t?pe(this.doc,t):t?l.from():l.to(),n||"page")},charCoords:function(t,n){return Kn(this,pe(this.doc,t),n||"page")},coordsChar:function(t,n){return Zo(this,(t=qo(this,t,n||"page")).left,t.top)},lineAtHeight:function(t,n){return t=qo(this,{top:t,left:0},n||"page").top,Ht(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,n,i){var a,l=!1;if("number"==typeof t){var s=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>s&&(t=s,l=!0),a=ie(this.doc,t)}else a=t;return io(this,a,{top:0,left:0},n||"page",i||l).top+(l?this.doc.height-rr(a):0)},defaultTextHeight:function(){return Ti(this.display)},defaultCharWidth:function(){return kr(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(t,n,i,l,a){var s=this.display,u=(t=Sr(this,pe(this.doc,t))).bottom,f=t.left;if(n.style.position="absolute",n.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(n),s.sizer.appendChild(n),"over"==l)u=t.top;else if("above"==l||"near"==l){var c=Math.max(s.wrapper.clientHeight,this.doc.height),h=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth);("above"==l||t.bottom+n.offsetHeight>c)&&t.top>n.offsetHeight?u=t.top-n.offsetHeight:t.bottom+n.offsetHeight<=c&&(u=t.bottom),f+n.offsetWidth>h&&(f=h-n.offsetWidth)}n.style.top=u+"px",n.style.left=n.style.right="","right"==a?(f=s.sizer.clientWidth-n.offsetWidth,n.style.right="0px"):("left"==a?f=0:"middle"==a&&(f=(s.sizer.clientWidth-n.offsetWidth)/2),n.style.left=f+"px"),i&&function Gs(r,o){var e=_l(r,o);null!=e.scrollTop&&Nn(r,e.scrollTop),null!=e.scrollLeft&&_r(r,e.scrollLeft)}(this,{left:f,top:u,right:f+n.offsetWidth,bottom:u+n.offsetHeight})},triggerOnKeyDown:et(bs),triggerOnKeyPress:et(ws),triggerOnKeyUp:da,triggerOnMouseDown:et(Gi),execCommand:function(t){if(ui.hasOwnProperty(t))return ui[t].call(null,this)},triggerElectric:et(function(t){yl(this,t)}),findPosH:function(t,n,i,l){var a=1;n<0&&(a=-1,n=-n);for(var s=pe(this.doc,t),u=0;u<n&&!(s=bl(this.doc,s,a,i,l)).hitSide;++u);return s},moveH:et(function(t,n){var i=this;this.extendSelectionsBy(function(l){return i.display.shift||i.doc.extend||l.empty()?bl(i.doc,l.head,t,n,i.options.rtlMoveVisually):t<0?l.from():l.to()},ht)}),deleteH:et(function(t,n){var l=this.doc;this.doc.sel.somethingSelected()?l.replaceSelection("",null,"+delete"):si(this,function(a){var s=bl(l,a.head,t,n,!1);return t<0?{from:s,to:a.head}:{from:a.head,to:s}})}),findPosV:function(t,n,i,l){var a=1,s=l;n<0&&(a=-1,n=-n);for(var u=pe(this.doc,t),f=0;f<n;++f){var c=Sr(this,u,"div");if(null==s?s=c.left:c.left=s,(u=As(this,c,a,i)).hitSide)break}return u},moveV:et(function(t,n){var i=this,l=this.doc,a=[],s=!this.display.shift&&!l.extend&&l.sel.somethingSelected();if(l.extendSelectionsBy(function(f){if(s)return t<0?f.from():f.to();var c=Sr(i,f.head,"div");null!=f.goalColumn&&(c.left=f.goalColumn),a.push(c.left);var h=As(i,c,t,n);return"page"==n&&f==l.sel.primary()&&zl(i,Kn(i,h,"div").top-c.top),h},ht),a.length)for(var u=0;u<l.sel.ranges.length;u++)l.sel.ranges[u].goalColumn=a[u]}),findWordAt:function(t){var i=ie(this.doc,t.line).text,l=t.ch,a=t.ch;if(i){var s=this.getHelper(t,"wordChars");"before"!=t.sticky&&a!=i.length||!l?++a:--l;for(var u=i.charAt(l),f=R(u,s)?function(c){return R(c,s)}:/\s/.test(u)?function(c){return/\s/.test(c)}:function(c){return!/\s/.test(c)&&!R(c)};l>0&&f(i.charAt(l-1));)--l;for(;a<i.length&&f(i.charAt(a));)++a}return new Ke(C(t.line,l),C(t.line,a))},toggleOverwrite:function(t){null!=t&&t==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?re(this.display.cursorDiv,"CodeMirror-overwrite"):Wt(this.display.cursorDiv,"CodeMirror-overwrite"),Ve(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==H(S(this))},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:et(function(t,n){Zn(this,t,n)}),getScrollInfo:function(){var t=this.display.scroller;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-br(this)-this.display.barHeight,width:t.scrollWidth-br(this)-this.display.barWidth,clientHeight:wr(this),clientWidth:Cn(this)}},scrollIntoView:et(function(t,n){null==t?(t={from:this.doc.sel.primary().head,to:null},null==n&&(n=this.options.cursorScrollMargin)):"number"==typeof t?t={from:C(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),t.margin=n||0,null!=t.from.line?function Ai(r,o){An(r),r.curOp.scrollToPos=o}(this,t):Ja(this,t.from,t.to,t.margin)}),setSize:et(function(t,n){var i=this,l=function(s){return"number"==typeof s||/^\d+$/.test(String(s))?s+"px":s};null!=t&&(this.display.wrapper.style.width=l(t)),null!=n&&(this.display.wrapper.style.height=l(n)),this.options.lineWrapping&&Xa(this);var a=this.display.viewFrom;this.doc.iter(a,this.display.viewTo,function(s){if(s.widgets)for(var u=0;u<s.widgets.length;u++)if(s.widgets[u].noHScroll){ur(i,a,"widget");break}++a}),this.curOp.forceUpdate=!0,Ve(this,"refresh",this)}),operation:function(t){return fr(this,t)},startOperation:function(){return En(this)},endOperation:function(){return Qn(this)},refresh:et(function(){var t=this.display.cachedTextHeight;Nt(this),this.curOp.forceUpdate=!0,ki(this),Zn(this,this.doc.scrollLeft,this.doc.scrollTop),ho(this.display),(null==t||Math.abs(t-Ti(this.display))>.5||this.options.lineWrapping)&&lo(this),Ve(this,"refresh",this)}),swapDoc:et(function(t){var n=this.doc;return n.cm=null,this.state.selectingText&&this.state.selectingText(),sl(this,t),ki(this),this.display.input.reset(),Zn(this,t.scrollLeft,t.scrollTop),this.curOp.forceScroll=!0,Pt(this,"swapDoc",this,n),n}),phrase:function(t){var n=this.options.phrases;return n&&Object.prototype.hasOwnProperty.call(n,t)?n[t]:t},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Zt(r),r.registerHelper=function(t,n,i){e.hasOwnProperty(t)||(e[t]=r[t]={_global:[]}),e[t][n]=i},r.registerGlobalHelper=function(t,n,i,l){r.registerHelper(t,n,l),e[t]._global.push({pred:i,val:l})}}(vt);var uu="iter insert remove copy getEditor constructor".split(" ");for(var wl in ir.prototype)ir.prototype.hasOwnProperty(wl)&&A(uu,wl)<0&&(vt.prototype[wl]=function(r){return function(){return r.apply(this.doc,arguments)}}(ir.prototype[wl]));return Zt(ir),vt.inputStyles={textarea:gt,contenteditable:Xe},vt.defineMode=function(r){!vt.defaults.mode&&"null"!=r&&(vt.defaults.mode=r),pi.apply(this,arguments)},vt.defineMIME=function Nr(r,o){xn[r]=o},vt.defineMode("null",function(){return{token:function(r){return r.skipToEnd()}}}),vt.defineMIME("text/plain","null"),vt.defineExtension=function(r,o){vt.prototype[r]=o},vt.defineDocExtension=function(r,o){ir.prototype[r]=o},vt.fromTextArea=function su(r,o){if((o=o?z(o):{}).value=r.value,!o.tabindex&&r.tabIndex&&(o.tabindex=r.tabIndex),!o.placeholder&&r.placeholder&&(o.placeholder=r.placeholder),null==o.autofocus){var e=H(v(r));o.autofocus=e==r||null!=r.getAttribute("autofocus")&&e==document.body}function t(){r.value=a.getValue()}var n;if(r.form&&(K(r.form,"submit",t),!o.leaveSubmitMethodAlone)){var i=r.form;n=i.submit;try{var l=i.submit=function(){t(),i.submit=n,i.submit(),i.submit=l}}catch{}}o.finishInit=function(s){s.save=t,s.getTextArea=function(){return r},s.toTextArea=function(){s.toTextArea=isNaN,t(),r.parentNode.removeChild(s.getWrapperElement()),r.style.display="",r.form&&(ne(r.form,"submit",t),!o.leaveSubmitMethodAlone&&"function"==typeof r.form.submit&&(r.form.submit=n))}},r.style.display="none";var a=vt(function(s){return r.parentNode.insertBefore(s,r.nextSibling)},o);return a},function Lt(r){r.off=ne,r.on=K,r.wheelEventPixels=nn,r.Doc=ir,r.splitLines=Rn,r.countColumn=V,r.findColumn=Yt,r.isWordChar=L,r.Pass=B,r.signal=Ve,r.Line=Vr,r.changeEnd=Ut,r.scrollbarModel=Jn,r.Pos=C,r.cmpPos=O,r.modes=hr,r.mimeModes=xn,r.resolveMode=ar,r.getMode=Zr,r.modeExtensions=Er,r.extendMode=vi,r.copyState=sr,r.startState=Fr,r.innerMode=bn,r.commands=ui,r.keyMap=Mr,r.keyName=ua,r.isModifierKey=vs,r.lookupKey=Ri,r.normalizeKeyMap=dn,r.StringStream=pt,r.SharedTextMarker=Tr,r.TextMarker=In,r.LineWidget=cn,r.e_preventDefault=it,r.e_stopPropagation=yr,r.e_stop=Gr,r.addClass=re,r.contains=U,r.rmClass=Wt,r.keyNames=Hn}(vt),vt.version="5.65.19",vt}()},1471:(hi,mt,ge)=>{!function(J){"use strict";J.defineMode("javascript",function(je,G){var ct,ft,ue=je.indentUnit,ee=G.statementIndent,j=G.jsonld,P=G.json||j,Me=!1!==G.trackScope,ce=G.typescript,Ge=G.wordCharacters||/[\w$\xa1-\uffff]/,be=function(){function p(St){return{type:St,style:"keyword"}}var b=p("keyword a"),C=p("keyword b"),O=p("keyword c"),E=p("keyword d"),Z=p("operator"),Ie={type:"atom",style:"atom"};return{if:p("if"),while:b,with:b,else:C,do:C,try:C,finally:C,return:E,break:E,continue:E,new:p("new"),delete:O,void:O,throw:O,debugger:p("debugger"),var:p("var"),const:p("var"),let:p("var"),function:p("function"),catch:p("catch"),for:p("for"),switch:p("switch"),case:p("case"),default:p("default"),in:Z,typeof:Z,instanceof:Z,true:Ie,false:Ie,null:Ie,undefined:Ie,NaN:Ie,Infinity:Ie,this:p("this"),class:p("class"),super:p("atom"),yield:O,export:p("export"),import:p("import"),extends:O,await:O}}(),de=/[+\-*&%=<>!?|~^@]/,Se=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function he(p,b,C){return ct=p,ft=C,b}function Ze(p,b){var C=p.next();if('"'==C||"'"==C)return b.tokenize=function $t(p){return function(b,C){var E,O=!1;if(j&&"@"==b.peek()&&b.match(Se))return C.tokenize=Ze,he("jsonld-keyword","meta");for(;null!=(E=b.next())&&(E!=p||O);)O=!O&&"\\"==E;return O||(C.tokenize=Ze),he("string","string")}}(C),b.tokenize(p,b);if("."==C&&p.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return he("number","number");if("."==C&&p.match(".."))return he("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(C))return he(C);if("="==C&&p.eat(">"))return he("=>","operator");if("0"==C&&p.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return he("number","number");if(/\d/.test(C))return p.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),he("number","number");if("/"==C)return p.eat("*")?(b.tokenize=er,er(p,b)):p.eat("/")?(p.skipToEnd(),he("comment","comment")):Ht(p,b,1)?(function qe(p){for(var C,b=!1,O=!1;null!=(C=p.next());){if(!b){if("/"==C&&!O)return;"["==C?O=!0:O&&"]"==C&&(O=!1)}b=!b&&"\\"==C}}(p),p.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),he("regexp","string-2")):(p.eat("="),he("operator","operator",p.current()));if("`"==C)return b.tokenize=rt,rt(p,b);if("#"==C&&"!"==p.peek())return p.skipToEnd(),he("meta","meta");if("#"==C&&p.eatWhile(Ge))return he("variable","property");if("<"==C&&p.match("!--")||"-"==C&&p.match("->")&&!/\S/.test(p.string.slice(0,p.start)))return p.skipToEnd(),he("comment","comment");if(de.test(C))return(">"!=C||!b.lexical||">"!=b.lexical.type)&&(p.eat("=")?("!"==C||"="==C)&&p.eat("="):/[<>*+\-|&?]/.test(C)&&(p.eat(C),">"==C&&p.eat(C))),"?"==C&&p.eat(".")?he("."):he("operator","operator",p.current());if(Ge.test(C)){p.eatWhile(Ge);var O=p.current();if("."!=b.lastType){if(be.propertyIsEnumerable(O)){var E=be[O];return he(E.type,E.style,O)}if("async"==O&&p.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return he("async","keyword",O)}return he("variable","variable",O)}}function er(p,b){for(var O,C=!1;O=p.next();){if("/"==O&&C){b.tokenize=Ze;break}C="*"==O}return he("comment","comment")}function rt(p,b){for(var O,C=!1;null!=(O=p.next());){if(!C&&("`"==O||"$"==O&&p.eat("{"))){b.tokenize=Ze;break}C=!C&&"\\"==O}return he("quasi","string-2",p.current())}function lt(p,b){b.fatArrowAt&&(b.fatArrowAt=null);var C=p.string.indexOf("=>",p.start);if(!(C<0)){if(ce){var O=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(p.string.slice(p.start,C));O&&(C=O.index)}for(var E=0,Z=!1,Ie=C-1;Ie>=0;--Ie){var St=p.string.charAt(Ie),tr="([{}])".indexOf(St);if(tr>=0&&tr<3){if(!E){++Ie;break}if(0==--E){"("==St&&(Z=!0);break}}else if(tr>=3&&tr<6)++E;else if(Ge.test(St))Z=!0;else if(/["'\/`]/.test(St))for(;;--Ie){if(0==Ie)return;if(p.string.charAt(Ie-1)==St&&"\\"!=p.string.charAt(Ie-2)){Ie--;break}}else if(Z&&!E){++Ie;break}}Z&&!E&&(b.fatArrowAt=Ie)}}var g={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function Wt(p,b,C,O,E,Z){this.indented=p,this.column=b,this.type=C,this.prev=E,this.info=Z,null!=O&&(this.align=O)}function ae(p,b){if(!Me)return!1;for(var C=p.localVars;C;C=C.next)if(C.name==b)return!0;for(var O=p.context;O;O=O.prev)for(C=O.vars;C;C=C.next)if(C.name==b)return!0}function Je(p,b,C,O,E){var Z=p.cc;for(T.state=p,T.stream=E,T.marked=null,T.cc=Z,T.style=b,p.lexical.hasOwnProperty("align")||(p.lexical.align=!0);;)if((Z.length?Z.pop():P?B:A)(C,O)){for(;Z.length&&Z[Z.length-1].lex;)Z.pop()();return T.marked?T.marked:"variable"==C&&ae(p,O)?"variable-2":b}}var T={state:null,column:null,marked:null,cc:null};function te(){for(var p=arguments.length-1;p>=0;p--)T.cc.push(arguments[p])}function x(){return te.apply(null,arguments),!0}function U(p,b){for(var C=b;C;C=C.next)if(C.name==p)return!0;return!1}function H(p){var b=T.state;if(T.marked="def",Me){if(b.context)if("var"==b.lexical.info&&b.context&&b.context.block){var C=re(p,b.context);if(null!=C)return void(b.context=C)}else if(!U(p,b.localVars))return void(b.localVars=new yt(p,b.localVars));G.globalVars&&!U(p,b.globalVars)&&(b.globalVars=new yt(p,b.globalVars))}}function re(p,b){if(b){if(b.block){var C=re(p,b.prev);return C?C==b.prev?b:new nt(C,b.vars,!0):null}return U(p,b.vars)?b:new nt(b.prev,new yt(p,b.vars),!1)}return null}function Q(p){return"public"==p||"private"==p||"protected"==p||"abstract"==p||"readonly"==p}function nt(p,b,C){this.prev=p,this.vars=b,this.block=C}function yt(p,b){this.name=p,this.next=b}var S=new yt("this",new yt("arguments",null));function v(){T.state.context=new nt(T.state.context,T.state.localVars,!1),T.state.localVars=S}function $(){T.state.context=new nt(T.state.context,T.state.localVars,!0),T.state.localVars=null}function ye(){T.state.localVars=T.state.context.vars,T.state.context=T.state.context.prev}function z(p,b){var C=function(){var O=T.state,E=O.indented;if("stat"==O.lexical.type)E=O.lexical.indented;else for(var Z=O.lexical;Z&&")"==Z.type&&Z.align;Z=Z.prev)E=Z.indented;O.lexical=new Wt(E,T.stream.column(),p,null,O.lexical,b)};return C.lex=!0,C}function V(){var p=T.state;p.lexical.prev&&(")"==p.lexical.type&&(p.indented=p.lexical.indented),p.lexical=p.lexical.prev)}function N(p){return function b(C){return C==p?x():";"==p||"}"==C||")"==C||"]"==C?te():x(b)}}function A(p,b){return"var"==p?x(z("vardef",b),Gr,N(";"),V):"keyword a"==p?x(z("form"),Ce,A,V):"keyword b"==p?x(z("form"),A,V):"keyword d"==p?T.stream.match(/^\s*$/,!1)?x():x(z("stat"),Yt,N(";"),V):"debugger"==p?x(N(";")):"{"==p?x(z("}"),$,dt,V,ye):";"==p?x():"if"==p?("else"==T.state.lexical.info&&T.state.cc[T.state.cc.length-1]==V&&T.state.cc.pop()(),x(z("form"),Ce,A,V,mn)):"function"==p?x(xr):"for"==p?x(z("form"),$,Wo,A,ye,V):"class"==p||ce&&"interface"==b?(T.marked="keyword",x(z("form","class"==p?p:b),pi,V)):"variable"==p?ce&&"declare"==b?(T.marked="keyword",x(A)):ce&&("module"==b||"enum"==b||"type"==b)&&T.stream.match(/^\s*\w/,!1)?(T.marked="keyword","enum"==b?x(oe):"type"==b?x(Io,N("operator"),K,N(";")):x(z("form"),Jt,N("{"),z("}"),dt,V,V)):ce&&"namespace"==b?(T.marked="keyword",x(z("form"),B,A,V)):ce&&"abstract"==b?(T.marked="keyword",x(A)):x(z("stat"),R):"switch"==p?x(z("form"),Ce,N("{"),z("}","switch"),$,dt,V,V,ye):"case"==p?x(B,N(":")):"default"==p?x(N(":")):"catch"==p?x(z("form"),v,le,A,V,ye):"export"==p?x(z("stat"),Er,V):"import"==p?x(z("stat"),sr,V):"async"==p?x(A):"@"==b?x(B,A):te(z("stat"),B,N(";"),V)}function le(p){if("("==p)return x(hr,N(")"))}function B(p,b){return ht(p,b,!1)}function se(p,b){return ht(p,b,!0)}function Ce(p){return"("!=p?te():x(z(")"),Yt,N(")"),V)}function ht(p,b,C){if(T.state.fatArrowAt==T.stream.start){var O=C?qt:Le;if("("==p)return x(v,z(")"),Ue(hr,")"),V,N("=>"),O,ye);if("variable"==p)return te(v,Jt,N("=>"),O,ye)}var E=C?Et:Ct;return g.hasOwnProperty(p)?x(E):"function"==p?x(xr,E):"class"==p||ce&&"interface"==b?(T.marked="keyword",x(z("form"),xn,V)):"keyword c"==p||"async"==p?x(C?se:B):"("==p?x(z(")"),Yt,N(")"),V,E):"operator"==p||"spread"==p?x(C?se:B):"["==p?x(z("]"),$e,V,E):"{"==p?zt(we,"}",null,E):"quasi"==p?te(xe,E):"new"==p?x(function X(p){return function(b){return"."==b?x(p?L:Ae):"variable"==b&&ce?x(it,p?Et:Ct):te(p?se:B)}}(C)):x()}function Yt(p){return p.match(/[;\}\)\],]/)?te():te(B)}function Ct(p,b){return","==p?x(Yt):Et(p,b,!1)}function Et(p,b,C){var O=0==C?Ct:Et,E=0==C?B:se;if("=>"==p)return x(v,C?qt:Le,ye);if("operator"==p)return/\+\+|--/.test(b)||ce&&"!"==b?x(O):ce&&"<"==b&&T.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?x(z(">"),Ue(K,">"),V,O):"?"==b?x(B,N(":"),E):x(E);if("quasi"==p)return te(xe,O);if(";"!=p){if("("==p)return zt(se,")","call",O);if("."==p)return x(Y,O);if("["==p)return x(z("]"),Yt,N("]"),V,O);if(ce&&"as"==b)return T.marked="keyword",x(K,O);if("regexp"==p)return T.state.lastType=T.marked="operator",T.stream.backUp(T.stream.pos-T.stream.start-1),x(E)}}function xe(p,b){return"quasi"!=p?te():"${"!=b.slice(b.length-2)?x(xe):x(Yt,nr)}function nr(p){if("}"==p)return T.marked="string-2",T.state.tokenize=rt,x(xe)}function Le(p){return lt(T.stream,T.state),te("{"==p?A:B)}function qt(p){return lt(T.stream,T.state),te("{"==p?A:se)}function Ae(p,b){if("target"==b)return T.marked="keyword",x(Ct)}function L(p,b){if("target"==b)return T.marked="keyword",x(Et)}function R(p){return":"==p?x(V,A):te(Ct,N(";"),V)}function Y(p){if("variable"==p)return T.marked="property",x()}function we(p,b){return"async"==p?(T.marked="property",x(we)):"variable"==p||"keyword"==T.style?(T.marked="property","get"==b||"set"==b?x(Te):(ce&&T.state.fatArrowAt==T.stream.start&&(C=T.stream.match(/^\s*:\s*/,!1))&&(T.state.fatArrowAt=T.stream.pos+C[0].length),x(_t))):"number"==p||"string"==p?(T.marked=j?"property":T.style+" property",x(_t)):"jsonld-keyword"==p?x(_t):ce&&Q(b)?(T.marked="keyword",x(we)):"["==p?x(B,bt,N("]"),_t):"spread"==p?x(se,_t):"*"==b?(T.marked="keyword",x(we)):":"==p?te(_t):void 0;var C}function Te(p){return"variable"!=p?te(_t):(T.marked="property",x(xr))}function _t(p){return":"==p?x(se):"("==p?te(xr):void 0}function Ue(p,b,C){function O(E,Z){if(C?C.indexOf(E)>-1:","==E){var Ie=T.state.lexical;return"call"==Ie.info&&(Ie.pos=(Ie.pos||0)+1),x(function(St,tr){return St==b||tr==b?te():te(p)},O)}return E==b||Z==b?x():C&&C.indexOf(";")>-1?te(p):x(N(b))}return function(E,Z){return E==b||Z==b?x():te(p,O)}}function zt(p,b,C){for(var O=3;O<arguments.length;O++)T.cc.push(arguments[O]);return x(z(b,C),Ue(p,b),V)}function dt(p){return"}"==p?x():te(A,dt)}function bt(p,b){if(ce){if(":"==p)return x(K);if("?"==b)return x(bt)}}function At(p,b){if(ce&&(":"==p||"in"==b))return x(K)}function at(p){if(ce&&":"==p)return T.stream.match(/^\s*\w+\s+is\b/,!1)?x(B,Oo,K):x(K)}function Oo(p,b){if("is"==b)return T.marked="keyword",x()}function K(p,b){return"keyof"==b||"typeof"==b||"infer"==b||"readonly"==b?(T.marked="keyword",x("typeof"==b?se:K)):"variable"==p||"void"==b?(T.marked="type",x(Zt)):"|"==b||"&"==b?x(K):"string"==p||"number"==p||"atom"==p?x(Zt):"["==p?x(z("]"),Ue(K,"]",","),V,Zt):"{"==p?x(z("}"),ne,V,Zt):"("==p?x(Ue(Be,")"),di,Zt):"<"==p?x(Ue(K,">"),K):"quasi"==p?te(We,Zt):void 0}function di(p){if("=>"==p)return x(K)}function ne(p){return p.match(/[\}\)\]]/)?x():","==p||";"==p?x(ne):te(Ve,ne)}function Ve(p,b){return"variable"==p||"keyword"==T.style?(T.marked="property",x(Ve)):"?"==b||"number"==p||"string"==p?x(Ve):":"==p?x(K):"["==p?x(N("variable"),At,N("]"),Ve):"("==p?te(Ur,Ve):p.match(/[;\}\)\],]/)?void 0:x()}function We(p,b){return"quasi"!=p?te():"${"!=b.slice(b.length-2)?x(We):x(K,xt)}function xt(p){if("}"==p)return T.marked="string-2",T.state.tokenize=rt,x(We)}function Be(p,b){return"variable"==p&&T.stream.match(/^\s*[?:]/,!1)||"?"==b?x(Be):":"==p?x(K):"spread"==p?x(Be):te(K)}function Zt(p,b){return"<"==b?x(z(">"),Ue(K,">"),V,Zt):"|"==b||"."==p||"&"==b?x(K):"["==p?x(K,N("]"),Zt):"extends"==b||"implements"==b?(T.marked="keyword",x(K)):"?"==b?x(K,N(":"),K):void 0}function it(p,b){if("<"==b)return x(z(">"),Ue(K,">"),V,Zt)}function yr(){return te(K,It)}function It(p,b){if("="==b)return x(K)}function Gr(p,b){return"enum"==b?(T.marked="keyword",x(oe)):te(Jt,bt,cr,Sl)}function Jt(p,b){return ce&&Q(b)?(T.marked="keyword",x(Jt)):"variable"==p?(H(b),x()):"spread"==p?x(Jt):"["==p?zt(Ki,"]"):"{"==p?zt(qr,"}"):void 0}function qr(p,b){return"variable"!=p||T.stream.match(/^\s*:/,!1)?("variable"==p&&(T.marked="property"),"spread"==p?x(Jt):"}"==p?te():"["==p?x(B,N("]"),N(":"),qr):x(N(":"),Jt,cr)):(H(b),x(cr))}function Ki(){return te(Jt,cr)}function cr(p,b){if("="==b)return x(se)}function Sl(p){if(","==p)return x(Gr)}function mn(p,b){if("keyword b"==p&&"else"==b)return x(z("form","else"),A,V)}function Wo(p,b){return"await"==b?x(Wo):"("==p?x(z(")"),Rn,V):void 0}function Rn(p){return"var"==p?x(Gr,yn):"variable"==p?x(yn):te(yn)}function yn(p,b){return")"==p?x():";"==p?x(yn):"in"==b||"of"==b?(T.marked="keyword",x(B,yn)):te(B,yn)}function xr(p,b){return"*"==b?(T.marked="keyword",x(xr)):"variable"==p?(H(b),x(xr)):"("==p?x(v,z(")"),Ue(hr,")"),V,at,A,ye):ce&&"<"==b?x(z(">"),Ue(yr,">"),V,xr):void 0}function Ur(p,b){return"*"==b?(T.marked="keyword",x(Ur)):"variable"==p?(H(b),x(Ur)):"("==p?x(v,z(")"),Ue(hr,")"),V,at,ye):ce&&"<"==b?x(z(">"),Ue(yr,">"),V,Ur):void 0}function Io(p,b){return"keyword"==p||"variable"==p?(T.marked="type",x(Io)):"<"==b?x(z(">"),Ue(yr,">"),V):void 0}function hr(p,b){return"@"==b&&x(B,hr),"spread"==p?x(hr):ce&&Q(b)?(T.marked="keyword",x(hr)):ce&&"this"==p?x(bt,cr):te(Jt,bt,cr)}function xn(p,b){return"variable"==p?pi(p,b):Nr(p,b)}function pi(p,b){if("variable"==p)return H(b),x(Nr)}function Nr(p,b){return"<"==b?x(z(">"),Ue(yr,">"),V,Nr):"extends"==b||"implements"==b||ce&&","==p?("implements"==b&&(T.marked="keyword"),x(ce?K:B,Nr)):"{"==p?x(z("}"),ar,V):void 0}function ar(p,b){return"async"==p||"variable"==p&&("static"==b||"get"==b||"set"==b||ce&&Q(b))&&T.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1)?(T.marked="keyword",x(ar)):"variable"==p||"keyword"==T.style?(T.marked="property",x(Zr,ar)):"number"==p||"string"==p?x(Zr,ar):"["==p?x(B,bt,N("]"),Zr,ar):"*"==b?(T.marked="keyword",x(ar)):ce&&"("==p?te(Ur,ar):";"==p||","==p?x(ar):"}"==p?x():"@"==b?x(B,ar):void 0}function Zr(p,b){if("!"==b||"?"==b)return x(Zr);if(":"==p)return x(K,cr);if("="==b)return x(se);var C=T.state.lexical.prev;return te(C&&"interface"==C.info?Ur:xr)}function Er(p,b){return"*"==b?(T.marked="keyword",x(ie,N(";"))):"default"==b?(T.marked="keyword",x(B,N(";"))):"{"==p?x(Ue(vi,"}"),ie,N(";")):te(A)}function vi(p,b){return"as"==b?(T.marked="keyword",x(N("variable"))):"variable"==p?te(se,vi):void 0}function sr(p){return"string"==p?x():"("==p?te(B):"."==p?te(Ct):te(bn,Fr,ie)}function bn(p,b){return"{"==p?zt(bn,"}"):("variable"==p&&H(b),"*"==b&&(T.marked="keyword"),x(pt))}function Fr(p){if(","==p)return x(bn,Fr)}function pt(p,b){if("as"==b)return T.marked="keyword",x(bn)}function ie(p,b){if("from"==b)return T.marked="keyword",x(B)}function $e(p){return"]"==p?x():te(Ue(se,"]"))}function oe(){return te(z("form"),Jt,N("{"),z("}"),Ue(Gt,"}"),V,V)}function Gt(){return te(Jt,cr)}function Ht(p,b,C){return b.tokenize==Ze&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(b.lastType)||"quasi"==b.lastType&&/\{\s*$/.test(p.string.slice(0,p.pos-(C||0)))}return v.lex=$.lex=!0,ye.lex=!0,V.lex=!0,{startState:function(p){var b={tokenize:Ze,lastType:"sof",cc:[],lexical:new Wt((p||0)-ue,0,"block",!1),localVars:G.localVars,context:G.localVars&&new nt(null,null,!1),indented:p||0};return G.globalVars&&"object"==typeof G.globalVars&&(b.globalVars=G.globalVars),b},token:function(p,b){if(p.sol()&&(b.lexical.hasOwnProperty("align")||(b.lexical.align=!1),b.indented=p.indentation(),lt(p,b)),b.tokenize!=er&&p.eatSpace())return null;var C=b.tokenize(p,b);return"comment"==ct?C:(b.lastType="operator"!=ct||"++"!=ft&&"--"!=ft?ct:"incdec",Je(b,C,ct,ft,p))},indent:function(p,b){if(p.tokenize==er||p.tokenize==rt)return J.Pass;if(p.tokenize!=Ze)return 0;var E,C=b&&b.charAt(0),O=p.lexical;if(!/^\s*else\b/.test(b))for(var Z=p.cc.length-1;Z>=0;--Z){var Ie=p.cc[Z];if(Ie==V)O=O.prev;else if(Ie!=mn&&Ie!=ye)break}for(;("stat"==O.type||"form"==O.type)&&("}"==C||(E=p.cc[p.cc.length-1])&&(E==Ct||E==Et)&&!/^[,\.=+\-*:?[\(]/.test(b));)O=O.prev;ee&&")"==O.type&&"stat"==O.prev.type&&(O=O.prev);var St=O.type,tr=C==St;return"vardef"==St?O.indented+("operator"==p.lastType||","==p.lastType?O.info.length+1:0):"form"==St&&"{"==C?O.indented:"form"==St?O.indented+ue:"stat"==St?O.indented+(function Re(p,b){return"operator"==p.lastType||","==p.lastType||de.test(b.charAt(0))||/[,.]/.test(b.charAt(0))}(p,b)?ee||ue:0):"switch"!=O.info||tr||0==G.doubleIndentSwitch?O.align?O.column+(tr?0:1):O.indented+(tr?0:ue):O.indented+(/^(?:case|default)\b/.test(b)?ue:2*ue)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:P?null:"/*",blockCommentEnd:P?null:"*/",blockCommentContinue:P?null:" * ",lineComment:P?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:P?"json":"javascript",jsonldMode:j,jsonMode:P,expressionAllowed:Ht,skipExpression:function(p){Je(p,"atom","atom","true",new J.StringStream("",2,null))}}}),J.registerHelper("wordChars","javascript",/[\w$]/),J.defineMIME("text/javascript","javascript"),J.defineMIME("text/ecmascript","javascript"),J.defineMIME("application/javascript","javascript"),J.defineMIME("application/x-javascript","javascript"),J.defineMIME("application/ecmascript","javascript"),J.defineMIME("application/json",{name:"javascript",json:!0}),J.defineMIME("application/x-json",{name:"javascript",json:!0}),J.defineMIME("application/manifest+json",{name:"javascript",json:!0}),J.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),J.defineMIME("text/typescript",{name:"javascript",typescript:!0}),J.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(ge(1382))},4219:(hi,mt)=>{!function(){function ge(){var je=self;je.addEventListener("message",({data:G})=>{const{id:ue,input:ee,version:j,command:P}=G;if("fetch-compiler-versions"===P)fetch("https://binaries.soliditylang.org/bin/list.json").then(Me=>Me.json()).then(Me=>{postMessage({id:ue,result:Me})}).catch(Me=>{postMessage({id:ue,error:Me.message})});else{je.importScripts(j);const Me=je.Module;if("_solidity_compile"in Me){const ce=Me.cwrap("solidity_compile","string",["string","number"]),Ge=JSON.parse(ce(ee));postMessage({id:ue,result:Ge})}}})}"object"==typeof global&&(global.Worker||(global.Worker={}),global.Worker.Module=void 0),window!==self&&ge(),mt.V=ge}()},5071:(hi,mt,ge)=>{var J,je;!function(){return function G(ue,ee,j){function P(Ge,be){if(!ee[Ge]){if(!ue[Ge]){if(Me)return Me(Ge,!0);var Se=new Error("Cannot find module '"+Ge+"'");throw Se.code="MODULE_NOT_FOUND",Se}var qe=ee[Ge]={exports:{}};ue[Ge][0].call(qe.exports,function(ct){return P(ue[Ge][1][ct]||ct)},qe,qe.exports,G,ue,ee,j)}return ee[Ge].exports}for(var Me=void 0,ce=0;ce<j.length;ce++)P(j[ce]);return P}}()({1:[function(G,ue,ee){window.CodeMirror=G("codemirror"),G("./index")},{"./index":2,codemirror:3}],2:[function(G,ue,ee){"use strict";const j=G("codemirror");j.defineMode("solidity",function(P){let te,Me=P.indentUnit,ce={pragma:!0,solidity:!0,import:!0,as:!0,from:!0,contract:!0,constructor:!0,is:!0,function:!0,modifier:!0,pure:!0,view:!0,payable:!0,constant:!0,anonymous:!0,indexed:!0,returns:!0,return:!0,event:!0,struct:!0,mapping:!0,interface:!0,using:!0,library:!0,storage:!0,memory:!0,calldata:!0,public:!0,private:!0,external:!0,internal:!0,emit:!0,assembly:!0,abstract:!0,after:!0,catch:!0,final:!0,in:!0,inline:!0,let:!0,match:!0,null:!0,of:!0,relocatable:!0,static:!0,try:!0,typeof:!0,var:!0},Ge={pragma:!0,returns:!0,address:!0,contract:!0,function:!0,struct:!0},be={wei:!0,szabo:!0,finney:!0,ether:!0},de={seconds:!0,minutes:!0,hours:!0,days:!0,weeks:!0},Se={block:["coinbase","difficulty","gaslimit","number","timestamp"],msg:["data","sender","sig","value"],tx:["gasprice","origin"]},qe={now:!0,gasleft:!0,blockhash:!0},ct={assert:!0,require:!0,revert:!0,throw:!0},ft={addmod:!0,mulmod:!0,keccak256:!0,sha256:!0,ripemd160:!0,ecrecover:!0},he={this:!0,selfdestruct:!0,super:!0},Ze={type:!0},$t={},er={if:!0,else:!0,while:!0,do:!0,for:!0,break:!0,continue:!0,switch:!0,case:!0,default:!0},rt={bool:!0,byte:!0,string:!0,enum:!0,address:!0},Xt={alias:!0,apply:!0,auto:!0,copyof:!0,define:!0,immutable:!0,implements:!0,macro:!0,mutable:!0,override:!0,partial:!0,promise:!0,reference:!0,sealed:!0,sizeof:!0,supports:!0,typedef:!0,unchecked:!0},lt={abi:["decode","encodePacked","encodeWithSelector","encodeWithSignature","encode"]},g=["transfer","send","balance","call","delegatecall","staticcall"],Wt=["title","author","notice","dev","param","return"],ae={delete:!0,new:!0,true:!0,false:!0},Je=/[+\-*&^%:=<>!|\/~]/,T=/[-]/;function x(N,A){let le=N.next();if('"'==le||"'"==le||"`"==le)return A.tokenize=function U(N){return function(A,le){let se,B=!1,Ce=!1;for(;null!=(se=A.next());){if(se==N&&!B){Ce=!0;break}B=!B&&"`"!=N&&"\\"==se}return(Ce||!(B||"`"==N))&&(le.tokenize=x),"string"}}(le),A.tokenize(N,A);if(function re(N,A){if("pragma solidity"==A.lastToken)return A.lastToken=null,!A.startOfLine&&(N.match(/[\^{0}][0-9\.]+/)||N.match(/[\>\=]+?[\s]*[0-9\.]+[\s]*[\<]?[\s]*[0-9\.]+/))}(N,A))return"version";if("."==le&&g.some(function(Ce){return N.match(`${Ce}`)}))return"addressFunction";if(Q(le,N))return"number";if(/[\[\]{}\(\),;\:\.]/.test(le))return function $(N,A){return","==N&&"functionName(variable"==A.para&&(A.para="functionName("),null!=A.para&&A.para.startsWith("functionName")&&(")"==N?A.para.endsWith("(")&&(A.para=A.para.substr(0,A.para.length-1),"functionName"==A.para&&(A.grammar="")):"("==N&&(A.para+=N)),"("==N&&"functionName"==A.lastToken?A.lastToken+=N:")"==N&&"functionName("==A.lastToken?A.lastToken=null:"("==N&&"returns"==A.lastToken?A.lastToken+=N:")"==N&&("returns("==A.lastToken||"returns(variable"==A.lastToken)&&(A.lastToken=null),"("==N&&"address"==A.lastToken&&(A.lastToken+=N),te=N,null}(le,A);if("/"==le){if(N.eat("*"))return A.tokenize=H,H(N,A);if(N.match(/\/{2}/)){for(;le=N.next();)if("@"==le){N.backUp(1),A.grammar="doc";break}return"doc"}if(N.eat("/"))return N.skipToEnd(),"comment"}if(T.test(le))return Q(N.peek(),N)?"number":"operator";if(Je.test(le))return N.eatWhile(Je),"operator";N.eatWhile(/[\w\$_\xa1-\uffff]/);let B=N.current();if("doc"==A.grammar)return Wt.some(function(Ce){return B==`@${Ce}`})?"docReserve":"doc";if("solidity"===B&&"pragma"==A.lastToken&&(A.lastToken=A.lastToken+" "+B),ce.propertyIsEnumerable(B))return("case"==B||"default"==B)&&(te="case"),Ge.propertyIsEnumerable(B)&&(A.lastToken=B),"keyword";if(be.propertyIsEnumerable(B))return"etherUnit";if(he.propertyIsEnumerable(B))return"contractRelated";if(er.propertyIsEnumerable(B)||Ze.propertyIsEnumerable(B)||Xt.propertyIsEnumerable(B))return"keyword";if(rt.propertyIsEnumerable(B)||de.propertyIsEnumerable(B)||function nt(N){if(N.match(/^[u]?int/)){if(N.indexOf("t")+1==N.length)return!0;let A=N.substr(N.indexOf("t")+1,N.length);return A%8==0&&A<=256}}(B)||function yt(N){if(N.match(/^bytes/))return N.indexOf("s")+1==N.length||N.substr(N.indexOf("s")+1,N.length)<=32}(B)||function S(N){if(N.match(/^[u]?fixed([0-9]+x[0-9]+)?/)){if(N.indexOf("d")+1==N.length)return!0;let A=N.substr(N.indexOf("d")+1,N.length).split("x");return A[0]%8==0&&A[0]<=256&&A[1]<=80}}(B))return A.lastToken=A.lastToken+"variable","keyword";if(ae.propertyIsEnumerable(B))return"atom";if(ct.propertyIsEnumerable(B))return"errorHandling";if(ft.propertyIsEnumerable(B))return"mathematicalAndCryptographic";if(qe.propertyIsEnumerable(B)||Se.hasOwnProperty(B)&&Se[B].some(function(Ce){return N.match(`.${Ce}`)}))return"variable-2";if(lt.hasOwnProperty(B)&&lt[B].some(function(Ce){return N.match(`.${Ce}`)}))return"abi";let se=function v(N,A){if(N.match(/^hex/)&&'"'==A.peek()){let B,le=!1,se="",Ce="";for(;B=A.next();){if(Ce+=B,'"'==B&&le){if(se=Ce.substring(1,Ce.length-1),se.match(/^[0-9a-fA-F]+$/))return"number";A.backUp(Ce.length);break}le=le||'"'==B}}}(B,N);return se??("functionName("!=A.lastToken&&"returns("!=A.lastToken||!$t.propertyIsEnumerable(B)?"function"==A.lastToken?(A.lastToken="functionName",null==A.para&&(A.grammar="function",A.para=""),A.para+="functionName","functionName"):"functionName(variable"==A.lastToken?(A.lastToken="functionName(","parameterValue"):"returns(variable"==A.lastToken?(A.lastToken="returns(","parameterValue"):("address"==A.lastToken&&"payable"==B&&(A.lastToken="address payable"),("contract"==A.lastToken||"struct"==A.lastToken)&&($t[B]=!0,A.lastToken=null),"function"==A.grammar?"parameterValue":"variable"):(A.lastToken+="variable","variable"))}function H(N,A){let B,le=!1;for(;B=N.next();){if("/"==B&&le){A.tokenize=x;break}le="*"==B}return"comment"}function Q(N,A){if(/[\d\.]/.test(N))return"."==N?A.match(/^[0-9]+([eE][\-+]?[0-9]+)?/):"0"==N?A.match(/^[xX][0-9a-fA-F]+/)||A.match(/^0[0-7]+/):A.match(/^[0-9]*\.?[0-9]*([eE][\-+]?[0-9]+)?/),!0}function ye(N,A,le,B,se){this.indented=N,this.column=A,this.type=le,this.align=B,this.prev=se}function z(N,A,le){return N.context=new ye(N.indented,A,le,null,N.context)}return{startState:function(N){return{tokenize:null,context:new ye((N||0)-Me,0,"top",!1),indented:0,startOfLine:!0}},token:function(N,A){let le=A.context;if(N.sol()&&(null==le.align&&(le.align=!1),A.indented=N.indentation(),A.startOfLine=!0,"case"==le.type&&(le.type="}"),"doc"==A.grammar&&(A.grammar=null)),N.eatSpace())return null;te=null;let B=(A.tokenize||x)(N,A);return"comment"==B||(null==le.align&&(le.align=!0),"{"==te?z(A,N.column(),"}"):"["==te?z(A,N.column(),"]"):"("==te?z(A,N.column(),")"):"case"==te?le.type="case":("}"==te&&"}"==le.type||te==le.type)&&function V(N){if(!N.context.prev)return;let A=N.context.type;(")"==A||"]"==A||"}"==A)&&(N.indented=N.context.indented),N.context=N.context.prev}(A),A.startOfLine=!1),B},indent:function(N,A){if(N.tokenize!=x&&null!=N.tokenize)return j.Pass;let le=N.context,B=A&&A.charAt(0);if("case"==le.type&&/^(?:case|default)\b/.test(A))return N.context.type="}",le.indented;let se=B==le.type;return le.align?le.column+(se?0:1):le.indented+(se?0:Me)},electricChars:"{}):",closeBrackets:"()[]{}''\"\"``",fold:"brace",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}}),j.defineMIME("text/x-solidity","solidity")},{codemirror:3}],3:[function(G,ue,ee){var P;P=function(){"use strict";var j=navigator.userAgent,P=navigator.platform,Me=/gecko\/\d/i.test(j),ce=/MSIE \d/.test(j),Ge=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(j),be=/Edge\/(\d+)/.exec(j),de=ce||Ge||be,Se=de&&(ce?document.documentMode||6:+(be||Ge)[1]),qe=!be&&/WebKit\//.test(j),ct=qe&&/Qt\/\d+\.\d+/.test(j),ft=!be&&/Chrome\//.test(j),he=/Opera\//.test(j),Ze=/Apple Computer/.test(navigator.vendor),$t=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(j),er=/PhantomJS/.test(j),rt=Ze&&(/Mobile\/\w+/.test(j)||navigator.maxTouchPoints>2),Xt=/Android/.test(j),lt=rt||Xt||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(j),g=rt||/Mac/.test(P),Wt=/\bCrOS\b/.test(j),ae=/win/i.test(P),Je=he&&j.match(/Version\/(\d*\.\d*)/);Je&&(Je=Number(Je[1])),Je&&Je>=15&&(he=!1,qe=!0);var T=g&&(ct||he&&(null==Je||Je<12.11)),te=Me||de&&Se>=9;function x(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var yt,U=function(e,t){var n=e.className,i=x(t).exec(n);if(i){var l=n.slice(i.index+i[0].length);e.className=n.slice(0,i.index)+(l?i[1]+l:"")}};function H(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function re(e,t){return H(e).appendChild(t)}function Q(e,t,n,i){var l=document.createElement(e);if(n&&(l.className=n),i&&(l.style.cssText=i),"string"==typeof t)l.appendChild(document.createTextNode(t));else if(t)for(var a=0;a<t.length;++a)l.appendChild(t[a]);return l}function nt(e,t,n,i){var l=Q(e,t,n,i);return l.setAttribute("role","presentation"),l}function S(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function v(){var e;try{e=document.activeElement}catch{e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function $(e,t){var n=e.className;x(t).test(n)||(e.className+=(n?" ":"")+t)}function ye(e,t){for(var n=e.split(" "),i=0;i<n.length;i++)n[i]&&!x(n[i]).test(t)&&(t+=" "+n[i]);return t}yt=document.createRange?function(e,t,n,i){var l=document.createRange();return l.setEnd(i||e,n),l.setStart(e,t),l}:function(e,t,n){var i=document.body.createTextRange();try{i.moveToElementText(e.parentNode)}catch{return i}return i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",t),i};var z=function(e){e.select()};function V(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function N(e,t,n){for(var i in t||(t={}),e)e.hasOwnProperty(i)&&(!1!==n||!t.hasOwnProperty(i))&&(t[i]=e[i]);return t}function A(e,t,n,i,l){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var a=i||0,s=l||0;;){var u=e.indexOf("\t",a);if(u<0||u>=t)return s+(t-a);s+=u-a,s+=n-s%n,a=u+1}}rt?z=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:de&&(z=function(e){try{e.select()}catch{}});var le=function(){this.id=null,this.f=null,this.time=0,this.handler=V(this.onTimeout,this)};function B(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}le.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},le.prototype.set=function(e,t){this.f=t;var n=+new Date+e;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=n)};var Ce={toString:function(){return"CodeMirror.Pass"}},ht={scroll:!1},Yt={origin:"*mouse"},Ct={origin:"+move"};function Et(e,t,n){for(var i=0,l=0;;){var a=e.indexOf("\t",i);-1==a&&(a=e.length);var s=a-i;if(a==e.length||l+s>=t)return i+Math.min(s,t-l);if(l+=a-i,i=a+1,(l+=n-l%n)>=t)return i}}var xe=[""];function nr(e){for(;xe.length<=e;)xe.push(Le(xe)+" ");return xe[e]}function Le(e){return e[e.length-1]}function qt(e,t){for(var n=[],i=0;i<e.length;i++)n[i]=t(e[i],i);return n}function Ae(){}function L(e,t){var n;return Object.create?n=Object.create(e):(Ae.prototype=e,n=new Ae),t&&N(t,n),n}var R=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Y(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||R.test(e))}function we(e,t){return t?!!(t.source.indexOf("\\w")>-1&&Y(e))||t.test(e):Y(e)}function Te(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var _t=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Ue(e){return e.charCodeAt(0)>=768&&_t.test(e)}function zt(e,t,n){for(;(n<0?t>0:t<e.length)&&Ue(e.charAt(t));)t+=n;return t}function dt(e,t,n){for(var i=t>n?-1:1;;){if(t==n)return t;var l=(t+n)/2,a=i<0?Math.ceil(l):Math.floor(l);if(a==t)return e(a)?t:n;e(a)?n=a:t=a+i}}var At=null;function at(e,t,n){var i;At=null;for(var l=0;l<e.length;++l){var a=e[l];if(a.from<t&&a.to>t)return l;a.to==t&&(a.from!=a.to&&"before"==n?i=l:At=l),a.from==t&&(a.from!=a.to&&"before"!=n?i=l:At=l)}return i??At}var Oo=function(){function n(c){return c<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(c):1424<=c&&c<=1524?"R":1536<=c&&c<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(c-1536):1774<=c&&c<=2220?"r":8192<=c&&c<=8203?"w":8204==c?"b":"L"}var i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,l=/[stwN]/,a=/[LRr]/,s=/[Lb1n]/,u=/[1n]/;function f(c,h,d){this.level=c,this.from=h,this.to=d}return function(c,h){var d="ltr"==h?"L":"R";if(0==c.length||"ltr"==h&&!i.test(c))return!1;for(var m=c.length,y=[],w=0;w<m;++w)y.push(n(c.charCodeAt(w)));for(var k=0,M=d;k<m;++k){var D=y[k];"m"==D?y[k]=M:M=D}for(var F=0,W=d;F<m;++F){var I=y[F];"1"==I&&"r"==W?y[F]="n":a.test(I)&&(W=I,"r"==I&&(y[F]="R"))}for(var _=1,q=y[0];_<m-1;++_){var fe=y[_];"+"==fe&&"1"==q&&"1"==y[_+1]?y[_]="1":","==fe&&q==y[_+1]&&("1"==q||"n"==q)&&(y[_]=q),q=fe}for(var ve=0;ve<m;++ve){var Ye=y[ve];if(","==Ye)y[ve]="N";else if("%"==Ye){var Ne=void 0;for(Ne=ve+1;Ne<m&&"%"==y[Ne];++Ne);for(var _e=ve&&"!"==y[ve-1]||Ne<m&&"1"==y[Ne]?"1":"N",tt=ve;tt<Ne;++tt)y[tt]=_e;ve=Ne-1}}for(var Ee=0,ze=d;Ee<m;++Ee){var Fe=y[Ee];"L"==ze&&"1"==Fe?y[Ee]="L":a.test(Fe)&&(ze=Fe)}for(var ke=0;ke<m;++ke)if(l.test(y[ke])){var He=void 0;for(He=ke+1;He<m&&l.test(y[He]);++He);for(var ot="L"==(ke?y[ke-1]:d),Mt=ot==("L"==(He<m?y[He]:d))?ot?"L":"R":d,Vt=ke;Vt<He;++Vt)y[Vt]=Mt;ke=He-1}for(var Dr,Pe=[],ut=0;ut<m;)if(s.test(y[ut])){var gn=ut;for(++ut;ut<m&&s.test(y[ut]);++ut);Pe.push(new f(0,gn,ut))}else{var lr=ut,Dt=Pe.length,Ar="rtl"==h?1:0;for(++ut;ut<m&&"L"!=y[ut];++ut);for(var jt=lr;jt<ut;)if(u.test(y[jt])){lr<jt&&(Pe.splice(Dt,0,new f(1,lr,jt)),Dt+=Ar);var Cl=jt;for(++jt;jt<ut&&u.test(y[jt]);++jt);Pe.splice(Dt,0,new f(2,Cl,jt)),Dt+=Ar,lr=jt}else++jt;lr<ut&&Pe.splice(Dt,0,new f(1,lr,ut))}return"ltr"==h&&(1==Pe[0].level&&(Dr=c.match(/^\s+/))&&(Pe[0].from=Dr[0].length,Pe.unshift(new f(0,0,Dr[0].length))),1==Le(Pe).level&&(Dr=c.match(/\s+$/))&&(Le(Pe).to-=Dr[0].length,Pe.push(new f(0,m-Dr[0].length,m)))),"rtl"==h?Pe.reverse():Pe}}();function K(e,t){var n=e.order;return null==n&&(n=e.order=Oo(e.text,t)),n}var di=[],ne=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var i=e._handlers||(e._handlers={});i[t]=(i[t]||di).concat(n)}};function Ve(e,t){return e._handlers&&e._handlers[t]||di}function We(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var i=e._handlers,l=i&&i[t];if(l){var a=B(l,n);a>-1&&(i[t]=l.slice(0,a).concat(l.slice(a+1)))}}}function xt(e,t){var n=Ve(e,t);if(n.length)for(var i=Array.prototype.slice.call(arguments,2),l=0;l<n.length;++l)n[l].apply(null,i)}function Be(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),xt(e,n||t.type,e,t),Jt(t)||t.codemirrorIgnore}function Zt(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),i=0;i<t.length;++i)-1==B(n,t[i])&&n.push(t[i])}function it(e,t){return Ve(e,t).length>0}function yr(e){e.prototype.on=function(t,n){ne(this,t,n)},e.prototype.off=function(t,n){We(this,t,n)}}function It(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function Gr(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Jt(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function qr(e){It(e),Gr(e)}function Ki(e){return e.target||e.srcElement}function cr(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),g&&e.ctrlKey&&1==t&&(t=3),t}var mn,Rn,Sl=function(){if(de&&Se<9)return!1;var e=Q("div");return"draggable"in e||"dragDrop"in e}();function Wo(e){if(null==mn){var t=Q("span","\u200b");re(e,Q("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(mn=t.offsetWidth<=1&&t.offsetHeight>2&&!(de&&Se<8))}var n=mn?Q("span","\u200b"):Q("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function yn(e){if(null!=Rn)return Rn;var t=re(e,document.createTextNode("A\u062eA")),n=yt(t,0,1).getBoundingClientRect(),i=yt(t,1,2).getBoundingClientRect();return H(e),!(!n||n.left==n.right)&&(Rn=i.right-n.right<3)}var e,xr=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],i=e.length;t<=i;){var l=e.indexOf("\n",t);-1==l&&(l=e.length);var a=e.slice(t,"\r"==e.charAt(l-1)?l-1:l),s=a.indexOf("\r");-1!=s?(n.push(a.slice(0,s)),t+=s+1):(n.push(a),t=l+1)}return n}:function(e){return e.split(/\r\n?|\n/)},Ur=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch{return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch{}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},Io="oncopy"in(e=Q("div"))||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy),hr=null,pi={},Nr={};function ar(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),pi[e]=t}function Er(e){if("string"==typeof e&&Nr.hasOwnProperty(e))e=Nr[e];else if(e&&"string"==typeof e.name&&Nr.hasOwnProperty(e.name)){var t=Nr[e.name];"string"==typeof t&&(t={name:t}),(e=L(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Er("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Er("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function vi(e,t){t=Er(t);var n=pi[t.name];if(!n)return vi(e,"text/plain");var i=n(e,t);if(sr.hasOwnProperty(t.name)){var l=sr[t.name];for(var a in l)l.hasOwnProperty(a)&&(i.hasOwnProperty(a)&&(i["_"+a]=i[a]),i[a]=l[a])}if(i.name=t.name,t.helperType&&(i.helperType=t.helperType),t.modeProps)for(var s in t.modeProps)i[s]=t.modeProps[s];return i}var sr={};function bn(e,t){N(t,sr.hasOwnProperty(e)?sr[e]:sr[e]={})}function Fr(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var i in t){var l=t[i];l instanceof Array&&(l=l.concat([])),n[i]=l}return n}function pt(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function ie(e,t,n){return!e.startState||e.startState(t,n)}var $e=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};function oe(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var i=0;;++i){var l=n.children[i],a=l.chunkSize();if(t<a){n=l;break}t-=a}return n.lines[t]}function Gt(e,t,n){var i=[],l=t.line;return e.iter(t.line,n.line+1,function(a){var s=a.text;l==n.line&&(s=s.slice(0,n.ch)),l==t.line&&(s=s.slice(t.ch)),i.push(s),++l}),i}function Re(e,t,n){var i=[];return e.iter(t,n,function(l){i.push(l.text)}),i}function Ht(e,t){var n=t-e.height;if(n)for(var i=e;i;i=i.parent)i.height+=n}function p(e){if(null==e.parent)return null;for(var t=e.parent,n=B(t.lines,e),i=t.parent;i;t=i,i=i.parent)for(var l=0;i.children[l]!=t;++l)n+=i.children[l].chunkSize();return n+t.first}function b(e,t){var n=e.first;e:do{for(var i=0;i<e.children.length;++i){var l=e.children[i],a=l.height;if(t<a){e=l;continue e}t-=a,n+=l.chunkSize()}return n}while(!e.lines);for(var s=0;s<e.lines.length;++s){var f=e.lines[s].height;if(t<f)break;t-=f}return n+s}function C(e,t){return t>=e.first&&t<e.first+e.size}function O(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function E(e,t,n){if(void 0===n&&(n=null),!(this instanceof E))return new E(e,t,n);this.line=e,this.ch=t,this.sticky=n}function Z(e,t){return e.line-t.line||e.ch-t.ch}function Ie(e,t){return e.sticky==t.sticky&&0==Z(e,t)}function St(e){return E(e.line,e.ch)}function tr(e,t){return Z(e,t)<0?t:e}function pe(e,t){return Z(e,t)<0?e:t}function Ca(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function me(e,t){if(t.line<e.first)return E(e.first,0);var n=e.first+e.size-1;return t.line>n?E(n,oe(e,n).text.length):function Ho(e,t){var n=e.ch;return null==n||n>t?E(e.line,t):n<0?E(e.line,0):e}(t,oe(e,t.line).text.length)}function Or(e,t){for(var n=[],i=0;i<t.length;i++)n[i]=me(e,t[i]);return n}$e.prototype.eol=function(){return this.pos>=this.string.length},$e.prototype.sol=function(){return this.pos==this.lineStart},$e.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},$e.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},$e.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},$e.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},$e.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},$e.prototype.skipToEnd=function(){this.pos=this.string.length},$e.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},$e.prototype.backUp=function(e){this.pos-=e},$e.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=A(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?A(this.string,this.lineStart,this.tabSize):0)},$e.prototype.indentation=function(){return A(this.string,null,this.tabSize)-(this.lineStart?A(this.string,this.lineStart,this.tabSize):0)},$e.prototype.match=function(e,t,n){if("string"!=typeof e){var a=this.string.slice(this.pos).match(e);return a&&a.index>0?null:(a&&!1!==t&&(this.pos+=a[0].length),a)}var i=function(s){return n?s.toLowerCase():s};if(i(this.string.substr(this.pos,e.length))==i(e))return!1!==t&&(this.pos+=e.length),!0},$e.prototype.current=function(){return this.string.slice(this.start,this.pos)},$e.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},$e.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},$e.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var ji=function(e,t){this.state=e,this.lookAhead=t},Wr=function(e,t,n,i){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=i||0,this.baseTokens=null,this.baseTokenPos=1};function gi(e,t,n,i){var l=[e.state.modeGen],a={};ka(e,t.text,e.doc.mode,n,function(c,h){return l.push(c,h)},a,i);for(var s=n.state,u=function(c){n.baseTokens=l;var h=e.state.overlays[c],d=1,m=0;n.state=!0,ka(e,t.text,h.mode,n,function(y,w){for(var k=d;m<y;){var M=l[d];M>y&&l.splice(d,1,y,l[d+1],M),d+=2,m=Math.min(y,M)}if(w)if(h.opaque)l.splice(k,d-k,y,"overlay "+w),d=k+2;else for(;k<d;k+=2){var D=l[k+1];l[k+1]=(D?D+" ":"")+"overlay "+w}},a),n.state=s,n.baseTokens=null,n.baseTokenPos=1},f=0;f<e.state.overlays.length;++f)u(f);return{styles:l,classes:a.bgClass||a.textClass?a:null}}function Po(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var i=mi(e,p(t)),l=t.text.length>e.options.maxHighlightLength&&Fr(e.doc.mode,i.state),a=gi(e,t,i);l&&(i.state=l),t.stateAfter=i.save(!l),t.styles=a.styles,a.classes?t.styleClasses=a.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function mi(e,t,n){var i=e.doc,l=e.display;if(!i.mode.startState)return new Wr(i,!0,t);var a=function La(e,t,n){for(var i,l,a=e.doc,s=n?-1:t-(e.doc.mode.innerMode?1e3:100),u=t;u>s;--u){if(u<=a.first)return a.first;var f=oe(a,u-1),c=f.stateAfter;if(c&&(!n||u+(c instanceof ji?c.lookAhead:0)<=a.modeFrontier))return u;var h=A(f.text,null,e.options.tabSize);(null==l||i>h)&&(l=u-1,i=h)}return l}(e,t,n),s=a>i.first&&oe(i,a-1).stateAfter,u=s?Wr.fromSaved(i,s,a):new Wr(i,ie(i.mode),a);return i.iter(a,t,function(f){Xi(e,f.text,u);var c=u.line;f.stateAfter=c==t-1||c%5==0||c>=l.viewFrom&&c<l.viewTo?u.save():null,u.nextLine()}),n&&(i.modeFrontier=u.line),u}function Xi(e,t,n,i){var l=e.doc.mode,a=new $e(t,e.options.tabSize,n);for(a.start=a.pos=i||0,""==t&&kl(l,n.state);!a.eol();)Bo(l,a,n.state),a.start=a.pos}function kl(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=pt(e,t);if(n.mode.blankLine)return n.mode.blankLine(n.state)}}function Bo(e,t,n,i){for(var l=0;l<10;l++){i&&(i[0]=pt(e,n).mode);var a=e.token(t,n);if(t.pos>t.start)return a}throw new Error("Mode "+e.name+" failed to advance stream.")}Wr.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},Wr.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},Wr.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Wr.fromSaved=function(e,t,n){return t instanceof ji?new Wr(e,Fr(e.mode,t.state),n,t.lookAhead):new Wr(e,Fr(e.mode,t),n)},Wr.prototype.save=function(e){var t=!1!==e?Fr(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new ji(t,this.maxLookAhead):t};var Ll=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function Tl(e,t,n,i){var s,h,l=e.doc,a=l.mode,u=oe(l,(t=me(l,t)).line),f=mi(e,t.line,n),c=new $e(u.text,e.options.tabSize,f);for(i&&(h=[]);(i||c.pos<t.ch)&&!c.eol();)c.start=c.pos,s=Bo(a,c,f.state),i&&h.push(new Ll(c,s,Fr(l.mode,f.state)));return i?h:new Ll(c,s,f.state)}function Sa(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==t[i]?t[i]=n[2]:new RegExp("(?:^|\\s)"+n[2]+"(?:$|\\s)").test(t[i])||(t[i]+=" "+n[2])}return e}function ka(e,t,n,i,l,a,s){var u=n.flattenSpans;null==u&&(u=e.options.flattenSpans);var d,f=0,c=null,h=new $e(t,e.options.tabSize,i),m=e.options.addModeClass&&[null];for(""==t&&Sa(kl(n,i.state),a);!h.eol();){if(h.pos>e.options.maxHighlightLength?(u=!1,s&&Xi(e,t,i,h.pos),h.pos=t.length,d=null):d=Sa(Bo(n,h,i.state,m),a),m){var y=m[0].name;y&&(d="m-"+(d?y+" "+d:y))}if(!u||c!=d){for(;f<h.start;)l(f=Math.min(h.start,f+5e3),c);c=d}h.start=h.pos}for(;f<h.pos;){var w=Math.min(h.pos,f+5e3);l(w,c),f=w}}var Ta=!1,Qr=!1;function _o(e,t,n){this.marker=e,this.from=t,this.to=n}function qi(e,t){if(e)for(var n=0;n<e.length;++n){var i=e[n];if(i.marker==t)return i}}function Ns(e,t){for(var n,i=0;i<e.length;++i)e[i]!=t&&(n||(n=[])).push(e[i]);return n}function Dl(e,t){if(t.full)return null;var n=C(e,t.from.line)&&oe(e,t.from.line).markedSpans,i=C(e,t.to.line)&&oe(e,t.to.line).markedSpans;if(!n&&!i)return null;var l=t.from.ch,a=t.to.ch,s=0==Z(t.from,t.to),u=function Ml(e,t,n){var i;if(e)for(var l=0;l<e.length;++l){var a=e[l],s=a.marker;null!=a.from&&!(s.inclusiveLeft?a.from<=t:a.from<t)&&(a.from!=t||"bookmark"!=s.type||n&&a.marker.insertLeft)||(i||(i=[])).push(new _o(s,a.from,null==a.to||(s.inclusiveRight?a.to>=t:a.to>t)?null:a.to))}return i}(n,l,s),f=function Ma(e,t,n){var i;if(e)for(var l=0;l<e.length;++l){var a=e[l],s=a.marker;(null==a.to||(s.inclusiveRight?a.to>=t:a.to>t)||a.from==t&&"bookmark"==s.type&&(!n||a.marker.insertLeft))&&(i||(i=[])).push(new _o(s,null==a.from||(s.inclusiveLeft?a.from<=t:a.from<t)?null:a.from-t,null==a.to?null:a.to-t))}return i}(i,a,s),c=1==t.text.length,h=Le(t.text).length+(c?l:0);if(u)for(var d=0;d<u.length;++d){var m=u[d];if(null==m.to){var y=qi(f,m.marker);y?c&&(m.to=null==y.to?null:y.to+h):m.to=l}}if(f)for(var w=0;w<f.length;++w){var k=f[w];null!=k.to&&(k.to+=h),null==k.from?qi(u,k.marker)||(k.from=h,c&&(u||(u=[])).push(k)):(k.from+=h,c&&(u||(u=[])).push(k))}u&&(u=Al(u)),f&&f!=u&&(f=Al(f));var D=[u];if(!c){var W,F=t.text.length-2;if(F>0&&u)for(var I=0;I<u.length;++I)null==u[I].to&&(W||(W=[])).push(new _o(u[I].marker,null,null));for(var _=0;_<F;++_)D.push(W);D.push(f)}return D}function Al(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Zi(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function Ji(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function yi(e){return e.inclusiveLeft?-1:0}function Qi(e){return e.inclusiveRight?1:0}function zo(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var i=e.find(),l=t.find(),a=Z(i.from,l.from)||yi(e)-yi(t);return a?-a:Z(i.to,l.to)||Qi(e)-Qi(t)||t.id-e.id}function Vi(e,t){var i,n=Qr&&e.markedSpans;if(n)for(var l=void 0,a=0;a<n.length;++a)(l=n[a]).marker.collapsed&&null==(t?l.from:l.to)&&(!i||zo(i,l.marker)<0)&&(i=l.marker);return i}function Aa(e){return Vi(e,!0)}function $i(e){return Vi(e,!1)}function Ir(e,t){var i,n=Qr&&e.markedSpans;if(n)for(var l=0;l<n.length;++l){var a=n[l];a.marker.collapsed&&(null==a.from||a.from<t)&&(null==a.to||a.to>t)&&(!i||zo(i,a.marker)<0)&&(i=a.marker)}return i}function Na(e,t,n,i,l){var a=oe(e,t),s=Qr&&a.markedSpans;if(s)for(var u=0;u<s.length;++u){var f=s[u];if(f.marker.collapsed){var c=f.marker.find(0),h=Z(c.from,n)||yi(f.marker)-yi(l),d=Z(c.to,i)||Qi(f.marker)-Qi(l);if(!(h>=0&&d<=0||h<=0&&d>=0)&&(h<=0&&(f.marker.inclusiveRight&&l.inclusiveLeft?Z(c.to,n)>=0:Z(c.to,n)>0)||h>=0&&(f.marker.inclusiveRight&&l.inclusiveLeft?Z(c.from,i)<=0:Z(c.from,i)<0)))return!0}}}function Kr(e){for(var t;t=Aa(e);)e=t.find(-1,!0).line;return e}function jr(e,t){var n=oe(e,t),i=Kr(n);return n==i?t:p(i)}function Go(e,t){if(t>e.lastLine())return t;var i,n=oe(e,t);if(!rr(e,n))return t;for(;i=$i(n);)n=i.find(1,!0).line;return p(n)+1}function rr(e,t){var n=Qr&&t.markedSpans;if(n)for(var i=void 0,l=0;l<n.length;++l)if((i=n[l]).marker.collapsed){if(null==i.from)return!0;if(!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&xi(e,t,i))return!0}}function xi(e,t,n){if(null==n.to){var i=n.marker.find(1,!0);return xi(e,i.line,qi(i.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var l=void 0,a=0;a<t.markedSpans.length;++a)if((l=t.markedSpans[a]).marker.collapsed&&!l.marker.widgetNode&&l.from==n.to&&(null==l.to||l.to!=n.from)&&(l.marker.inclusiveLeft||n.marker.inclusiveRight)&&xi(e,t,l))return!0}function Hr(e){for(var t=0,n=(e=Kr(e)).parent,i=0;i<n.lines.length;++i){var l=n.lines[i];if(l==e)break;t+=l.height}for(var a=n.parent;a;a=(n=a).parent)for(var s=0;s<a.children.length;++s){var u=a.children[s];if(u==n)break;t+=u.height}return t}function Vr(e){if(0==e.height)return 0;for(var n,t=e.text.length,i=e;n=Aa(i);){var l=n.find(0,!0);i=l.from.line,t+=l.from.ch-l.to.ch}for(i=e;n=$i(i);){var a=n.find(0,!0);t-=i.text.length-a.from.ch,t+=(i=a.to.line).text.length-a.to.ch}return t}function El(e){var t=e.display,n=e.doc;t.maxLine=oe(n,n.first),t.maxLineLength=Vr(t.maxLine),t.maxLineChanged=!0,n.iter(function(i){var l=Vr(i);l>t.maxLineLength&&(t.maxLineLength=l,t.maxLine=i)})}var bi=function(e,t,n){this.text=e,Ji(this,t),this.height=n?n(this):1};function Os(e){e.parent=null,Zi(e)}bi.prototype.lineNo=function(){return p(this)},yr(bi);var Fa={},Oa={};function Wa(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Oa:Fa;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function Ia(e,t){var n=nt("span",null,null,qe?"padding-right: .1px":null),i={pre:nt("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var l=0;l<=(t.rest?t.rest.length:0);l++){var a=l?t.rest[l-1]:t.line,s=void 0;i.pos=0,i.addToken=Is,yn(e.display.measure)&&(s=K(a,e.doc.direction))&&(i.addToken=Hs(i.addToken,s)),i.map=[],Uo(a,i,Po(e,a,t!=e.display.externalMeasured&&p(a))),a.styleClasses&&(a.styleClasses.bgClass&&(i.bgClass=ye(a.styleClasses.bgClass,i.bgClass||"")),a.styleClasses.textClass&&(i.textClass=ye(a.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild(Wo(e.display.measure))),0==l?(t.measure.map=i.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(i.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(qe){var f=i.content.lastChild;(/\bcm-tab\b/.test(f.className)||f.querySelector&&f.querySelector(".cm-tab"))&&(i.content.className="cm-tab-wrap-hack")}return xt(e,"renderLine",e,t.line,i.pre),i.pre.className&&(i.textClass=ye(i.pre.className,i.textClass||"")),i}function Ws(e){var t=Q("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Is(e,t,n,i,l,a,s){if(t){var h,u=e.splitSpaces?function Ha(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,i="",l=0;l<e.length;l++){var a=e.charAt(l);" "==a&&n&&(l==e.length-1||32==e.charCodeAt(l+1))&&(a="\xa0"),i+=a,n=" "==a}return i}(t,e.trailingSpace):t,f=e.cm.state.specialChars,c=!1;if(f.test(t)){h=document.createDocumentFragment();for(var d=0;;){f.lastIndex=d;var m=f.exec(t),y=m?m.index-d:t.length-d;if(y){var w=document.createTextNode(u.slice(d,d+y));h.appendChild(de&&Se<9?Q("span",[w]):w),e.map.push(e.pos,e.pos+y,w),e.col+=y,e.pos+=y}if(!m)break;d+=y+1;var k=void 0;if("\t"==m[0]){var M=e.cm.options.tabSize,D=M-e.col%M;(k=h.appendChild(Q("span",nr(D),"cm-tab"))).setAttribute("role","presentation"),k.setAttribute("cm-text","\t"),e.col+=D}else"\r"==m[0]||"\n"==m[0]?((k=h.appendChild(Q("span","\r"==m[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",m[0]),e.col+=1):((k=e.cm.options.specialCharPlaceholder(m[0])).setAttribute("cm-text",m[0]),h.appendChild(de&&Se<9?Q("span",[k]):k),e.col+=1);e.map.push(e.pos,e.pos+1,k),e.pos++}}else e.col+=t.length,h=document.createTextNode(u),e.map.push(e.pos,e.pos+t.length,h),de&&Se<9&&(c=!0),e.pos+=t.length;if(e.trailingSpace=32==u.charCodeAt(t.length-1),n||i||l||c||a||s){var F=n||"";i&&(F+=i),l&&(F+=l);var W=Q("span",[h],F,a);if(s)for(var I in s)s.hasOwnProperty(I)&&"style"!=I&&"class"!=I&&W.setAttribute(I,s[I]);return e.content.appendChild(W)}e.content.appendChild(h)}}function Hs(e,t){return function(n,i,l,a,s,u,f){l=l?l+" cm-force-border":"cm-force-border";for(var c=n.pos,h=c+i.length;;){for(var d=void 0,m=0;m<t.length&&!((d=t[m]).to>c&&d.from<=c);m++);if(d.to>=h)return e(n,i,l,a,s,u,f);e(n,i.slice(0,d.to-c),l,a,null,u,f),a=null,i=i.slice(d.to-c),c=d.to}}}function Fl(e,t,n,i){var l=!i&&n.widgetNode;l&&e.map.push(e.pos,e.pos+t,l),!i&&e.cm.display.input.needsContentAttribute&&(l||(l=e.content.appendChild(document.createElement("span"))),l.setAttribute("cm-marker",n.id)),l&&(e.cm.display.input.setUneditable(l),e.content.appendChild(l)),e.pos+=t,e.trailingSpace=!1}function Uo(e,t,n){var i=e.markedSpans,l=e.text,a=0;if(i)for(var d,m,w,k,M,D,F,u=l.length,f=0,c=1,h="",y=0;;){if(y==f){w=k=M=m="",F=null,D=null,y=1/0;for(var W=[],I=void 0,_=0;_<i.length;++_){var q=i[_],fe=q.marker;if("bookmark"==fe.type&&q.from==f&&fe.widgetNode)W.push(fe);else if(q.from<=f&&(null==q.to||q.to>f||fe.collapsed&&q.to==f&&q.from==f)){if(null!=q.to&&q.to!=f&&y>q.to&&(y=q.to,k=""),fe.className&&(w+=" "+fe.className),fe.css&&(m=(m?m+";":"")+fe.css),fe.startStyle&&q.from==f&&(M+=" "+fe.startStyle),fe.endStyle&&q.to==y&&(I||(I=[])).push(fe.endStyle,q.to),fe.title&&((F||(F={})).title=fe.title),fe.attributes)for(var ve in fe.attributes)(F||(F={}))[ve]=fe.attributes[ve];fe.collapsed&&(!D||zo(D.marker,fe)<0)&&(D=q)}else q.from>f&&y>q.from&&(y=q.from)}if(I)for(var Ye=0;Ye<I.length;Ye+=2)I[Ye+1]==y&&(k+=" "+I[Ye]);if(!D||D.from==f)for(var Ne=0;Ne<W.length;++Ne)Fl(t,0,W[Ne]);if(D&&(D.from||0)==f){if(Fl(t,(null==D.to?u+1:D.to)-f,D.marker,null==D.from),null==D.to)return;D.to==f&&(D=!1)}}if(f>=u)break;for(var _e=Math.min(u,y);;){if(h){var tt=f+h.length;if(!D){var Ee=tt>_e?h.slice(0,_e-f):h;t.addToken(t,Ee,d?d+w:w,M,f+Ee.length==y?k:"",m,F)}if(tt>=_e){h=h.slice(_e-f),f=_e;break}f=tt,M=""}h=l.slice(a,a=n[c++]),d=Wa(n[c++],t.cm.options)}}else for(var s=1;s<n.length;s+=2)t.addToken(t,l.slice(a,a=n[s]),Wa(n[s+1],t.cm.options))}function _n(e,t,n){this.line=t,this.rest=function Ea(e){for(var t,n;t=$i(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}(t),this.size=this.rest?p(Le(this.rest))-n+1:1,this.node=this.text=null,this.hidden=rr(e,t)}function Ko(e,t,n){for(var l,i=[],a=t;a<n;a=l){var s=new _n(e.doc,oe(e.doc,a),a);l=a+s.size,i.push(s)}return i}var wi=null,to=null;function Ft(e,t){var n=Ve(e,t);if(n.length){var l,i=Array.prototype.slice.call(arguments,2);wi?l=wi.delayedCallbacks:to?l=to:(l=to=[],setTimeout(ro,0));for(var a=function(u){l.push(function(){return n[u].apply(null,i)})},s=0;s<n.length;++s)a(s)}}function ro(){var e=to;to=null;for(var t=0;t<e.length;++t)e[t]()}function Pa(e,t,n,i){for(var l=0;l<t.changes.length;l++){var a=t.changes[l];"text"==a?Ba(e,t):"gutter"==a?Ra(e,t,n,i):"class"==a?Ol(e,t):"widget"==a&&_a(e,t,i)}t.changes=null}function Ci(e){return e.node==e.text&&(e.node=Q("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),de&&Se<8&&(e.node.style.zIndex=2)),e.node}function jo(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):Ia(e,t)}function Ba(e,t){var n=t.text.className,i=jo(e,t);t.text==t.node&&(t.node=i.pre),t.text.parentNode.replaceChild(i.pre,t.text),t.text=i.pre,i.bgClass!=t.bgClass||i.textClass!=t.textClass?(t.bgClass=i.bgClass,t.textClass=i.textClass,Ol(e,t)):n&&(t.text.className=n)}function Ol(e,t){(function Bs(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var i=Ci(t);t.background=i.insertBefore(Q("div",null,n),i.firstChild),e.display.input.setUneditable(t.background)}})(e,t),t.line.wrapClass?Ci(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className=""),t.text.className=(t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass)||""}function Ra(e,t,n,i){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var l=Ci(t);t.gutterBackground=Q("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),l.insertBefore(t.gutterBackground,t.text)}var a=t.line.gutterMarkers;if(e.options.lineNumbers||a){var s=Ci(t),u=t.gutter=Q("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px");if(u.setAttribute("aria-hidden","true"),e.display.input.setUneditable(u),s.insertBefore(u,t.text),t.line.gutterClass&&(u.className+=" "+t.line.gutterClass),e.options.lineNumbers&&(!a||!a["CodeMirror-linenumbers"])&&(t.lineNumber=u.appendChild(Q("div",O(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),a)for(var f=0;f<e.display.gutterSpecs.length;++f){var c=e.display.gutterSpecs[f].className,h=a.hasOwnProperty(c)&&a[c];h&&u.appendChild(Q("div",[h],"CodeMirror-gutter-elt","left: "+i.gutterLeft[c]+"px; width: "+i.gutterWidth[c]+"px"))}}}function _a(e,t,n){t.alignable&&(t.alignable=null);for(var i=x("CodeMirror-linewidget"),l=t.node.firstChild,a=void 0;l;l=a)a=l.nextSibling,i.test(l.className)&&t.node.removeChild(l);Ga(e,t,n)}function za(e,t,n,i){var l=jo(e,t);return t.text=t.node=l.pre,l.bgClass&&(t.bgClass=l.bgClass),l.textClass&&(t.textClass=l.textClass),Ol(e,t),Ra(e,t,n,i),Ga(e,t,i),t.node}function Ga(e,t,n){if(Si(e,t.line,t,n,!0),t.rest)for(var i=0;i<t.rest.length;i++)Si(e,t.rest[i],t,n,!1)}function Si(e,t,n,i,l){if(t.widgets)for(var a=Ci(n),s=0,u=t.widgets;s<u.length;++s){var f=u[s],c=Q("div",[f.node],"CodeMirror-linewidget"+(f.className?" "+f.className:""));f.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),$r(f,c,n,i),e.display.input.setUneditable(c),l&&f.above?a.insertBefore(c,n.gutter||n.text):a.appendChild(c),Ft(f,"redraw")}}function $r(e,t,n,i){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var l=i.wrapperWidth;t.style.left=i.fixedPos+"px",e.coverGutter||(l-=i.gutterTotalWidth,t.style.paddingLeft=i.gutterTotalWidth+"px"),t.style.width=l+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-i.gutterTotalWidth+"px"))}function wn(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!S(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),re(t.display.measure,Q("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function Pr(e,t){for(var n=Ki(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function no(e){return e.lineSpace.offsetTop}function br(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Cn(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=re(e.measure,Q("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,i={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return!isNaN(i.left)&&!isNaN(i.right)&&(e.cachedPaddingH=i),i}function wr(e){return 50-e.display.nativeBarWidth}function zn(e){return e.display.scroller.clientWidth-wr(e)-e.display.barWidth}function Xo(e){return e.display.scroller.clientHeight-wr(e)-e.display.barHeight}function Wl(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};if(e.rest){for(var i=0;i<e.rest.length;i++)if(e.rest[i]==t)return{map:e.measure.maps[i],cache:e.measure.caches[i]};for(var l=0;l<e.rest.length;l++)if(p(e.rest[l])>n)return{map:e.measure.maps[l],cache:e.measure.caches[l],before:!0}}}function Gn(e,t,n,i){return Br(e,Un(e,t),n,i)}function Cr(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[ur(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function Un(e,t){var n=p(t),i=Cr(e,n);i&&!i.text?i=null:i&&i.changes&&(Pa(e,i,n,$o(e)),e.curOp.forceUpdate=!0),i||(i=function Il(e,t){var n=p(t=Kr(t)),i=e.display.externalMeasured=new _n(e.doc,t,n);i.lineN=n;var l=i.built=Ia(e,i);return i.text=l.pre,re(e.display.lineMeasure,l.pre),i}(e,t));var l=Wl(i,t,n);return{line:t,view:i,rect:null,map:l.map,cache:l.cache,before:l.before,hasHeights:!1}}function Br(e,t,n,i,l){t.before&&(n=-1);var s,a=n+(i||"");return t.cache.hasOwnProperty(a)?s=t.cache[a]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function Rs(e,t,n){var i=e.options.lineWrapping,l=i&&zn(e);if(!t.measure.heights||i&&t.measure.width!=l){var a=t.measure.heights=[];if(i){t.measure.width=l;for(var s=t.text.firstChild.getClientRects(),u=0;u<s.length-1;u++){var f=s[u],c=s[u+1];Math.abs(f.bottom-c.bottom)>2&&a.push((f.bottom+c.top)/2-n.top)}}a.push(n.bottom-n.top)}}(e,t.view,t.rect),t.hasHeights=!0),s=function ja(e,t,n,i){var c,l=Ka(t.map,n,i),a=l.node,s=l.start,u=l.end,f=l.collapse;if(3==a.nodeType){for(var h=0;h<4;h++){for(;s&&Ue(t.line.text.charAt(l.coverStart+s));)--s;for(;l.coverStart+u<l.coverEnd&&Ue(t.line.text.charAt(l.coverStart+u));)++u;if((c=de&&Se<9&&0==s&&u==l.coverEnd-l.coverStart?a.parentNode.getBoundingClientRect():_s(yt(a,s,u).getClientRects(),i)).left||c.right||0==s)break;u=s,s-=1,f="right"}de&&Se<11&&(c=function Xa(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function xn(e){if(null!=hr)return hr;var t=re(e,Q("span","x")),n=t.getBoundingClientRect(),i=yt(t,0,1).getBoundingClientRect();return hr=Math.abs(n.left-i.left)>1}(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*i,bottom:t.bottom*i}}(e.display.measure,c))}else{var d;s>0&&(f=i="right"),c=e.options.lineWrapping&&(d=a.getClientRects()).length>1?d["right"==i?d.length-1:0]:a.getBoundingClientRect()}if(de&&Se<9&&!s&&(!c||!c.left&&!c.right)){var m=a.parentNode.getClientRects()[0];c=m?{left:m.left,right:m.left+kn(e.display),top:m.top,bottom:m.bottom}:Ua}for(var y=c.top-t.rect.top,w=c.bottom-t.rect.top,k=(y+w)/2,M=t.view.measure.heights,D=0;D<M.length-1&&!(k<M[D]);D++);var I={left:("right"==f?c.right:c.left)-t.rect.left,right:("left"==f?c.left:c.right)-t.rect.left,top:D?M[D-1]:0,bottom:M[D]};return!c.left&&!c.right&&(I.bogus=!0),e.options.singleCursorHeightPerLine||(I.rtop=y,I.rbottom=w),I}(e,t,n,i),s.bogus||(t.cache[a]=s)),{left:s.left,right:s.right,top:l?s.rtop:s.top,bottom:l?s.rbottom:s.bottom}}var kr,Ua={left:0,right:0,top:0,bottom:0};function Ka(e,t,n){for(var i,l,a,s,u,f,c=0;c<e.length;c+=3)if(f=e[c+1],t<(u=e[c])?(l=0,a=1,s="left"):t<f?a=1+(l=t-u):(c==e.length-3||t==f&&e[c+3]>t)&&(l=(a=f-u)-1,t>=f&&(s="right")),null!=l){if(i=e[c+2],u==f&&n==(i.insertLeft?"left":"right")&&(s=n),"left"==n&&0==l)for(;c&&e[c-2]==e[c-3]&&e[c-1].insertLeft;)i=e[2+(c-=3)],s="left";if("right"==n&&l==f-u)for(;c<e.length-3&&e[c+3]==e[c+4]&&!e[c+5].insertLeft;)i=e[(c+=3)+2],s="right";break}return{node:i,start:l,end:a,collapse:s,coverStart:u,coverEnd:f}}function _s(e,t){var n=Ua;if("left"==t)for(var i=0;i<e.length&&(n=e[i]).left==n.right;i++);else for(var l=e.length-1;l>=0&&(n=e[l]).left==n.right;l--);return n}function ki(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Hl(e){e.display.externalMeasure=null,H(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)ki(e.display.view[t])}function Li(e){Hl(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Yo(){return ft&&Xt?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function io(){return ft&&Xt?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function qo(e){var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;++n)e.widgets[n].above&&(t+=wn(e.widgets[n]));return t}function Kn(e,t,n,i,l){if(!l){var a=qo(t);n.top+=a,n.bottom+=a}if("line"==i)return n;i||(i="local");var s=Hr(t);if("local"==i?s+=no(e.display):s-=e.display.viewOffset,"page"==i||"window"==i){var u=e.display.lineSpace.getBoundingClientRect();s+=u.top+("window"==i?0:io());var f=u.left+("window"==i?0:Yo());n.left+=f,n.right+=f}return n.top+=s,n.bottom+=s,n}function Sr(e,t,n){if("div"==n)return t;var i=t.left,l=t.top;if("page"==n)i-=Yo(),l-=io();else if("local"==n||!n){var a=e.display.sizer.getBoundingClientRect();i+=a.left,l+=a.top}var s=e.display.lineSpace.getBoundingClientRect();return{left:i-s.left,top:l-s.top}}function oo(e,t,n,i,l){return i||(i=oe(e.doc,t.line)),Kn(e,i,Gn(e,i,t.ch,l),n)}function dr(e,t,n,i,l,a){function s(w,k){var M=Br(e,l,w,k?"right":"left",a);return k?M.left=M.right:M.right=M.left,Kn(e,i,M,n)}i=i||oe(e.doc,t.line),l||(l=Un(e,i));var u=K(i,e.doc.direction),f=t.ch,c=t.sticky;if(f>=i.text.length?(f=i.text.length,c="before"):f<=0&&(f=0,c="after"),!u)return s("before"==c?f-1:f,"before"==c);function h(w,k,M){return s(M?w-1:w,1==u[k].level!=M)}var d=at(u,f,c),m=At,y=h(f,d,"before"==c);return null!=m&&(y.other=h(f,m,"before"!=c)),y}function Zo(e,t){var n=0;t=me(e.doc,t),e.options.lineWrapping||(n=kn(e.display)*t.ch);var i=oe(e.doc,t.line),l=Hr(i)+no(e.display);return{left:n,right:n,top:l,bottom:l+i.height}}function Jo(e,t,n,i,l){var a=E(e,t,n);return a.xRel=l,i&&(a.outside=i),a}function Qo(e,t,n){var i=e.doc;if((n+=e.display.viewOffset)<0)return Jo(i.first,0,null,-1,-1);var l=b(i,n),a=i.first+i.size-1;if(l>a)return Jo(i.first+i.size-1,oe(i,a).text.length,null,1,1);t<0&&(t=0);for(var s=oe(i,l);;){var u=zs(e,s,l,t,n),f=Ir(s,u.ch+(u.xRel>0||u.outside>0?1:0));if(!f)return u;var c=f.find(1);if(c.line==l)return c;s=oe(i,l=c.line)}}function Vo(e,t,n,i){i-=qo(t);var l=t.text.length,a=dt(function(s){return Br(e,n,s-1).bottom<=i},l,0);return{begin:a,end:l=dt(function(s){return Br(e,n,s).top>i},a,l)}}function Ya(e,t,n,i){return n||(n=Un(e,t)),Vo(e,t,n,Kn(e,t,Br(e,n,i),"line").top)}function Pl(e,t,n,i){return!(e.bottom<=n)&&(e.top>n||(i?e.left:e.right)>t)}function zs(e,t,n,i,l){l-=Hr(t);var a=Un(e,t),s=qo(t),u=0,f=t.text.length,c=!0,h=K(t,e.doc.direction);if(h){var d=(e.options.lineWrapping?Ti:jn)(e,t,n,a,h,i,l);u=(c=1!=d.level)?d.from:d.to-1,f=c?d.to:d.from-1}var k,M,m=null,y=null,w=dt(function(_){var q=Br(e,a,_);return q.top+=s,q.bottom+=s,!!Pl(q,i,l,!1)&&(q.top<=l&&q.left<=i&&(m=_,y=q),!0)},u,f),D=!1;if(y){var F=i-y.left<y.right-i,W=F==c;w=m+(W?0:1),M=W?"after":"before",k=F?y.left:y.right}else{!c&&(w==f||w==u)&&w++,M=0==w?"after":w==t.text.length?"before":Br(e,a,w-(c?1:0)).bottom+s<=l==c?"after":"before";var I=dr(e,E(n,w,M),"line",t,a);k=I.left,D=l<I.top?-1:l>=I.bottom?1:0}return Jo(n,w=zt(t.text,w,1),M,D,i-k)}function jn(e,t,n,i,l,a,s){var u=dt(function(d){var m=l[d],y=1!=m.level;return Pl(dr(e,E(n,y?m.to:m.from,y?"before":"after"),"line",t,i),a,s,!0)},0,l.length-1),f=l[u];if(u>0){var c=1!=f.level,h=dr(e,E(n,c?f.from:f.to,c?"after":"before"),"line",t,i);Pl(h,a,s,!0)&&h.top>s&&(f=l[u-1])}return f}function Ti(e,t,n,i,l,a,s){var u=Vo(e,t,i,s),f=u.begin,c=u.end;/\s/.test(t.text.charAt(c-1))&&c--;for(var h=null,d=null,m=0;m<l.length;m++){var y=l[m];if(!(y.from>=c||y.to<=f)){var k=Br(e,i,1!=y.level?Math.min(c,y.to)-1:Math.max(f,y.from)).right,M=k<a?a-k+1e9:k-a;(!h||d>M)&&(h=y,d=M)}}return h||(h=l[l.length-1]),h.from<f&&(h={from:f,to:h.to,level:h.level}),h.to>c&&(h={from:h.from,to:c,level:h.level}),h}function Sn(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==kr){kr=Q("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)kr.appendChild(document.createTextNode("x")),kr.appendChild(Q("br"));kr.appendChild(document.createTextNode("x"))}re(e.measure,kr);var n=kr.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),H(e.measure),n||1}function kn(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=Q("span","xxxxxxxxxx"),n=Q("pre",[t],"CodeMirror-line-like");re(e.measure,n);var i=t.getBoundingClientRect(),l=(i.right-i.left)/10;return l>2&&(e.cachedCharWidth=l),l||10}function $o(e){for(var t=e.display,n={},i={},l=t.gutters.clientLeft,a=t.gutters.firstChild,s=0;a;a=a.nextSibling,++s){var u=e.display.gutterSpecs[s].className;n[u]=a.offsetLeft+a.clientLeft+l,i[u]=a.clientWidth}return{fixedPos:lo(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:t.wrapper.clientWidth}}function lo(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function Ln(e){var t=Sn(e.display),n=e.options.lineWrapping,i=n&&Math.max(5,e.display.scroller.clientWidth/kn(e.display)-3);return function(l){if(rr(e.doc,l))return 0;var a=0;if(l.widgets)for(var s=0;s<l.widgets.length;s++)l.widgets[s].height&&(a+=l.widgets[s].height);return n?a+(Math.ceil(l.text.length/i)||1)*t:a+t}}function en(e){var t=e.doc,n=Ln(e);t.iter(function(i){var l=n(i);l!=i.height&&Ht(i,l)})}function Nt(e,t,n,i){var l=e.display;if(!n&&"true"==Ki(t).getAttribute("cm-not-content"))return null;var a,s,u=l.lineSpace.getBoundingClientRect();try{a=t.clientX-u.left,s=t.clientY-u.top}catch{return null}var c,f=Qo(e,a,s);if(i&&f.xRel>0&&(c=oe(e.doc,f.line).text).length==f.ch){var h=A(c,c.length,e.options.tabSize)-c.length;f=E(f.line,Math.max(0,Math.round((a-Cn(e.display).left)/kn(e.display))-h))}return f}function ur(e,t){if(t>=e.display.viewTo||(t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,i=0;i<n.length;i++)if((t-=n[i].size)<0)return i}function kt(e,t,n,i){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),i||(i=0);var l=e.display;if(i&&n<l.viewTo&&(null==l.updateLineNumbers||l.updateLineNumbers>t)&&(l.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=l.viewTo)Qr&&jr(e.doc,t)<l.viewTo&&Tn(e);else if(n<=l.viewFrom)Qr&&Go(e.doc,n+i)>l.viewFrom?Tn(e):(l.viewFrom+=i,l.viewTo+=i);else if(t<=l.viewFrom&&n>=l.viewTo)Tn(e);else if(t<=l.viewFrom){var a=ao(e,n,n+i,1);a?(l.view=l.view.slice(a.index),l.viewFrom=a.lineN,l.viewTo+=i):Tn(e)}else if(n>=l.viewTo){var s=ao(e,t,t,-1);s?(l.view=l.view.slice(0,s.index),l.viewTo=s.lineN):Tn(e)}else{var u=ao(e,t,t,-1),f=ao(e,n,n+i,1);u&&f?(l.view=l.view.slice(0,u.index).concat(Ko(e,u.lineN,f.lineN)).concat(l.view.slice(f.index)),l.viewTo+=i):Tn(e)}var c=l.externalMeasured;c&&(n<c.lineN?c.lineN+=i:t<c.lineN+c.size&&(l.externalMeasured=null))}function Rr(e,t,n){e.curOp.viewChanged=!0;var i=e.display,l=e.display.externalMeasured;if(l&&t>=l.lineN&&t<l.lineN+l.size&&(i.externalMeasured=null),!(t<i.viewFrom||t>=i.viewTo)){var a=i.view[ur(e,t)];if(null!=a.node){var s=a.changes||(a.changes=[]);-1==B(s,n)&&s.push(n)}}}function Tn(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function ao(e,t,n,i){var a,l=ur(e,t),s=e.display.view;if(!Qr||n==e.doc.first+e.doc.size)return{index:l,lineN:n};for(var u=e.display.viewFrom,f=0;f<l;f++)u+=s[f].size;if(u!=t){if(i>0){if(l==s.length-1)return null;a=u+s[l].size-t,l++}else a=u-t;t+=a,n+=a}for(;jr(e.doc,n)!=n;){if(l==(i<0?0:s.length-1))return null;n+=i*s[l-(i<0?1:0)].size,l+=i}return{index:l,lineN:n}}function Bl(e){for(var t=e.display.view,n=0,i=0;i<t.length;i++){var l=t[i];!l.hidden&&(!l.node||l.changes)&&++n}return n}function Xn(e){e.display.input.showSelection(e.display.input.prepareSelection())}function uo(e,t){void 0===t&&(t=!0);var n=e.doc,i={},l=i.cursors=document.createDocumentFragment(),a=i.selection=document.createDocumentFragment(),s=e.options.$customCursor;s&&(t=!0);for(var u=0;u<n.sel.ranges.length;u++)if(t||u!=n.sel.primIndex){var f=n.sel.ranges[u];if(!(f.from().line>=e.display.viewTo||f.to().line<e.display.viewFrom)){var c=f.empty();if(s){var h=s(e,f);h&&Rl(e,h,l)}else(c||e.options.showCursorWhenSelecting)&&Rl(e,f.head,l);c||qa(e,f,a)}}return i}function Rl(e,t,n){var i=dr(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),l=n.appendChild(Q("div","\xa0","CodeMirror-cursor"));if(l.style.left=i.left+"px",l.style.top=i.top+"px",l.style.height=Math.max(0,i.bottom-i.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var a=oo(e,t,"div",null,null),s=a.right-a.left;l.style.width=(s>0?s:e.defaultCharWidth())+"px"}if(i.other){var u=n.appendChild(Q("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));u.style.display="",u.style.left=i.other.left+"px",u.style.top=i.other.top+"px",u.style.height=.85*(i.other.bottom-i.other.top)+"px"}}function Mi(e,t){return e.top-t.top||e.left-t.left}function qa(e,t,n){var i=e.display,l=e.doc,a=document.createDocumentFragment(),s=Cn(e.display),u=s.left,f=Math.max(i.sizerWidth,zn(e)-i.sizer.offsetLeft)-s.right,c="ltr"==l.direction;function h(W,I,_,q){I<0&&(I=0),I=Math.round(I),q=Math.round(q),a.appendChild(Q("div",null,"CodeMirror-selected","position: absolute; left: "+W+"px;\n                             top: "+I+"px; width: "+(_??f-W)+"px;\n                             height: "+(q-I)+"px"))}function d(W,I,_){var ve,Ye,q=oe(l,W),fe=q.text.length;function Ne(Ee,ze){return oo(e,E(W,Ee),"div",q,ze)}function _e(Ee,ze,Fe){var ke=Ya(e,q,null,Ee),He="ltr"==ze==("after"==Fe)?"left":"right";return Ne("after"==Fe?ke.begin:ke.end-(/\s/.test(q.text.charAt(ke.end-1))?2:1),He)[He]}var tt=K(q,l.direction);return function bt(e,t,n,i){if(!e)return i(t,n,"ltr",0);for(var l=!1,a=0;a<e.length;++a){var s=e[a];(s.from<n&&s.to>t||t==n&&s.to==t)&&(i(Math.max(s.from,t),Math.min(s.to,n),1==s.level?"rtl":"ltr",a),l=!0)}l||i(t,n,"ltr")}(tt,I||0,_??fe,function(Ee,ze,Fe,ke){var He="ltr"==Fe,ot=Ne(Ee,He?"left":"right"),Tt=Ne(ze-1,He?"right":"left"),Mt=null==I&&0==Ee,Vt=null==_&&ze==fe,Pe=0==ke,Dr=!tt||ke==tt.length-1;if(Tt.top-ot.top<=3){var lr=(c?Mt:Vt)&&Pe?u:(He?ot:Tt).left;h(lr,ot.top,((c?Vt:Mt)&&Dr?f:(He?Tt:ot).right)-lr,ot.bottom)}else{var Ar,jt,Cl,fu;He?(Ar=c&&Mt&&Pe?u:ot.left,jt=c?f:_e(Ee,Fe,"before"),Cl=c?u:_e(ze,Fe,"after"),fu=c&&Vt&&Dr?f:Tt.right):(Ar=c?_e(Ee,Fe,"before"):u,jt=!c&&Mt&&Pe?f:ot.right,Cl=!c&&Vt&&Dr?u:Tt.left,fu=c?_e(ze,Fe,"after"):f),h(Ar,ot.top,jt-Ar,ot.bottom),ot.bottom<Tt.top&&h(u,ot.bottom,null,Tt.top),h(Cl,Tt.top,fu-Cl,Tt.bottom)}(!ve||Mi(ot,ve)<0)&&(ve=ot),Mi(Tt,ve)<0&&(ve=Tt),(!Ye||Mi(ot,Ye)<0)&&(Ye=ot),Mi(Tt,Ye)<0&&(Ye=Tt)}),{start:ve,end:Ye}}var m=t.from(),y=t.to();if(m.line==y.line)d(m.line,m.ch,y.ch);else{var w=oe(l,m.line),k=oe(l,y.line),M=Kr(w)==Kr(k),D=d(m.line,m.ch,M?w.text.length+1:null).end,F=d(y.line,M?0:null,y.ch).start;M&&(D.top<F.top-2?(h(D.right,D.top,null,D.bottom),h(u,F.top,F.left,F.bottom)):h(D.right,D.top,F.left-D.right,D.bottom)),D.bottom<F.top&&h(u,D.bottom,null,F.top)}n.appendChild(a)}function fo(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){e.hasFocus()||Yn(e),t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function el(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||Di(e))}function Mn(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&Yn(e))},100)}function Di(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(xt(e,"focus",e,t),e.state.focused=!0,$(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(e.display.input.reset(),qe&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),fo(e))}function Yn(e,t){e.state.delayingBlurEvent||(e.state.focused&&(xt(e,"blur",e,t),e.state.focused=!1,U(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function qn(e){for(var t=e.display,n=t.lineDiv.offsetTop,i=Math.max(0,t.scroller.getBoundingClientRect().top),l=t.lineDiv.getBoundingClientRect().top,a=0,s=0;s<t.view.length;s++){var u=t.view[s],f=e.options.lineWrapping,c=void 0,h=0;if(!u.hidden){if(l+=u.line.height,de&&Se<8){var d=u.node.offsetTop+u.node.offsetHeight;c=d-n,n=d}else{var m=u.node.getBoundingClientRect();c=m.bottom-m.top,!f&&u.text.firstChild&&(h=u.text.firstChild.getBoundingClientRect().right-m.left-1)}var y=u.line.height-c;if((y>.005||y<-.005)&&(l<i&&(a-=y),Ht(u.line,c),Za(u.line),u.rest))for(var w=0;w<u.rest.length;w++)Za(u.rest[w]);if(h>e.display.sizerWidth){var k=Math.ceil(h/kn(e.display));k>e.display.maxLineLength&&(e.display.maxLineLength=k,e.display.maxLine=u.line,e.display.maxLineChanged=!0)}}}Math.abs(a)>2&&(t.scroller.scrollTop+=a)}function Za(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],i=n.node.parentNode;i&&(n.height=i.offsetHeight)}}function tl(e,t,n){var i=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;i=Math.floor(i-no(e));var l=n&&null!=n.bottom?n.bottom:i+e.wrapper.clientHeight,a=b(t,i),s=b(t,l);if(n&&n.ensure){var u=n.ensure.from.line,f=n.ensure.to.line;u<a?(a=u,s=b(t,Hr(oe(t,u))+e.wrapper.clientHeight)):Math.min(f,t.lastLine())>=s&&(a=b(t,Hr(oe(t,f))-e.wrapper.clientHeight),s=f)}return{from:a,to:Math.max(s,a+1)}}function Dn(e,t){var n=e.display,i=Sn(e.display);t.top<0&&(t.top=0);var l=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,a=Xo(e),s={};t.bottom-t.top>a&&(t.bottom=t.top+a);var u=e.doc.height+br(n),c=t.bottom>u-i;if(t.top<l)s.scrollTop=t.top<i?0:t.top;else if(t.bottom>l+a){var h=Math.min(t.top,(c?u:t.bottom)-a);h!=l&&(s.scrollTop=h)}var d=e.options.fixedGutter?0:n.gutters.offsetWidth,m=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft-d,y=zn(e)-n.gutters.offsetWidth,w=t.right-t.left>y;return w&&(t.right=t.left+y),t.left<10?s.scrollLeft=0:t.left<m?s.scrollLeft=Math.max(0,t.left+d-(w?0:10)):t.right>y+m-3&&(s.scrollLeft=t.right+(w?0:10)-y),s}function Zn(e,t){null!=t&&(Nn(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Ai(e){Nn(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function An(e,t,n){(null!=t||null!=n)&&Nn(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function Nn(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,Gl(e,Zo(e,t.from),Zo(e,t.to),t.margin))}function Gl(e,t,n,i){var l=Dn(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-i,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+i});An(e,l.scrollLeft,l.scrollTop)}function _r(e,t){Math.abs(e.doc.scrollTop-t)<2||(Me||ho(e,{top:t}),Ni(e,t,!0),Me&&ho(e),Fn(e,100))}function Ni(e,t,n){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function pr(e,t,n,i){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),(!(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||i)&&(e.doc.scrollLeft=t,ol(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function tn(e){var t=e.display,n=t.gutters.offsetWidth,i=Math.round(e.doc.height+br(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:i,scrollHeight:i+wr(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var Lr=function(e,t,n){this.cm=n;var i=this.vert=Q("div",[Q("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),l=this.horiz=Q("div",[Q("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");i.tabIndex=l.tabIndex=-1,e(i),e(l),ne(i,"scroll",function(){i.clientHeight&&t(i.scrollTop,"vertical")}),ne(l,"scroll",function(){l.clientWidth&&t(l.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,de&&Se<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Lr.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,i=e.nativeBarWidth;return n?(this.vert.style.display="block",this.vert.style.bottom=t?i+"px":"0",this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+(e.viewHeight-(t?i:0)))+"px"):(this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0"),t?(this.horiz.style.display="block",this.horiz.style.right=n?i+"px":"0",this.horiz.style.left=e.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+(e.viewWidth-e.barLeft-(n?i:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&e.clientHeight>0&&(0==i&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?i:0,bottom:t?i:0}},Lr.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Lr.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Lr.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=g&&!$t?"12px":"18px",this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new le,this.disableVert=new le},Lr.prototype.enableZeroWidthBar=function(e,t,n){e.style.pointerEvents="auto",t.set(1e3,function i(){var l=e.getBoundingClientRect();("vert"==n?document.elementFromPoint(l.right-1,(l.top+l.bottom)/2):document.elementFromPoint((l.right+l.left)/2,l.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,i)})},Lr.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Ei=function(){};function Jn(e,t){t||(t=tn(e));var n=e.display.barWidth,i=e.display.barHeight;Ul(e,t);for(var l=0;l<4&&n!=e.display.barWidth||i!=e.display.barHeight;l++)n!=e.display.barWidth&&e.options.lineWrapping&&qn(e),Ul(e,tn(e)),n=e.display.barWidth,i=e.display.barHeight}function Ul(e,t){var n=e.display,i=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=i.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=i.bottom)+"px",n.heightForcer.style.borderBottom=i.bottom+"px solid transparent",i.right&&i.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=i.bottom+"px",n.scrollbarFiller.style.width=i.right+"px"):n.scrollbarFiller.style.display="",i.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=i.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}Ei.prototype.update=function(){return{bottom:0,right:0}},Ei.prototype.setScrollLeft=function(){},Ei.prototype.setScrollTop=function(){},Ei.prototype.clear=function(){};var Qa={native:Lr,null:Ei};function En(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&U(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Qa[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),ne(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,n){"horizontal"==n?pr(e,t):_r(e,t)},e),e.display.scrollbars.addClass&&$(e.display.wrapper,e.display.scrollbars.addClass)}var Qn=0;function Vn(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Qn,markArrays:null},function Ps(e){wi?wi.ops.push(e):e.ownsGroup=wi={ops:[e],delayedCallbacks:[]}}(e.curOp)}function $n(e){var t=e.curOp;t&&function Pt(e,t){var n=e.ownsGroup;if(n)try{!function eo(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var i=0;i<e.ops.length;i++){var l=e.ops[i];if(l.cursorActivityHandlers)for(;l.cursorActivityCalled<l.cursorActivityHandlers.length;)l.cursorActivityHandlers[l.cursorActivityCalled++].call(null,l.cm)}}while(n<t.length)}(n)}finally{wi=null,t(n)}}(t,function(n){for(var i=0;i<n.ops.length;i++)n.ops[i].cm.curOp=null;!function Us(e){for(var t=e.ops,n=0;n<t.length;n++)Ks(t[n]);for(var i=0;i<t.length;i++)js(t[i]);for(var l=0;l<t.length;l++)Xs(t[l]);for(var a=0;a<t.length;a++)fr(t[a]);for(var s=0;s<t.length;s++)Bt(t[s])}(n)})}function Ks(e){var t=e.cm,n=t.display;(function qs(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=wr(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=wr(e)+"px",t.scrollbarsClipped=!0)})(t),e.updateMaxLine&&El(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new rl(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function js(e){e.updatedDisplay=e.mustUpdate&&co(e.cm,e.update)}function Xs(e){var t=e.cm,n=t.display;e.updatedDisplay&&qn(t),e.barMeasure=tn(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Gn(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+wr(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-zn(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function fr(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&pr(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==v();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Jn(t,e.barMeasure),e.updatedDisplay&&il(t,e.barMeasure),e.selectionChanged&&fo(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&el(e.cm)}function Bt(e){var t=e.cm,n=t.display,i=t.doc;if(e.updatedDisplay&&$a(t,e.update),null!=n.wheelStartX&&(null!=e.scrollTop||null!=e.scrollLeft||e.scrollToPos)&&(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&Ni(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&pr(t,e.scrollLeft,!0,!0),e.scrollToPos){var l=function _l(e,t,n,i){var l;null==i&&(i=0),!e.options.lineWrapping&&t==n&&(n="before"==t.sticky?E(t.line,t.ch+1,"before"):t,t=t.ch?E(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t);for(var a=0;a<5;a++){var s=!1,u=dr(e,t),f=n&&n!=t?dr(e,n):u,c=Dn(e,l={left:Math.min(u.left,f.left),top:Math.min(u.top,f.top)-i,right:Math.max(u.left,f.left),bottom:Math.max(u.bottom,f.bottom)+i}),h=e.doc.scrollTop,d=e.doc.scrollLeft;if(null!=c.scrollTop&&(_r(e,c.scrollTop),Math.abs(e.doc.scrollTop-h)>1&&(s=!0)),null!=c.scrollLeft&&(pr(e,c.scrollLeft),Math.abs(e.doc.scrollLeft-d)>1&&(s=!0)),!s)break}return l}(t,me(i,e.scrollToPos.from),me(i,e.scrollToPos.to),e.scrollToPos.margin);!function Gs(e,t){if(!Be(e,"scrollCursorIntoView")){var n=e.display,i=n.sizer.getBoundingClientRect(),l=null;if(t.top+i.top<0?l=!0:t.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(l=!1),null!=l&&!er){var a=Q("div","\u200b",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-no(e.display))+"px;\n                         height: "+(t.bottom-t.top+wr(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(a),a.scrollIntoView(l),e.display.lineSpace.removeChild(a)}}}(t,l)}var a=e.maybeHiddenMarkers,s=e.maybeUnhiddenMarkers;if(a)for(var u=0;u<a.length;++u)a[u].lines.length||xt(a[u],"hide");if(s)for(var f=0;f<s.length;++f)s[f].lines.length&&xt(s[f],"unhide");n.wrapper.offsetHeight&&(i.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&xt(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function et(e,t){if(e.curOp)return t();Vn(e);try{return t()}finally{$n(e)}}function Oe(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Vn(e);try{return t.apply(e,arguments)}finally{$n(e)}}}function Ot(e){return function(){if(this.curOp)return e.apply(this,arguments);Vn(this);try{return e.apply(this,arguments)}finally{$n(this)}}}function Rt(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Vn(t);try{return e.apply(this,arguments)}finally{$n(t)}}}function Fn(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,V(Ys,e))}function Ys(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,i=mi(e,t.highlightFrontier),l=[];t.iter(i.line,Math.min(t.first+t.size,e.display.viewTo+500),function(a){if(i.line>=e.display.viewFrom){var s=a.styles,u=a.text.length>e.options.maxHighlightLength?Fr(t.mode,i.state):null,f=gi(e,a,i,!0);u&&(i.state=u),a.styles=f.styles;var c=a.styleClasses,h=f.classes;h?a.styleClasses=h:c&&(a.styleClasses=null);for(var d=!s||s.length!=a.styles.length||c!=h&&(!c||!h||c.bgClass!=h.bgClass||c.textClass!=h.textClass),m=0;!d&&m<s.length;++m)d=s[m]!=a.styles[m];d&&l.push(i.line),a.stateAfter=i.save(),i.nextLine()}else a.text.length<=e.options.maxHighlightLength&&Xi(e,a.text,i),a.stateAfter=i.line%5==0?i.save():null,i.nextLine();if(+new Date>n)return Fn(e,e.options.workDelay),!0}),t.highlightFrontier=i.line,t.modeFrontier=Math.max(t.modeFrontier,i.line),l.length&&et(e,function(){for(var a=0;a<l.length;a++)Rr(e,l[a],"text")})}}var rl=function(e,t,n){var i=e.display;this.viewport=t,this.visible=tl(i,e.doc,t),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=zn(e),this.force=n,this.dims=$o(e),this.events=[]};function co(e,t){var n=e.display,i=e.doc;if(t.editorIsHidden)return Tn(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==Bl(e))return!1;Xl(e)&&(Tn(e),t.dims=$o(e));var l=i.first+i.size,a=Math.max(t.visible.from-e.options.viewportMargin,i.first),s=Math.min(l,t.visible.to+e.options.viewportMargin);n.viewFrom<a&&a-n.viewFrom<20&&(a=Math.max(i.first,n.viewFrom)),n.viewTo>s&&n.viewTo-s<20&&(s=Math.min(l,n.viewTo)),Qr&&(a=jr(e.doc,a),s=Go(e.doc,s));var u=a!=n.viewFrom||s!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;(function so(e,t,n){var i=e.display;0==i.view.length||t>=i.viewTo||n<=i.viewFrom?(i.view=Ko(e,t,n),i.viewFrom=t):(i.viewFrom>t?i.view=Ko(e,t,i.viewFrom).concat(i.view):i.viewFrom<t&&(i.view=i.view.slice(ur(e,t))),i.viewFrom=t,i.viewTo<n?i.view=i.view.concat(Ko(e,i.viewTo,n)):i.viewTo>n&&(i.view=i.view.slice(0,ur(e,n)))),i.viewTo=n})(e,a,s),n.viewOffset=Hr(oe(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var f=Bl(e);if(!u&&0==f&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var c=function Kl(e){if(e.hasFocus())return null;var t=v();if(!t||!S(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var i=window.getSelection();i.anchorNode&&i.extend&&S(e.display.lineDiv,i.anchorNode)&&(n.anchorNode=i.anchorNode,n.anchorOffset=i.anchorOffset,n.focusNode=i.focusNode,n.focusOffset=i.focusOffset)}return n}(e);return f>4&&(n.lineDiv.style.display="none"),function jl(e,t,n){var i=e.display,l=e.options.lineNumbers,a=i.lineDiv,s=a.firstChild;function u(w){var k=w.nextSibling;return qe&&g&&e.display.currentWheelTarget==w?w.style.display="none":w.parentNode.removeChild(w),k}for(var f=i.view,c=i.viewFrom,h=0;h<f.length;h++){var d=f[h];if(!d.hidden)if(d.node&&d.node.parentNode==a){for(;s!=d.node;)s=u(s);var y=l&&null!=t&&t<=c&&d.lineNumber;d.changes&&(B(d.changes,"gutter")>-1&&(y=!1),Pa(e,d,c,n)),y&&(H(d.lineNumber),d.lineNumber.appendChild(document.createTextNode(O(e.options,c)))),s=d.node.nextSibling}else{var m=za(e,d,c,n);a.insertBefore(m,s)}c+=d.size}for(;s;)s=u(s)}(e,n.updateLineNumbers,t.dims),f>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function Va(e){if(e&&e.activeElt&&e.activeElt!=v()&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&S(document.body,e.anchorNode)&&S(document.body,e.focusNode))){var t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),t.removeAllRanges(),t.addRange(n),t.extend(e.focusNode,e.focusOffset)}}(c),H(n.cursorDiv),H(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,u&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,Fn(e,400)),n.updateLineNumbers=null,!0}function $a(e,t){for(var n=t.viewport,i=!0;;i=!1){if(i&&e.options.lineWrapping&&t.oldDisplayWidth!=zn(e))i&&(t.visible=tl(e.display,e.doc,n));else if(n&&null!=n.top&&(n={top:Math.min(e.doc.height+br(e.display)-Xo(e),n.top)}),t.visible=tl(e.display,e.doc,n),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!co(e,t))break;qn(e);var l=tn(e);Xn(e),Jn(e,l),il(e,l),t.force=!1}t.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function ho(e,t){var n=new rl(e,t);if(co(e,n)){qn(e),$a(e,n);var i=tn(e);Xn(e),Jn(e,i),il(e,i),n.finish()}}function nl(e){e.sizer.style.marginLeft=e.gutters.offsetWidth+"px",Ft(e,"gutterChanged",e)}function il(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+wr(e)+"px"}function ol(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var i=lo(t)-t.scroller.scrollLeft+e.doc.scrollLeft,l=t.gutters.offsetWidth,a=i+"px",s=0;s<n.length;s++)if(!n[s].hidden){e.options.fixedGutter&&(n[s].gutter&&(n[s].gutter.style.left=a),n[s].gutterBackground&&(n[s].gutterBackground.style.left=a));var u=n[s].alignable;if(u)for(var f=0;f<u.length;f++)u[f].style.left=a}e.options.fixedGutter&&(t.gutters.style.left=i+l+"px")}}function Xl(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=O(e.options,t.first+t.size-1),i=e.display;if(n.length!=i.lineNumChars){var l=i.measure.appendChild(Q("div",[Q("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),a=l.firstChild.offsetWidth,s=l.offsetWidth-a;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(a,i.lineGutter.offsetWidth-s)+1,i.lineNumWidth=i.lineNumInnerWidth+s,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",nl(e.display),!0}return!1}function ei(e,t){for(var n=[],i=!1,l=0;l<e.length;l++){var a=e[l],s=null;if("string"!=typeof a&&(s=a.style,a=a.className),"CodeMirror-linenumbers"==a){if(!t)continue;i=!0}n.push({className:a,style:s})}return t&&!i&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function es(e){var t=e.gutters,n=e.gutterSpecs;H(t),e.lineGutter=null;for(var i=0;i<n.length;++i){var l=n[i],a=l.className,s=l.style,u=t.appendChild(Q("div",null,"CodeMirror-gutter "+a));s&&(u.style.cssText=s),"CodeMirror-linenumbers"==a&&(e.lineGutter=u,u.style.width=(e.lineNumWidth||1)+"px")}t.style.display=n.length?"":"none",nl(e)}function On(e){es(e.display),kt(e),ol(e)}function rn(e,t,n,i){var l=this;this.input=n,l.scrollbarFiller=Q("div",null,"CodeMirror-scrollbar-filler"),l.scrollbarFiller.setAttribute("cm-not-content","true"),l.gutterFiller=Q("div",null,"CodeMirror-gutter-filler"),l.gutterFiller.setAttribute("cm-not-content","true"),l.lineDiv=nt("div",null,"CodeMirror-code"),l.selectionDiv=Q("div",null,null,"position: relative; z-index: 1"),l.cursorDiv=Q("div",null,"CodeMirror-cursors"),l.measure=Q("div",null,"CodeMirror-measure"),l.lineMeasure=Q("div",null,"CodeMirror-measure"),l.lineSpace=nt("div",[l.measure,l.lineMeasure,l.selectionDiv,l.cursorDiv,l.lineDiv],null,"position: relative; outline: none");var a=nt("div",[l.lineSpace],"CodeMirror-lines");l.mover=Q("div",[a],null,"position: relative"),l.sizer=Q("div",[l.mover],"CodeMirror-sizer"),l.sizerWidth=null,l.heightForcer=Q("div",null,null,"position: absolute; height: 50px; width: 1px;"),l.gutters=Q("div",null,"CodeMirror-gutters"),l.lineGutter=null,l.scroller=Q("div",[l.sizer,l.heightForcer,l.gutters],"CodeMirror-scroll"),l.scroller.setAttribute("tabIndex","-1"),l.wrapper=Q("div",[l.scrollbarFiller,l.gutterFiller,l.scroller],"CodeMirror"),l.wrapper.setAttribute("translate","no"),de&&Se<8&&(l.gutters.style.zIndex=-1,l.scroller.style.paddingRight=0),!qe&&!(Me&&lt)&&(l.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(l.wrapper):e(l.wrapper)),l.viewFrom=l.viewTo=t.first,l.reportedViewFrom=l.reportedViewTo=t.first,l.view=[],l.renderedView=null,l.externalMeasured=null,l.viewOffset=0,l.lastWrapHeight=l.lastWrapWidth=0,l.updateLineNumbers=null,l.nativeBarWidth=l.barHeight=l.barWidth=0,l.scrollbarsClipped=!1,l.lineNumWidth=l.lineNumInnerWidth=l.lineNumChars=null,l.alignWidgets=!1,l.cachedCharWidth=l.cachedTextHeight=l.cachedPaddingH=null,l.maxLine=null,l.maxLineLength=0,l.maxLineChanged=!1,l.wheelDX=l.wheelDY=l.wheelStartX=l.wheelStartY=null,l.shift=!1,l.selForContextMenu=null,l.activeTouch=null,l.gutterSpecs=ei(i.gutters,i.lineNumbers),es(l),n.init(l)}rl.prototype.signal=function(e,t){it(e,t)&&this.events.push(arguments)},rl.prototype.finish=function(){for(var e=0;e<this.events.length;e++)xt.apply(null,this.events[e])};var po=0,nn=null;function Yl(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function vr(e){var t=Yl(e);return t.x*=nn,t.y*=nn,t}function Ke(e,t){var n=Yl(t),i=n.x,l=n.y,a=nn;0===t.deltaMode&&(i=t.deltaX,l=t.deltaY,a=1);var s=e.display,u=s.scroller,c=u.scrollHeight>u.clientHeight;if(i&&u.scrollWidth>u.clientWidth||l&&c){if(l&&g&&qe)e:for(var h=t.target,d=s.view;h!=u;h=h.parentNode)for(var m=0;m<d.length;m++)if(d[m].node==h){e.display.currentWheelTarget=h;break e}if(i&&!Me&&!he&&null!=a)return l&&c&&_r(e,Math.max(0,u.scrollTop+l*a)),pr(e,Math.max(0,u.scrollLeft+i*a)),(!l||l&&c)&&It(t),void(s.wheelStartX=null);if(l&&null!=a){var y=l*a,w=e.doc.scrollTop,k=w+s.wrapper.clientHeight;y<0?w=Math.max(0,w+y-50):k=Math.min(e.doc.height,k+y+50),ho(e,{top:w,bottom:k})}po<20&&0!==t.deltaMode&&(null==s.wheelStartX?(s.wheelStartX=u.scrollLeft,s.wheelStartY=u.scrollTop,s.wheelDX=i,s.wheelDY=l,setTimeout(function(){if(null!=s.wheelStartX){var M=u.scrollLeft-s.wheelStartX,D=u.scrollTop-s.wheelStartY,F=D&&s.wheelDY&&D/s.wheelDY||M&&s.wheelDX&&M/s.wheelDX;s.wheelStartX=s.wheelStartY=null,F&&(nn=(nn*po+F)/(po+1),++po)}},200)):(s.wheelDX+=i,s.wheelDY+=l))}}de?nn=-.53:Me?nn=15:ft?nn=-.7:Ze&&(nn=-1/3);var wt=function(e,t){this.ranges=e,this.primIndex=t};wt.prototype.primary=function(){return this.ranges[this.primIndex]},wt.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],i=e.ranges[t];if(!Ie(n.anchor,i.anchor)||!Ie(n.head,i.head))return!1}return!0},wt.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new De(St(this.ranges[t].anchor),St(this.ranges[t].head));return new wt(e,this.primIndex)},wt.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},wt.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var i=this.ranges[n];if(Z(t,i.from())>=0&&Z(e,i.to())<=0)return n}return-1};var De=function(e,t){this.anchor=e,this.head=t};function Ut(e,t,n){var i=e&&e.options.selectionsMayTouch,l=t[n];t.sort(function(m,y){return Z(m.from(),y.from())}),n=B(t,l);for(var a=1;a<t.length;a++){var s=t[a],u=t[a-1],f=Z(u.to(),s.from());if(i&&!s.empty()?f>0:f>=0){var c=pe(u.from(),s.from()),h=tr(u.to(),s.to()),d=u.empty()?s.from()==s.head:u.from()==u.head;a<=n&&--n,t.splice(--a,2,new De(d?h:c,d?c:h))}}return new wt(t,n)}function on(e,t){return new wt([new De(e,t||e)],0)}function Xr(e){return e.text?E(e.from.line+e.text.length-1,Le(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function ql(e,t){if(Z(e,t.from)<0)return e;if(Z(e,t.to)<=0)return Xr(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,i=e.ch;return e.line==t.to.line&&(i+=Xr(t).ch-t.to.ch),E(n,i)}function Zl(e,t){for(var n=[],i=0;i<e.sel.ranges.length;i++){var l=e.sel.ranges[i];n.push(new De(ql(l.anchor,t),ql(l.head,t)))}return Ut(e.cm,n,e.sel.primIndex)}function ll(e,t,n){return e.line==t.line?E(n.line,e.ch-t.ch+n.ch):E(n.line+(e.line-t.line),e.ch)}function al(e){e.doc.mode=vi(e.options,e.doc.modeOption),ti(e)}function ti(e){e.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,Fn(e,100),e.state.modeGen++,e.curOp&&kt(e)}function ln(e,t){return 0==t.from.ch&&0==t.to.ch&&""==Le(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function sl(e,t,n,i){function l(F){return n?n[F]:null}function a(F,W,I){(function Fs(e,t,n,i){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Zi(e),Ji(e,n);var l=i?i(e):1;l!=e.height&&Ht(e,l)})(F,W,I,i),Ft(F,"change",F,t)}function s(F,W){for(var I=[],_=F;_<W;++_)I.push(new bi(c[_],l(_),i));return I}var u=t.from,f=t.to,c=t.text,h=oe(e,u.line),d=oe(e,f.line),m=Le(c),y=l(c.length-1),w=f.line-u.line;if(t.full)e.insert(0,s(0,c.length)),e.remove(c.length,e.size-c.length);else if(ln(e,t)){var k=s(0,c.length-1);a(d,d.text,y),w&&e.remove(u.line,w),k.length&&e.insert(u.line,k)}else if(h==d)if(1==c.length)a(h,h.text.slice(0,u.ch)+m+h.text.slice(f.ch),y);else{var M=s(1,c.length-1);M.push(new bi(m+h.text.slice(f.ch),y,i)),a(h,h.text.slice(0,u.ch)+c[0],l(0)),e.insert(u.line+1,M)}else if(1==c.length)a(h,h.text.slice(0,u.ch)+c[0]+d.text.slice(f.ch),l(0)),e.remove(u.line+1,w);else{a(h,h.text.slice(0,u.ch)+c[0],l(0)),a(d,m+d.text.slice(f.ch),y);var D=s(1,c.length-1);w>1&&e.remove(u.line+1,w-1),e.insert(u.line+1,D)}Ft(e,"change",e,t)}function an(e,t,n){!function i(l,a,s){if(l.linked)for(var u=0;u<l.linked.length;++u){var f=l.linked[u];if(f.doc!=a){var c=s&&f.sharedHist;n&&!c||(t(f.doc,c),i(f.doc,l,c))}}}(e,null,!0)}function ts(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,en(e),al(e),go(e),e.options.direction=t.direction,e.options.lineWrapping||El(e),e.options.mode=t.modeOption,kt(e)}function go(e){("rtl"==e.doc.direction?$:U)(e.display.lineDiv,"CodeMirror-rtl")}function mo(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function Ql(e,t){var n={from:St(t.from),to:Xr(t),text:Gt(e,t.from,t.to)};return is(e,n,t.from.line,t.to.line+1),an(e,function(i){return is(i,n,t.from.line,t.to.line+1)},!0),n}function Vl(e){for(;e.length&&Le(e).ranges;)e.pop()}function rs(e,t,n,i){var l=e.history;l.undone.length=0;var s,u,a=+new Date;if((l.lastOp==i||l.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&l.lastModTime>a-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(s=function Zs(e,t){return t?(Vl(e.done),Le(e.done)):e.done.length&&!Le(e.done).ranges?Le(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),Le(e.done)):void 0}(l,l.lastOp==i)))u=Le(s.changes),0==Z(t.from,t.to)&&0==Z(t.from,u.to)?u.to=Xr(t):s.changes.push(Ql(e,t));else{var f=Le(l.done);for((!f||!f.ranges)&&fl(e.sel,l.done),s={changes:[Ql(e,t)],generation:l.generation},l.done.push(s);l.done.length>l.undoDepth;)l.done.shift(),l.done[0].ranges||l.done.shift()}l.done.push(n),l.generation=++l.maxGeneration,l.lastModTime=l.lastSelTime=a,l.lastOp=l.lastSelOp=i,l.lastOrigin=l.lastSelOrigin=t.origin,u||xt(e,"historyAdded")}function fl(e,t){var n=Le(t);n&&n.ranges&&n.equals(e)||t.push(e)}function is(e,t,n,i){var l=t["spans_"+e.id],a=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,i),function(s){s.markedSpans&&((l||(l=t["spans_"+e.id]={}))[a]=s.markedSpans),++a})}function os(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function cl(e,t){var n=function Fi(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var i=[],l=0;l<t.text.length;++l)i.push(os(n[l]));return i}(e,t),i=Dl(e,t);if(!n)return i;if(!i)return n;for(var l=0;l<n.length;++l){var a=n[l],s=i[l];if(a&&s)e:for(var u=0;u<s.length;++u){for(var f=s[u],c=0;c<a.length;++c)if(a[c].marker==f.marker)continue e;a.push(f)}else s&&(n[l]=s)}return n}function sn(e,t,n){for(var i=[],l=0;l<e.length;++l){var a=e[l];if(a.ranges)i.push(n?wt.prototype.deepCopy.call(a):a);else{var s=a.changes,u=[];i.push({changes:u});for(var f=0;f<s.length;++f){var c=s[f],h=void 0;if(u.push({from:c.from,to:c.to,text:c.text}),t)for(var d in c)(h=d.match(/^spans_(\d+)$/))&&B(t,Number(h[1]))>-1&&(Le(u)[d]=c[d],delete c[d])}}}return i}function hl(e,t,n,i){if(i){var l=e.anchor;if(n){var a=Z(t,l)<0;a!=Z(n,l)<0?(l=t,t=n):a!=Z(t,n)<0&&(t=n)}return new De(l,t)}return new De(n||t,t)}function Oi(e,t,n,i,l){null==l&&(l=e.cm&&(e.cm.display.shift||e.extend)),Kt(e,new wt([hl(e.sel.primary(),t,n,l)],0),i)}function $l(e,t,n){for(var i=[],l=e.cm&&(e.cm.display.shift||e.extend),a=0;a<e.sel.ranges.length;a++)i[a]=hl(e.sel.ranges[a],t[a],null,l);Kt(e,Ut(e.cm,i,e.sel.primIndex),n)}function ea(e,t,n,i){var l=e.sel.ranges.slice(0);l[t]=n,Kt(e,Ut(e.cm,l,e.sel.primIndex),i)}function ta(e,t,n,i){Kt(e,on(t,n),i)}function yo(e,t,n){var i=e.history.done,l=Le(i);l&&l.ranges?(i[i.length-1]=t,xo(e,t,n)):Kt(e,t,n)}function Kt(e,t,n){xo(e,t,n),function ns(e,t,n,i){var l=e.history,a=i&&i.origin;n==l.lastSelOp||a&&l.lastSelOrigin==a&&(l.lastModTime==l.lastSelTime&&l.lastOrigin==a||function ul(e,t,n,i){var l=t.charAt(0);return"*"==l||"+"==l&&n.ranges.length==i.ranges.length&&n.somethingSelected()==i.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,a,Le(l.done),t))?l.done[l.done.length-1]=t:fl(t,l.done),l.lastSelTime=+new Date,l.lastSelOrigin=a,l.lastSelOp=n,i&&!1!==i.clearRedo&&Vl(l.undone)}(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function xo(e,t,n){(it(e,"beforeSelectionChange")||e.cm&&it(e.cm,"beforeSelectionChange"))&&(t=function Qt(e,t,n){var i={ranges:t.ranges,update:function(l){this.ranges=[];for(var a=0;a<l.length;a++)this.ranges[a]=new De(me(e,l[a].anchor),me(e,l[a].head))},origin:n&&n.origin};return xt(e,"beforeSelectionChange",e,i),e.cm&&xt(e.cm,"beforeSelectionChange",e.cm,i),i.ranges!=t.ranges?Ut(e.cm,i.ranges,i.ranges.length-1):t}(e,t,n));var i=n&&n.bias||(Z(t.primary().head,e.sel.primary().head)<0?-1:1);ra(e,bo(e,t,i,!0)),(!n||!1!==n.scroll)&&e.cm&&"nocursor"!=e.cm.getOption("readOnly")&&Ai(e.cm)}function ra(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,Zt(e.cm)),Ft(e,"cursorActivity",e))}function ri(e){ra(e,bo(e,e.sel,null,!1))}function bo(e,t,n,i){for(var l,a=0;a<t.ranges.length;a++){var s=t.ranges[a],u=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[a],f=wo(e,s.anchor,u&&u.anchor,n,i),c=wo(e,s.head,u&&u.head,n,i);(l||f!=s.anchor||c!=s.head)&&(l||(l=t.ranges.slice(0,a)),l[a]=new De(f,c))}return l?Ut(e.cm,l,t.primIndex):t}function ni(e,t,n,i,l){var a=oe(e,t.line);if(a.markedSpans)for(var s=0;s<a.markedSpans.length;++s){var u=a.markedSpans[s],f=u.marker,c="selectLeft"in f?!f.selectLeft:f.inclusiveLeft,h="selectRight"in f?!f.selectRight:f.inclusiveRight;if((null==u.from||(c?u.from<=t.ch:u.from<t.ch))&&(null==u.to||(h?u.to>=t.ch:u.to>t.ch))){if(l&&(xt(f,"beforeCursorEnter"),f.explicitlyCleared)){if(a.markedSpans){--s;continue}break}if(!f.atomic)continue;if(n){var d=f.find(i<0?1:-1),m=void 0;if((i<0?h:c)&&(d=na(e,d,-i,d&&d.line==t.line?a:null)),d&&d.line==t.line&&(m=Z(d,n))&&(i<0?m<0:m>0))return ni(e,d,t,i,l)}var y=f.find(i<0?-1:1);return(i<0?c:h)&&(y=na(e,y,i,y.line==t.line?a:null)),y?ni(e,y,t,i,l):null}}return t}function wo(e,t,n,i,l){var a=i||1;return ni(e,t,n,a,l)||!l&&ni(e,t,n,a,!0)||ni(e,t,n,-a,l)||!l&&ni(e,t,n,-a,!0)||(e.cantEdit=!0,E(e.first,0))}function na(e,t,n,i){return n<0&&0==t.ch?t.line>e.first?me(e,E(t.line-1)):null:n>0&&t.ch==(i||oe(e,t.line)).text.length?t.line<e.first+e.size-1?E(t.line+1,0):null:new E(t.line,t.ch+n)}function ii(e){e.setSelection(E(e.firstLine(),0),E(e.lastLine()),ht)}function ia(e,t,n){var i={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return i.canceled=!0}};return n&&(i.update=function(l,a,s,u){l&&(i.from=me(e,l)),a&&(i.to=me(e,a)),s&&(i.text=s),void 0!==u&&(i.origin=u)}),xt(e,"beforeChange",e,i),e.cm&&xt(e.cm,"beforeChange",e.cm,i),i.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:i.from,to:i.to,text:i.text,origin:i.origin}}function un(e,t,n){if(e.cm){if(!e.cm.curOp)return Oe(e.cm,un)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(it(e,"beforeChange")||e.cm&&it(e.cm,"beforeChange"))||(t=ia(e,t,!0))){var i=Ta&&!n&&function Da(e,t,n){var i=null;if(e.iter(t.line,n.line+1,function(y){if(y.markedSpans)for(var w=0;w<y.markedSpans.length;++w){var k=y.markedSpans[w].marker;k.readOnly&&(!i||-1==B(i,k))&&(i||(i=[])).push(k)}}),!i)return null;for(var l=[{from:t,to:n}],a=0;a<i.length;++a)for(var s=i[a],u=s.find(0),f=0;f<l.length;++f){var c=l[f];if(!(Z(c.to,u.from)<0||Z(c.from,u.to)>0)){var h=[f,1],d=Z(c.from,u.from),m=Z(c.to,u.to);(d<0||!s.inclusiveLeft&&!d)&&h.push({from:c.from,to:u.from}),(m>0||!s.inclusiveRight&&!m)&&h.push({from:u.to,to:c.to}),l.splice.apply(l,h),f+=h.length-3}}return l}(e,t.from,t.to);if(i)for(var l=i.length-1;l>=0;--l)oa(e,{from:i[l].from,to:i[l].to,text:l?[""]:t.text,origin:t.origin});else oa(e,t)}}function oa(e,t){if(1!=t.text.length||""!=t.text[0]||0!=Z(t.from,t.to)){var n=Zl(e,t);rs(e,t,n,e.cm?e.cm.curOp.id:NaN),Yr(e,t,n,Dl(e,t));var i=[];an(e,function(l,a){!a&&-1==B(i,l.history)&&(Ii(l.history,t),i.push(l.history)),Yr(l,t,null,Dl(l,t))})}}function Wn(e,t,n){var i=e.cm&&e.cm.state.suppressEdits;if(!i||n){for(var a,l=e.history,s=e.sel,u="undo"==t?l.done:l.undone,f="undo"==t?l.undone:l.done,c=0;c<u.length&&(a=u[c],!(n?a.ranges&&!a.equals(e.sel):!a.ranges));c++);if(c!=u.length){for(l.lastOrigin=l.lastSelOrigin=null;;){if(!(a=u.pop()).ranges){if(i)return void u.push(a);break}if(fl(a,f),n&&!a.equals(e.sel))return void Kt(e,a,{clearRedo:!1});s=a}var h=[];fl(s,f),f.push({changes:h,generation:l.generation}),l.generation=a.generation||++l.maxGeneration;for(var d=it(e,"beforeChange")||e.cm&&it(e.cm,"beforeChange"),m=function(k){var M=a.changes[k];if(M.origin=t,d&&!ia(e,M,!1))return u.length=0,{};h.push(Ql(e,M));var D=k?Zl(e,M):Le(u);Yr(e,M,D,cl(e,M)),!k&&e.cm&&e.cm.scrollIntoView({from:M.from,to:Xr(M)});var F=[];an(e,function(W,I){!I&&-1==B(F,W.history)&&(Ii(W.history,M),F.push(W.history)),Yr(W,M,null,cl(W,M))})},y=a.changes.length-1;y>=0;--y){var w=m(y);if(w)return w.v}}}}function ls(e,t){if(0!=t&&(e.first+=t,e.sel=new wt(qt(e.sel.ranges,function(l){return new De(E(l.anchor.line+t,l.anchor.ch),E(l.head.line+t,l.head.ch))}),e.sel.primIndex),e.cm)){kt(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,i=n.viewFrom;i<n.viewTo;i++)Rr(e.cm,i,"gutter")}}function Yr(e,t,n,i){if(e.cm&&!e.cm.curOp)return Oe(e.cm,Yr)(e,t,n,i);if(t.to.line<e.first)ls(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var l=t.text.length-1-(e.first-t.from.line);ls(e,l),t={from:E(e.first,0),to:E(t.to.line+l,t.to.ch),text:[Le(t.text)],origin:t.origin}}var a=e.lastLine();t.to.line>a&&(t={from:t.from,to:E(a,oe(e,a).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Gt(e,t.from,t.to),n||(n=Zl(e,t)),e.cm?function as(e,t,n){var i=e.doc,l=e.display,a=t.from,s=t.to,u=!1,f=a.line;e.options.lineWrapping||(f=p(Kr(oe(i,a.line))),i.iter(f,s.line+1,function(y){if(y==l.maxLine)return u=!0,!0})),i.sel.contains(t.from,t.to)>-1&&Zt(e),sl(i,t,n,Ln(e)),e.options.lineWrapping||(i.iter(f,a.line+t.text.length,function(y){var w=Vr(y);w>l.maxLineLength&&(l.maxLine=y,l.maxLineLength=w,l.maxLineChanged=!0,u=!1)}),u&&(e.curOp.updateMaxLine=!0)),function Jr(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,i=t-1;i>n;i--){var l=oe(e,i).stateAfter;if(l&&(!(l instanceof ji)||i+l.lookAhead<t)){n=i+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}(i,a.line),Fn(e,400);var c=t.text.length-(s.line-a.line)-1;t.full?kt(e):a.line!=s.line||1!=t.text.length||ln(e.doc,t)?kt(e,a.line,s.line+1,c):Rr(e,a.line,"text");var h=it(e,"changes"),d=it(e,"change");if(d||h){var m={from:a,to:s,text:t.text,removed:t.removed,origin:t.origin};d&&Ft(e,"change",e,m),h&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(m)}e.display.selForContextMenu=null}(e.cm,t,i):sl(e,t,i),xo(e,n,ht),e.cantEdit&&wo(e,E(e.firstLine(),0))&&(e.cantEdit=!1)}}function oi(e,t,n,i,l){var a;i||(i=n),Z(i,n)<0&&(n=(a=[i,n])[0],i=a[1]),"string"==typeof t&&(t=e.splitLines(t)),un(e,{from:n,to:i,text:t,origin:l})}function la(e,t,n,i){n<e.line?e.line+=i:t<e.line&&(e.line=t,e.ch=0)}function Wi(e,t,n,i){for(var l=0;l<e.length;++l){var a=e[l],s=!0;if(a.ranges){a.copied||((a=e[l]=a.deepCopy()).copied=!0);for(var u=0;u<a.ranges.length;u++)la(a.ranges[u].anchor,t,n,i),la(a.ranges[u].head,t,n,i)}else{for(var f=0;f<a.changes.length;++f){var c=a.changes[f];if(n<c.from.line)c.from=E(c.from.line+i,c.from.ch),c.to=E(c.to.line+i,c.to.ch);else if(t<=c.to.line){s=!1;break}}s||(e.splice(0,l+1),l=0)}}}function Ii(e,t){var n=t.from.line,i=t.to.line,l=t.text.length-(i-n)-1;Wi(e.done,n,i,l),Wi(e.undone,n,i,l)}function fn(e,t,n,i){var l=t,a=t;return"number"==typeof t?a=oe(e,Ca(e,t)):l=p(t),null==l?null:(i(a,l)&&e.cm&&Rr(e.cm,l,n),a)}function cn(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function Hi(e){this.children=e;for(var t=0,n=0,i=0;i<e.length;++i){var l=e[i];t+=l.chunkSize(),n+=l.height,l.parent=this}this.size=t,this.height=n,this.parent=null}De.prototype.from=function(){return pe(this.anchor,this.head)},De.prototype.to=function(){return tr(this.anchor,this.head)},De.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},cn.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,i=e+t;n<i;++n){var l=this.lines[n];this.height-=l.height,Os(l),Ft(l,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var i=0;i<t.length;++i)t[i].parent=this},iterN:function(e,t,n){for(var i=e+t;e<i;++e)if(n(this.lines[e]))return!0}},Hi.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var i=this.children[n],l=i.chunkSize();if(e<l){var a=Math.min(t,l-e),s=i.height;if(i.removeInner(e,a),this.height-=s-i.height,l==a&&(this.children.splice(n--,1),i.parent=null),0==(t-=a))break;e=0}else e-=l}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof cn))){var u=[];this.collapse(u),this.children=[new cn(u)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var i=0;i<this.children.length;++i){var l=this.children[i],a=l.chunkSize();if(e<=a){if(l.insertInner(e,t,n),l.lines&&l.lines.length>50){for(var s=l.lines.length%25+25,u=s;u<l.lines.length;){var f=new cn(l.lines.slice(u,u+=25));l.height-=f.height,this.children.splice(++i,0,f),f.parent=this}l.lines=l.lines.slice(0,s),this.maybeSpill()}break}e-=a}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var n=new Hi(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=n.size,e.height-=n.height;var l=B(e.parent.children,e);e.parent.children.splice(l+1,0,n)}else{var i=new Hi(e.children);i.parent=e,e.children=[i,n],e=i}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var i=0;i<this.children.length;++i){var l=this.children[i],a=l.chunkSize();if(e<a){var s=Math.min(t,a-e);if(l.iterN(e,s,n))return!0;if(0==(t-=s))break;e=0}else e-=a}}};var Co=function(e,t,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.doc=e,this.node=t};function aa(e,t,n){Hr(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Zn(e,n)}Co.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,i=p(n);if(null!=i&&t){for(var l=0;l<t.length;++l)t[l]==this&&t.splice(l--,1);t.length||(n.widgets=null);var a=wn(this);Ht(n,Math.max(0,n.height-a)),e&&(et(e,function(){aa(e,n,-a),Rr(e,i,"widget")}),Ft(e,"lineWidgetCleared",e,this,i))}},Co.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,i=this.line;this.height=null;var l=wn(this)-t;l&&(rr(this.doc,i)||Ht(i,i.height+l),n&&et(n,function(){n.curOp.forceUpdate=!0,aa(n,i,l),Ft(n,"lineWidgetChanged",n,e,p(i))}))},yr(Co);var li=0,Tr=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++li};function Pi(e,t,n,i,l){if(i&&i.shared)return function Js(e,t,n,i,l){(i=N(i)).shared=!1;var a=[Pi(e,t,n,i,l)],s=a[0],u=i.widgetNode;return an(e,function(f){u&&(i.widgetNode=u.cloneNode(!0)),a.push(Pi(f,me(f,t),me(f,n),i,l));for(var c=0;c<f.linked.length;++c)if(f.linked[c].isParent)return;s=Le(a)}),new Bi(a,s)}(e,t,n,i,l);if(e.cm&&!e.cm.curOp)return Oe(e.cm,Pi)(e,t,n,i,l);var a=new Tr(e,l),s=Z(t,n);if(i&&N(i,a,!1),s>0||0==s&&!1!==a.clearWhenEmpty)return a;if(a.replacedWith&&(a.collapsed=!0,a.widgetNode=nt("span",[a.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||a.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(a.widgetNode.insertLeft=!0)),a.collapsed){if(Na(e,t.line,t,n,a)||t.line!=n.line&&Na(e,n.line,t,n,a))throw new Error("Inserting collapsed marker partially overlapping an existing one");!function Yi(){Qr=!0}()}a.addToHistory&&rs(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var c,u=t.line,f=e.cm;if(e.iter(u,n.line+1,function(d){f&&a.collapsed&&!f.options.lineWrapping&&Kr(d)==f.display.maxLine&&(c=!0),a.collapsed&&u!=t.line&&Ht(d,0),function Es(e,t,n){var i=n&&window.WeakSet&&(n.markedSpans||(n.markedSpans=new WeakSet));i&&i.has(e.markedSpans)?e.markedSpans.push(t):(e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],i&&i.add(e.markedSpans)),t.marker.attachLine(e)}(d,new _o(a,u==t.line?t.ch:null,u==n.line?n.ch:null),e.cm&&e.cm.curOp),++u}),a.collapsed&&e.iter(t.line,n.line+1,function(d){rr(e,d)&&Ht(d,0)}),a.clearOnEnter&&ne(a,"beforeCursorEnter",function(){return a.clear()}),a.readOnly&&(function Ro(){Ta=!0}(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),a.collapsed&&(a.id=++li,a.atomic=!0),f){if(c&&(f.curOp.updateMaxLine=!0),a.collapsed)kt(f,t.line,n.line+1);else if(a.className||a.startStyle||a.endStyle||a.css||a.attributes||a.title)for(var h=t.line;h<=n.line;h++)Rr(f,h,"text");a.atomic&&ri(f.doc),Ft(f,"markerAdded",f,a)}return a}Tr.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Vn(e),it(this,"clear")){var n=this.find();n&&Ft(this,"clear",n.from,n.to)}for(var i=null,l=null,a=0;a<this.lines.length;++a){var s=this.lines[a],u=qi(s.markedSpans,this);e&&!this.collapsed?Rr(e,p(s),"text"):e&&(null!=u.to&&(l=p(s)),null!=u.from&&(i=p(s))),s.markedSpans=Ns(s.markedSpans,u),null==u.from&&this.collapsed&&!rr(this.doc,s)&&e&&Ht(s,Sn(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var f=0;f<this.lines.length;++f){var c=Kr(this.lines[f]),h=Vr(c);h>e.display.maxLineLength&&(e.display.maxLine=c,e.display.maxLineLength=h,e.display.maxLineChanged=!0)}null!=i&&e&&this.collapsed&&kt(e,i,l+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&ri(e.doc)),e&&Ft(e,"markerCleared",e,this,i,l),t&&$n(e),this.parent&&this.parent.clear()}},Tr.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var n,i,l=0;l<this.lines.length;++l){var a=this.lines[l],s=qi(a.markedSpans,this);if(null!=s.from&&(n=E(t?a:p(a),s.from),-1==e))return n;if(null!=s.to&&(i=E(t?a:p(a),s.to),1==e))return i}return n&&{from:n,to:i}},Tr.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,i=this.doc.cm;!t||!i||et(i,function(){var l=t.line,a=p(t.line),s=Cr(i,a);if(s&&(ki(s),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!rr(n.doc,l)&&null!=n.height){var u=n.height;n.height=null;var f=wn(n)-u;f&&Ht(l,l.height+f)}Ft(i,"markerChanged",i,e)})},Tr.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(!t.maybeHiddenMarkers||-1==B(t.maybeHiddenMarkers,this))&&(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},Tr.prototype.detachLine=function(e){if(this.lines.splice(B(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},yr(Tr);var Bi=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function ss(e){return e.findMarks(E(e.first,0),e.clipPos(E(e.lastLine())),function(t){return t.parent})}function ir(e){for(var t=function(i){var l=e[i],a=[l.primary.doc];an(l.primary.doc,function(f){return a.push(f)});for(var s=0;s<l.markers.length;s++){var u=l.markers[s];-1==B(a,u.doc)&&(u.parent=null,l.markers.splice(s--,1))}},n=0;n<e.length;n++)t(n)}Bi.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Ft(this,"clear")}},Bi.prototype.find=function(e,t){return this.primary.find(e,t)},yr(Bi);var us=0,or=function(e,t,n,i,l){if(!(this instanceof or))return new or(e,t,n,i,l);null==n&&(n=0),Hi.call(this,[new cn([new bi("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var a=E(n,0);this.sel=on(a),this.history=new mo(null),this.id=++us,this.modeOption=t,this.lineSep=i,this.direction="rtl"==l?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),sl(this,{from:a,to:a,text:e}),Kt(this,on(a),ht)};or.prototype=L(Hi.prototype,{constructor:or,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,i=0;i<t.length;++i)n+=t[i].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Re(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Rt(function(e){var t=E(this.first,0),n=this.first+this.size-1;un(this,{from:t,to:E(n,oe(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&An(this.cm,0,0),Kt(this,on(t),ht)}),replaceRange:function(e,t,n,i){oi(this,e,t=me(this,t),n=n?me(this,n):t,i)},getRange:function(e,t,n){var i=Gt(this,me(this,e),me(this,t));return!1===n?i:i.join(""===n?"":n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(C(this,e))return oe(this,e)},getLineNumber:function(e){return p(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=oe(this,e)),Kr(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return me(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Rt(function(e,t,n){ta(this,me(this,"number"==typeof e?E(e,t||0):e),null,n)}),setSelection:Rt(function(e,t,n){ta(this,me(this,e),me(this,t||e),n)}),extendSelection:Rt(function(e,t,n){Oi(this,me(this,e),t&&me(this,t),n)}),extendSelections:Rt(function(e,t){$l(this,Or(this,e),t)}),extendSelectionsBy:Rt(function(e,t){$l(this,Or(this,qt(this.sel.ranges,e)),t)}),setSelections:Rt(function(e,t,n){if(e.length){for(var i=[],l=0;l<e.length;l++)i[l]=new De(me(this,e[l].anchor),me(this,e[l].head||e[l].anchor));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Kt(this,Ut(this.cm,i,t),n)}}),addSelection:Rt(function(e,t,n){var i=this.sel.ranges.slice(0);i.push(new De(me(this,e),me(this,t||e))),Kt(this,Ut(this.cm,i,i.length-1),n)}),getSelection:function(e){for(var n,t=this.sel.ranges,i=0;i<t.length;i++){var l=Gt(this,t[i].from(),t[i].to());n=n?n.concat(l):l}return!1===e?n:n.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,i=0;i<n.length;i++){var l=Gt(this,n[i].from(),n[i].to());!1!==e&&(l=l.join(e||this.lineSeparator())),t[i]=l}return t},replaceSelection:function(e,t,n){for(var i=[],l=0;l<this.sel.ranges.length;l++)i[l]=e;this.replaceSelections(i,t,n||"+input")},replaceSelections:Rt(function(e,t,n){for(var i=[],l=this.sel,a=0;a<l.ranges.length;a++){var s=l.ranges[a];i[a]={from:s.from(),to:s.to(),text:this.splitLines(e[a]),origin:n}}for(var u=t&&"end"!=t&&function vo(e,t,n){for(var i=[],l=E(e.first,0),a=l,s=0;s<t.length;s++){var u=t[s],f=ll(u.from,l,a),c=ll(Xr(u),l,a);if(l=u.to,a=c,"around"==n){var h=e.sel.ranges[s],d=Z(h.head,h.anchor)<0;i[s]=new De(d?c:f,d?f:c)}else i[s]=new De(f,f)}return new wt(i,e.sel.primIndex)}(this,i,t),f=i.length-1;f>=0;f--)un(this,i[f]);u?yo(this,u):this.cm&&Ai(this.cm)}),undo:Rt(function(){Wn(this,"undo")}),redo:Rt(function(){Wn(this,"redo")}),undoSelection:Rt(function(){Wn(this,"undo",!0)}),redoSelection:Rt(function(){Wn(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,i=0;i<e.done.length;i++)e.done[i].ranges||++t;for(var l=0;l<e.undone.length;l++)e.undone[l].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){var e=this;this.history=new mo(this.history),an(this,function(t){return t.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:sn(this.history.done),undone:sn(this.history.undone)}},setHistory:function(e){var t=this.history=new mo(this.history);t.done=sn(e.done.slice(0),null,!0),t.undone=sn(e.undone.slice(0),null,!0)},setGutterMarker:Rt(function(e,t,n){return fn(this,e,"gutter",function(i){var l=i.gutterMarkers||(i.gutterMarkers={});return l[t]=n,!n&&Te(l)&&(i.gutterMarkers=null),!0})}),clearGutter:Rt(function(e){var t=this;this.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&fn(t,n,"gutter",function(){return n.gutterMarkers[e]=null,Te(n.gutterMarkers)&&(n.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if("number"==typeof e){if(!(C(this,e)&&(t=e,e=oe(this,e))))return null}else if(null==(t=p(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Rt(function(e,t,n){return fn(this,e,"gutter"==t?"gutter":"class",function(i){var l="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(i[l]){if(x(n).test(i[l]))return!1;i[l]+=" "+n}else i[l]=n;return!0})}),removeLineClass:Rt(function(e,t,n){return fn(this,e,"gutter"==t?"gutter":"class",function(i){var l="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",a=i[l];if(!a)return!1;if(null==n)i[l]=null;else{var s=a.match(x(n));if(!s)return!1;var u=s.index+s[0].length;i[l]=a.slice(0,s.index)+(s.index&&u!=a.length?" ":"")+a.slice(u)||null}return!0})}),addLineWidget:Rt(function(e,t,n){return function In(e,t,n,i){var l=new Co(e,n,i),a=e.cm;return a&&l.noHScroll&&(a.display.alignWidgets=!0),fn(e,t,"widget",function(s){var u=s.widgets||(s.widgets=[]);if(null==l.insertAt?u.push(l):u.splice(Math.min(u.length,Math.max(0,l.insertAt)),0,l),l.line=s,a&&!rr(e,s)){var f=Hr(s)<e.scrollTop;Ht(s,s.height+wn(l)),f&&Zn(a,l.height),a.curOp.forceUpdate=!0}return!0}),a&&Ft(a,"lineWidgetAdded",a,l,"number"==typeof t?t:p(t)),l}(this,e,t,n)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return Pi(this,me(this,e),me(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return Pi(this,e=me(this,e),e,n,"bookmark")},findMarksAt:function(e){var t=[],n=oe(this,(e=me(this,e)).line).markedSpans;if(n)for(var i=0;i<n.length;++i){var l=n[i];(null==l.from||l.from<=e.ch)&&(null==l.to||l.to>=e.ch)&&t.push(l.marker.parent||l.marker)}return t},findMarks:function(e,t,n){e=me(this,e),t=me(this,t);var i=[],l=e.line;return this.iter(e.line,t.line+1,function(a){var s=a.markedSpans;if(s)for(var u=0;u<s.length;u++){var f=s[u];!(null!=f.to&&l==e.line&&e.ch>=f.to||null==f.from&&l!=e.line||null!=f.from&&l==t.line&&f.from>=t.ch)&&(!n||n(f.marker))&&i.push(f.marker.parent||f.marker)}++l}),i},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var i=0;i<n.length;++i)null!=n[i].from&&e.push(n[i].marker)}),e},posFromIndex:function(e){var t,n=this.first,i=this.lineSeparator().length;return this.iter(function(l){var a=l.text.length+i;if(a>e)return t=e,!0;e-=a,++n}),me(this,E(n,t))},indexFromPos:function(e){var t=(e=me(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,function(i){t+=i.text.length+n}),t},copy:function(e){var t=new or(Re(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var i=new or(Re(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:e.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function Qs(e,t){for(var n=0;n<t.length;n++){var i=t[n],l=i.find(),a=e.clipPos(l.from),s=e.clipPos(l.to);if(Z(a,s)){var u=Pi(e,a,s,i.primary,i.primary.type);i.markers.push(u),u.parent=i}}}(i,ss(this)),i},unlinkDoc:function(e){if(e instanceof st&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),ir(ss(this));break}if(e.history==this.history){var i=[e.id];an(e,function(l){return i.push(l.id)},!0),e.history=new mo(null),e.history.done=sn(this.history.done,i),e.history.undone=sn(this.history.undone,i)}},iterLinkedDocs:function(e){an(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):xr(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Rt(function(e){"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(t){return t.order=null}),this.cm&&function Jl(e){et(e,function(){go(e),kt(e)})}(this.cm))})}),or.prototype.eachLine=or.prototype.iter;var fs=0;function Vs(e){var t=this;if(sa(t),!Be(t,e)&&!Pr(t.display,e)){It(e),de&&(fs=+new Date);var n=Nt(t,e,!0),i=e.dataTransfer.files;if(n&&!t.isReadOnly())if(i&&i.length&&window.FileReader&&window.File)for(var l=i.length,a=Array(l),s=0,u=function(){++s==l&&Oe(t,function(){var y={from:n=me(t.doc,n),to:n,text:t.doc.splitLines(a.filter(function(w){return null!=w}).join(t.doc.lineSeparator())),origin:"paste"};un(t.doc,y),yo(t.doc,on(me(t.doc,n),me(t.doc,Xr(y))))})()},f=function(y,w){if(t.options.allowDropFileTypes&&-1==B(t.options.allowDropFileTypes,y.type))u();else{var k=new FileReader;k.onerror=function(){return u()},k.onload=function(){var M=k.result;/[\x00-\x08\x0e-\x1f]{2}/.test(M)||(a[w]=M),u()},k.readAsText(y)}},c=0;c<i.length;c++)f(i[c],c);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout(function(){return t.display.input.focus()},20);try{var h=e.dataTransfer.getData("Text");if(h){var d;if(t.state.draggingText&&!t.state.draggingText.copy&&(d=t.listSelections()),xo(t.doc,on(n,n)),d)for(var m=0;m<d.length;++m)oi(t.doc,"",d[m].anchor,d[m].head,"drag");t.replaceSelection(h,"around","paste"),t.display.input.focus()}}catch{}}}}function sa(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function ds(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),n=[],i=0;i<t.length;i++){var l=t[i].CodeMirror;l&&n.push(l)}n.length&&n[0].operation(function(){for(var a=0;a<n.length;a++)e(n[a])})}}var ps=!1;function So(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var zr={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},hn=0;hn<10;hn++)zr[hn+48]=zr[hn+96]=String(hn);for(var Mr=65;Mr<=90;Mr++)zr[Mr]=String.fromCharCode(Mr);for(var ko=1;ko<=12;ko++)zr[ko+111]=zr[ko+63235]="F"+ko;var dn={};function Ri(e){var t=e.split(/-(?!$)/);e=t[t.length-1];for(var n,i,l,a,s=0;s<t.length-1;s++){var u=t[s];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))n=!0;else if(/^(c|ctrl|control)$/i.test(u))i=!0;else{if(!/^s(hift)?$/i.test(u))throw new Error("Unrecognized modifier name: "+u);l=!0}}return n&&(e="Alt-"+e),i&&(e="Ctrl-"+e),a&&(e="Cmd-"+e),l&&(e="Shift-"+e),e}function vs(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==i){delete e[n];continue}for(var l=qt(n.split(" "),Ri),a=0;a<l.length;a++){var s=void 0,u=void 0;a==l.length-1?(u=l.join(" "),s=i):(u=l.slice(0,a+1).join(" "),s="...");var f=t[u];if(f){if(f!=s)throw new Error("Inconsistent bindings for "+u)}else t[u]=s}delete e[n]}for(var c in t)e[c]=t[c];return e}function ai(e,t,n,i){var l=(t=_i(t)).call?t.call(e,i):t[e];if(!1===l)return"nothing";if("..."===l)return"multi";if(null!=l&&n(l))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return ai(e,t.fallthrough,n,i);for(var a=0;a<t.fallthrough.length;a++){var s=ai(e,t.fallthrough[a],n,i);if(s)return s}}}function ua(e){var t="string"==typeof e?e:zr[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function Lo(e,t,n){var i=e;return t.altKey&&"Alt"!=i&&(e="Alt-"+e),(T?t.metaKey:t.ctrlKey)&&"Ctrl"!=i&&(e="Ctrl-"+e),(T?t.ctrlKey:t.metaKey)&&"Mod"!=i&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=i&&(e="Shift-"+e),e}function si(e,t){if(he&&34==e.keyCode&&e.char)return!1;var n=zr[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),Lo(n,e,t))}function _i(e){return"string"==typeof e?dn[e]:e}function Pn(e,t){for(var n=e.doc.sel.ranges,i=[],l=0;l<n.length;l++){for(var a=t(n[l]);i.length&&Z(a.from,Le(i).to)<=0;){var s=i.pop();if(Z(s.from,a.from)<0){a.from=s.from;break}}i.push(a)}et(e,function(){for(var u=i.length-1;u>=0;u--)oi(e.doc,"",i[u].from,i[u].to,"+delete");Ai(e)})}function To(e,t,n){var i=zt(e.text,t+n,n);return i<0||i>e.text.length?null:i}function fa(e,t,n){var i=To(e,t.ch,n);return null==i?null:new E(t.line,i,n<0?"after":"before")}function ui(e,t,n,i,l){if(e){"rtl"==t.doc.direction&&(l=-l);var a=K(n,t.doc.direction);if(a){var c,s=l<0?Le(a):a[0],f=l<0==(1==s.level)?"after":"before";if(s.level>0||"rtl"==t.doc.direction){var h=Un(t,n),d=Br(t,h,c=l<0?n.text.length-1:0).top;c=dt(function(m){return Br(t,h,m).top==d},l<0==(1==s.level)?s.from:s.to-1,c),"before"==f&&(c=To(n,c,1))}else c=l<0?s.to:s.from;return new E(i,c,f)}}return new E(i,l<0?n.text.length:0,l<0?"before":"after")}dn.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},dn.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},dn.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},dn.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},dn.default=g?dn.macDefault:dn.pcDefault;var Mo={selectAll:ii,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),ht)},killLine:function(e){return Pn(e,function(t){if(t.empty()){var n=oe(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:E(t.head.line+1,0)}:{from:t.head,to:E(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){return Pn(e,function(t){return{from:E(t.from().line,0),to:me(e.doc,E(t.to().line+1,0))}})},delLineLeft:function(e){return Pn(e,function(t){return{from:E(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(e){return Pn(e,function(t){var n=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:n},"div"),to:t.from()}})},delWrappedLineRight:function(e){return Pn(e,function(t){var n=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:i}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(E(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(E(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return ca(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return ms(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return function dl(e,t){var n=oe(e.doc,t),i=function Nl(e){for(var t;t=$i(e);)e=t.find(1,!0).line;return e}(n);return i!=n&&(t=p(i)),ui(!0,e,n,t,-1)}(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},Ct)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},Ct)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5,i=e.coordsChar({left:0,top:n},"div");return i.ch<e.getLine(i.line).search(/\S/)?ms(e,t.head):i},Ct)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),i=e.options.tabSize,l=0;l<n.length;l++){var a=n[l].from(),s=A(e.getLine(a.line),a.ch,i);t.push(nr(i-s%i))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return et(e,function(){for(var t=e.listSelections(),n=[],i=0;i<t.length;i++)if(t[i].empty()){var l=t[i].head,a=oe(e.doc,l.line).text;if(a)if(l.ch==a.length&&(l=new E(l.line,l.ch-1)),l.ch>0)l=new E(l.line,l.ch+1),e.replaceRange(a.charAt(l.ch-1)+a.charAt(l.ch-2),E(l.line,l.ch-2),l,"+transpose");else if(l.line>e.doc.first){var s=oe(e.doc,l.line-1).text;s&&(l=new E(l.line,1),e.replaceRange(a.charAt(0)+e.doc.lineSeparator()+s.charAt(s.length-1),E(l.line-1,s.length-1),l,"+transpose"))}n.push(new De(l,l))}e.setSelections(n)})},newlineAndIndent:function(e){return et(e,function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var i=0;i<t.length;i++)e.indentLine(t[i].from().line,null,!0);Ai(e)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function ca(e,t){var n=oe(e.doc,t),i=Kr(n);return i!=n&&(t=p(i)),ui(!0,e,i,t,1)}function ms(e,t){var n=ca(e,t.line),i=oe(e.doc,n.line),l=K(i,e.doc.direction);if(!l||0==l[0].level){var a=Math.max(n.ch,i.text.search(/\S/));return E(n.line,t.line==n.line&&t.ch<=a&&t.ch?0:a,n.sticky)}return n}function pl(e,t,n){if("string"==typeof t&&!(t=Mo[t]))return!1;e.display.input.ensurePolled();var i=e.display.shift,l=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),l=t(e)!=Ce}finally{e.display.shift=i,e.state.suppressEdits=!1}return l}var ys=new le;function zi(e,t,n,i){var l=e.state.keySeq;if(l){if(ua(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:ys.set(50,function(){e.state.keySeq==l&&(e.state.keySeq=null,e.display.input.reset())}),xs(e,l+" "+t,n,i))return!0}return xs(e,t,n,i)}function xs(e,t,n,i){var l=function Do(e,t,n){for(var i=0;i<e.state.keyMaps.length;i++){var l=ai(t,e.state.keyMaps[i],n,e);if(l)return l}return e.options.extraKeys&&ai(t,e.options.extraKeys,n,e)||ai(t,e.options.keyMap,n,e)}(e,t,i);return"multi"==l&&(e.state.keySeq=t),"handled"==l&&Ft(e,"keyHandled",e,t,n),("handled"==l||"multi"==l)&&(It(n),fo(e)),!!l}function vl(e,t){var n=si(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?zi(e,"Shift-"+n,t,function(i){return pl(e,i,!0)})||zi(e,n,t,function(i){if("string"==typeof i?/^go[A-Z]/.test(i):i.motion)return pl(e,i)}):zi(e,n,t,function(i){return pl(e,i)}))}var ha=null;function da(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||(t.curOp.focus=v(),Be(t,e)))){de&&Se<11&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var i=vl(t,e);he&&(ha=i?n:null,!i&&88==n&&!Io&&(g?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),Me&&!g&&!i&&46==n&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),18==n&&!/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)&&function ws(e){var t=e.display.lineDiv;function n(i){(18==i.keyCode||!i.altKey)&&(U(t,"CodeMirror-crosshair"),We(document,"keyup",n),We(document,"mouseover",n))}$(t,"CodeMirror-crosshair"),ne(document,"keyup",n),ne(document,"mouseover",n)}(t)}}function Cs(e){16==e.keyCode&&(this.doc.sel.shift=!1),Be(this,e)}function gl(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||Pr(t.display,e)||Be(t,e)||e.ctrlKey&&!e.altKey||g&&e.metaKey)){var n=e.keyCode,i=e.charCode;if(he&&n==ha)return ha=null,void It(e);if(!he||e.which&&!(e.which<10)||!vl(t,e)){var l=String.fromCharCode(i??n);"\b"!=l&&(function bs(e,t,n){return zi(e,"'"+n+"'",t,function(i){return pl(e,i,!0)})}(t,e,l)||t.display.input.onKeyPress(e))}}}var No,Gi,fi=function(e,t,n){this.time=e,this.pos=t,this.button=n};function Ss(e){var t=this,n=t.display;if(!(Be(t,e)||n.activeTouch&&n.input.supportsTouch())){if(n.input.ensurePolled(),n.shift=e.shiftKey,Pr(n,e))return void(qe||(n.scroller.draggable=!1,setTimeout(function(){return n.scroller.draggable=!0},100)));if(!ga(t,e)){var i=Nt(t,e),l=cr(e),a=i?function eu(e,t){var n=+new Date;return Gi&&Gi.compare(n,e,t)?(No=Gi=null,"triple"):No&&No.compare(n,e,t)?(Gi=new fi(n,e,t),No=null,"double"):(No=new fi(n,e,t),Gi=null,"single")}(i,l):"single";window.focus(),1==l&&t.state.selectingText&&t.state.selectingText(e),(!i||!function tu(e,t,n,i,l){var a="Click";return"double"==i?a="Double"+a:"triple"==i&&(a="Triple"+a),zi(e,Lo(a=(1==t?"Left":2==t?"Middle":"Right")+a,l),l,function(s){if("string"==typeof s&&(s=Mo[s]),!s)return!1;var u=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),u=s(e,n)!=Ce}finally{e.state.suppressEdits=!1}return u})}(t,l,i,a,e))&&(1==l?i?function ks(e,t,n,i){de?setTimeout(V(el,e),0):e.curOp.focus=v();var s,l=function ru(e,t,n){var i=e.getOption("configureMouse"),l=i?i(e,t,n):{};return null==l.unit&&(l.unit=(Wt?n.shiftKey&&n.metaKey:n.altKey)?"rectangle":"single"==t?"char":"double"==t?"word":"line"),(null==l.extend||e.doc.extend)&&(l.extend=e.doc.extend||n.shiftKey),null==l.addNew&&(l.addNew=g?n.metaKey:n.ctrlKey),null==l.moveOnDrag&&(l.moveOnDrag=!(g?n.altKey:n.ctrlKey)),l}(e,n,i),a=e.doc.sel;e.options.dragDrop&&Sl&&!e.isReadOnly()&&"single"==n&&(s=a.contains(t))>-1&&(Z((s=a.ranges[s]).from(),t)<0||t.xRel>0)&&(Z(s.to(),t)>0||t.xRel<0)?function nu(e,t,n,i){var l=e.display,a=!1,s=Oe(e,function(c){qe&&(l.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:Mn(e)),We(l.wrapper.ownerDocument,"mouseup",s),We(l.wrapper.ownerDocument,"mousemove",u),We(l.scroller,"dragstart",f),We(l.scroller,"drop",s),a||(It(c),i.addNew||Oi(e.doc,n,null,null,i.extend),qe&&!Ze||de&&9==Se?setTimeout(function(){l.wrapper.ownerDocument.body.focus({preventScroll:!0}),l.input.focus()},20):l.input.focus())}),u=function(c){a=a||Math.abs(t.clientX-c.clientX)+Math.abs(t.clientY-c.clientY)>=10},f=function(){return a=!0};qe&&(l.scroller.draggable=!0),e.state.draggingText=s,s.copy=!i.moveOnDrag,ne(l.wrapper.ownerDocument,"mouseup",s),ne(l.wrapper.ownerDocument,"mousemove",u),ne(l.scroller,"dragstart",f),ne(l.scroller,"drop",s),e.state.delayingBlurEvent=!0,setTimeout(function(){return l.input.focus()},20),l.scroller.dragDrop&&l.scroller.dragDrop()}(e,i,t,l):function Ts(e,t,n,i){de&&Mn(e);var l=e.display,a=e.doc;It(t);var s,u,f=a.sel,c=f.ranges;if(i.addNew&&!i.extend?(u=a.sel.contains(n),s=u>-1?c[u]:new De(n,n)):(s=a.sel.primary(),u=a.sel.primIndex),"rectangle"==i.unit)i.addNew||(s=new De(n,n)),n=Nt(e,t,!0,!0),u=-1;else{var h=Ls(e,n,i.unit);s=i.extend?hl(s,h.anchor,h.head,i.extend):h}i.addNew?-1==u?(u=c.length,Kt(a,Ut(e,c.concat([s]),u),{scroll:!1,origin:"*mouse"})):c.length>1&&c[u].empty()&&"char"==i.unit&&!i.extend?(Kt(a,Ut(e,c.slice(0,u).concat(c.slice(u+1)),0),{scroll:!1,origin:"*mouse"}),f=a.sel):ea(a,u,s,Yt):(u=0,Kt(a,new wt([s],0),Yt),f=a.sel);var d=n;var y=l.wrapper.getBoundingClientRect(),w=0;function k(W){var I=++w,_=Nt(e,W,!0,"rectangle"==i.unit);if(_)if(0!=Z(_,d)){e.curOp.focus=v(),function m(W){if(0!=Z(d,W))if(d=W,"rectangle"==i.unit){for(var I=[],_=e.options.tabSize,q=A(oe(a,n.line).text,n.ch,_),fe=A(oe(a,W.line).text,W.ch,_),ve=Math.min(q,fe),Ye=Math.max(q,fe),Ne=Math.min(n.line,W.line),_e=Math.min(e.lastLine(),Math.max(n.line,W.line));Ne<=_e;Ne++){var tt=oe(a,Ne).text,Ee=Et(tt,ve,_);ve==Ye?I.push(new De(E(Ne,Ee),E(Ne,Ee))):tt.length>Ee&&I.push(new De(E(Ne,Ee),E(Ne,Et(tt,Ye,_))))}I.length||I.push(new De(n,n)),Kt(a,Ut(e,f.ranges.slice(0,u).concat(I),u),{origin:"*mouse",scroll:!1}),e.scrollIntoView(W)}else{var He,ze=s,Fe=Ls(e,W,i.unit),ke=ze.anchor;Z(Fe.anchor,ke)>0?(He=Fe.head,ke=pe(ze.from(),Fe.anchor)):(He=Fe.anchor,ke=tr(ze.to(),Fe.head));var ot=f.ranges.slice(0);ot[u]=function pa(e,t){var n=t.anchor,i=t.head,l=oe(e.doc,n.line);if(0==Z(n,i)&&n.sticky==i.sticky)return t;var a=K(l);if(!a)return t;var s=at(a,n.ch,n.sticky),u=a[s];if(u.from!=n.ch&&u.to!=n.ch)return t;var c,f=s+(u.from==n.ch==(1!=u.level)?0:1);if(0==f||f==a.length)return t;if(i.line!=n.line)c=(i.line-n.line)*("ltr"==e.doc.direction?1:-1)>0;else{var h=at(a,i.ch,i.sticky),d=h-s||(i.ch-n.ch)*(1==u.level?-1:1);c=h==f-1||h==f?d<0:d>0}var m=a[f+(c?-1:0)],y=c==(1==m.level),w=y?m.from:m.to,k=y?"after":"before";return n.ch==w&&n.sticky==k?t:new De(new E(n.line,w,k),i)}(e,new De(me(a,ke),He)),Kt(a,Ut(e,ot,u),Yt)}}(_);var q=tl(l,a);(_.line>=q.to||_.line<q.from)&&setTimeout(Oe(e,function(){w==I&&k(W)}),150)}else{var fe=W.clientY<y.top?-20:W.clientY>y.bottom?20:0;fe&&setTimeout(Oe(e,function(){w==I&&(l.scroller.scrollTop+=fe,k(W))}),50)}}function M(W){e.state.selectingText=!1,w=1/0,W&&(It(W),l.input.focus()),We(l.wrapper.ownerDocument,"mousemove",D),We(l.wrapper.ownerDocument,"mouseup",F),a.history.lastSelOrigin=null}var D=Oe(e,function(W){0!==W.buttons&&cr(W)?k(W):M(W)}),F=Oe(e,M);e.state.selectingText=F,ne(l.wrapper.ownerDocument,"mousemove",D),ne(l.wrapper.ownerDocument,"mouseup",F)}(e,i,t,l)}(t,i,a,e):Ki(e)==n.scroller&&It(e):2==l?(i&&Oi(t.doc,i),setTimeout(function(){return n.input.focus()},20)):3==l&&(te?t.display.input.onContextMenu(e):Mn(t)))}}}function Ls(e,t,n){if("char"==n)return new De(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new De(E(t.line,0),me(e.doc,E(t.line+1,0)));var i=n(e,t);return new De(i.from,i.to)}function va(e,t,n,i){var l,a;if(t.touches)l=t.touches[0].clientX,a=t.touches[0].clientY;else try{l=t.clientX,a=t.clientY}catch{return!1}if(l>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;i&&It(t);var s=e.display,u=s.lineDiv.getBoundingClientRect();if(a>u.bottom||!it(e,n))return Jt(t);a-=u.top-s.viewOffset;for(var f=0;f<e.display.gutterSpecs.length;++f){var c=s.gutters.childNodes[f];if(c&&c.getBoundingClientRect().right>=l)return xt(e,n,e,b(e.doc,a),e.display.gutterSpecs[f].className,t),Jt(t)}}function ga(e,t){return va(e,t,"gutterClick",!0)}function ma(e,t){Pr(e.display,t)||function Ui(e,t){return!!it(e,"gutterContextMenu")&&va(e,t,"gutterContextMenu",!1)}(e,t)||Be(e,t,"contextmenu")||te||e.display.input.onContextMenu(t)}function ya(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Li(e)}fi.prototype.compare=function(e,t,n){return this.time+400>e&&0==Z(t,this.pos)&&n==this.button};var pn={toString:function(){return"CodeMirror.Init"}},Ms={},ml={};function vt(e,t,n){if(!t!=!(n&&n!=pn)){var l=e.display.dragFunctions,a=t?ne:We;a(e.display.scroller,"dragstart",l.start),a(e.display.scroller,"dragenter",l.enter),a(e.display.scroller,"dragover",l.over),a(e.display.scroller,"dragleave",l.leave),a(e.display.scroller,"drop",l.drop)}}function ou(e){e.options.lineWrapping?($(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(U(e.display.wrapper,"CodeMirror-wrap"),El(e)),en(e),kt(e),Li(e),setTimeout(function(){return Jn(e)},100)}function st(e,t){var n=this;if(!(this instanceof st))return new st(e,t);this.options=t=t?N(t):{},N(Ms,t,!1);var i=t.value;"string"==typeof i?i=new or(i,t.mode,null,t.lineSeparator,t.direction):t.mode&&(i.modeOption=t.mode),this.doc=i;var l=new st.inputStyles[t.inputStyle](this),a=this.display=new rn(e,i,l,t);for(var s in a.wrapper.CodeMirror=this,ya(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),En(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new le,keySeq:null,specialChars:null},t.autofocus&&!lt&&a.input.focus(),de&&Se<11&&setTimeout(function(){return n.display.input.reset(!0)},20),function Eo(e){var t=e.display;ne(t.scroller,"mousedown",Oe(e,Ss)),ne(t.scroller,"dblclick",de&&Se<11?Oe(e,function(f){if(!Be(e,f)){var c=Nt(e,f);if(c&&!ga(e,f)&&!Pr(e.display,f)){It(f);var h=e.findWordAt(c);Oi(e.doc,h.anchor,h.head)}}}):function(f){return Be(e,f)||It(f)}),ne(t.scroller,"contextmenu",function(f){return ma(e,f)}),ne(t.input.getField(),"contextmenu",function(f){t.scroller.contains(f.target)||ma(e,f)});var n,i={end:0};function l(){t.activeTouch&&(n=setTimeout(function(){return t.activeTouch=null},1e3),(i=t.activeTouch).end=+new Date)}function s(f,c){if(null==c.left)return!0;var h=c.left-f.left,d=c.top-f.top;return h*h+d*d>400}ne(t.scroller,"touchstart",function(f){if(!Be(e,f)&&!function a(f){if(1!=f.touches.length)return!1;var c=f.touches[0];return c.radiusX<=1&&c.radiusY<=1}(f)&&!ga(e,f)){t.input.ensurePolled(),clearTimeout(n);var c=+new Date;t.activeTouch={start:c,moved:!1,prev:c-i.end<=300?i:null},1==f.touches.length&&(t.activeTouch.left=f.touches[0].pageX,t.activeTouch.top=f.touches[0].pageY)}}),ne(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),ne(t.scroller,"touchend",function(f){var c=t.activeTouch;if(c&&!Pr(t,f)&&null!=c.left&&!c.moved&&new Date-c.start<300){var d,h=e.coordsChar(t.activeTouch,"page");d=!c.prev||s(c,c.prev)?new De(h,h):!c.prev.prev||s(c,c.prev.prev)?e.findWordAt(h):new De(E(h.line,0),me(e.doc,E(h.line+1,0))),e.setSelection(d.anchor,d.head),e.focus(),It(f)}l()}),ne(t.scroller,"touchcancel",l),ne(t.scroller,"scroll",function(){t.scroller.clientHeight&&(_r(e,t.scroller.scrollTop),pr(e,t.scroller.scrollLeft,!0),xt(e,"scroll",e))}),ne(t.scroller,"mousewheel",function(f){return Ke(e,f)}),ne(t.scroller,"DOMMouseScroll",function(f){return Ke(e,f)}),ne(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(f){Be(e,f)||qr(f)},over:function(f){Be(e,f)||(function hs(e,t){var n=Nt(e,t);if(n){var i=document.createDocumentFragment();Rl(e,n,i),e.display.dragCursor||(e.display.dragCursor=Q("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),re(e.display.dragCursor,i)}}(e,f),qr(f))},start:function(f){return function cs(e,t){if(de&&(!e.state.draggingText||+new Date-fs<100))qr(t);else if(!Be(e,t)&&!Pr(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!Ze)){var n=Q("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",he&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),he&&n.parentNode.removeChild(n)}}(e,f)},drop:Oe(e,Vs),leave:function(f){Be(e,f)||sa(e)}};var u=t.input.getField();ne(u,"keyup",function(f){return Cs.call(e,f)}),ne(u,"keydown",Oe(e,da)),ne(u,"keypress",Oe(e,gl)),ne(u,"focus",function(f){return Di(e,f)}),ne(u,"blur",function(f){return Yn(e,f)})}(this),function $s(){ps||(function Hn(){var e;ne(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,ds(So)},100))}),ne(window,"blur",function(){return ds(Yn)})}(),ps=!0)}(),Vn(this),this.curOp.forceUpdate=!0,ts(this,i),t.autofocus&&!lt||this.hasFocus()?setTimeout(function(){n.hasFocus()&&!n.state.focused&&Di(n)},20):Yn(this),ml)ml.hasOwnProperty(s)&&ml[s](this,t[s],pn);Xl(this),t.finishInit&&t.finishInit(this);for(var u=0;u<gr.length;++u)gr[u](this);$n(this),qe&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(a.lineDiv).textRendering&&(a.lineDiv.style.textRendering="auto")}st.defaults=Ms,st.optionHandlers=ml;var gr=[];function Bn(e,t,n,i){var a,l=e.doc;null==n&&(n="add"),"smart"==n&&(l.mode.indent?a=mi(e,t).state:n="prev");var s=e.options.tabSize,u=oe(l,t),f=A(u.text,null,s);u.stateAfter&&(u.stateAfter=null);var h,c=u.text.match(/^\s*/)[0];if(i||/\S/.test(u.text)){if("smart"==n&&((h=l.mode.indent(a,u.text.slice(c.length),u.text))==Ce||h>150)){if(!i)return;n="prev"}}else h=0,n="not";"prev"==n?h=t>l.first?A(oe(l,t-1).text,null,s):0:"add"==n?h=f+e.options.indentUnit:"subtract"==n?h=f-e.options.indentUnit:"number"==typeof n&&(h=f+n),h=Math.max(0,h);var d="",m=0;if(e.options.indentWithTabs)for(var y=Math.floor(h/s);y;--y)m+=s,d+="\t";if(m<h&&(d+=nr(h-m)),d!=c)return oi(l,d,E(t,0),E(t,c.length),"+input"),u.stateAfter=null,!0;for(var w=0;w<l.sel.ranges.length;w++){var k=l.sel.ranges[w];if(k.head.line==t&&k.head.ch<c.length){var M=E(t,c.length);ea(l,w,new De(M,M));break}}}st.defineInitHook=function(e){return gr.push(e)};var mr=null;function Fo(e){mr=e}function yl(e,t,n,i,l){var a=e.doc;e.display.shift=!1,i||(i=a.sel);var s=+new Date-200,u="paste"==l||e.state.pasteIncoming>s,f=xr(t),c=null;if(u&&i.ranges.length>1)if(mr&&mr.text.join("\n")==t){if(i.ranges.length%mr.text.length==0){c=[];for(var h=0;h<mr.text.length;h++)c.push(a.splitLines(mr.text[h]))}}else f.length==i.ranges.length&&e.options.pasteLinesPerSelection&&(c=qt(f,function(D){return[D]}));for(var d=e.curOp.updateInput,m=i.ranges.length-1;m>=0;m--){var y=i.ranges[m],w=y.from(),k=y.to();y.empty()&&(n&&n>0?w=E(w.line,w.ch-n):e.state.overwrite&&!u?k=E(k.line,Math.min(oe(a,k.line).text.length,k.ch+Le(f).length)):u&&mr&&mr.lineWise&&mr.text.join("\n")==f.join("\n")&&(w=k=E(w.line,0)));var M={from:w,to:k,text:c?c[m%c.length]:f,origin:l||(u?"paste":e.state.cutIncoming>s?"cut":"+input")};un(e.doc,M),Ft(e,"inputRead",e,M)}t&&!u&&xl(e,t),Ai(e),e.curOp.updateInput<2&&(e.curOp.updateInput=d),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function xa(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),!t.isReadOnly()&&!t.options.disableInput&&et(t,function(){return yl(t,n,0,null,"paste")}),!0}function xl(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,i=n.ranges.length-1;i>=0;i--){var l=n.ranges[i];if(!(l.head.ch>100||i&&n.ranges[i-1].head.line==l.head.line)){var a=e.getModeAt(l.head),s=!1;if(a.electricChars){for(var u=0;u<a.electricChars.length;u++)if(t.indexOf(a.electricChars.charAt(u))>-1){s=Bn(e,l.head.line,"smart");break}}else a.electricInput&&a.electricInput.test(oe(e.doc,l.head.line).text.slice(0,l.head.ch))&&(s=Bn(e,l.head.line,"smart"));s&&Ft(e,"electricInput",e,l.head.line)}}}function ba(e){for(var t=[],n=[],i=0;i<e.doc.sel.ranges.length;i++){var l=e.doc.sel.ranges[i].head.line,a={anchor:E(l,0),head:E(l+1,0)};n.push(a),t.push(e.getRange(a.anchor,a.head))}return{text:t,ranges:n}}function Ds(e,t,n,i){e.setAttribute("autocorrect",n?"":"off"),e.setAttribute("autocapitalize",i?"":"off"),e.setAttribute("spellcheck",!!t)}function bl(){var e=Q("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),t=Q("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return qe?e.style.width="1000px":e.setAttribute("wrap","off"),rt&&(e.style.border="1px solid black"),Ds(e),t}function Xe(e,t,n,i,l){var a=t,s=n,u=oe(e,t.line),f=l&&"rtl"==e.direction?-n:n;function h(F){var W;if("codepoint"==i){var I=u.text.charCodeAt(t.ch+(n>0?0:-1));W=isNaN(I)?null:new E(t.line,Math.max(0,Math.min(u.text.length,t.ch+n*((n>0?I>=55296&&I<56320:I>=56320&&I<57343)?2:1))),-n)}else W=l?function gs(e,t,n,i){var l=K(t,e.doc.direction);if(!l)return fa(t,n,i);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var a=at(l,n.ch,n.sticky),s=l[a];if("ltr"==e.doc.direction&&s.level%2==0&&(i>0?s.to>n.ch:s.from<n.ch))return fa(t,n,i);var f,u=function(D,F){return To(t,D instanceof E?D.ch:D,F)},c=function(D){return e.options.lineWrapping?(f=f||Un(e,t),Ya(e,t,f,D)):{begin:0,end:t.text.length}},h=c("before"==n.sticky?u(n,-1):n.ch);if("rtl"==e.doc.direction||1==s.level){var d=1==s.level==i<0,m=u(n,d?1:-1);if(null!=m&&(d?m<=s.to&&m<=h.end:m>=s.from&&m>=h.begin))return new E(n.line,m,d?"before":"after")}var w=function(D,F,W){for(;D>=0&&D<l.length;D+=F){var _=l[D],q=F>0==(1!=_.level),fe=q?W.begin:u(W.end,-1);if(_.from<=fe&&fe<_.to||(fe=q?_.from:u(_.to,-1),W.begin<=fe&&fe<W.end))return ve=fe,q?new E(n.line,u(ve,1),"before"):new E(n.line,ve,"after")}var ve},k=w(a+i,i,h);if(k)return k;var M=i>0?h.end:u(h.begin,-1);return null==M||i>0&&M==t.text.length||!(k=w(i>0?0:l.length-1,i,c(M)))?null:k}(e.cm,u,t,n):fa(u,t,n);if(null==W){if(F||!function c(){var F=t.line+f;return!(F<e.first||F>=e.first+e.size)&&(t=new E(F,t.ch,t.sticky),u=oe(e,F))}())return!1;t=ui(l,e.cm,u,t.line,f)}else t=W;return!0}if("char"==i||"codepoint"==i)h();else if("column"==i)h(!0);else if("word"==i||"group"==i)for(var d=null,m="group"==i,y=e.cm&&e.cm.getHelper(t,"wordChars"),w=!0;!(n<0)||h(!w);w=!1){var k=u.text.charAt(t.ch)||"\n",M=we(k,y)?"w":m&&"\n"==k?"n":!m||/\s/.test(k)?null:"p";if(m&&!w&&!M&&(M="s"),d&&d!=M){n<0&&(n=1,h(),t.sticky="after");break}if(M&&(d=M),n>0&&!h(!w))break}var D=wo(e,t,a,s,!0);return Ie(a,D)&&(D.hitSide=!0),D}function wa(e,t,n,i){var s,c,l=e.doc,a=t.left;if("page"==i){var u=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),f=Math.max(u-.5*Sn(e.display),3);s=(n>0?t.bottom:t.top)+n*f}else"line"==i&&(s=n>0?t.bottom+3:t.top-3);for(;(c=Qo(e,a,s)).outside;){if(n<0?s<=0:s>=l.height){c.hitSide=!0;break}s+=5*n}return c}var Qe=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new le,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function ci(e,t){var n=Cr(e,t.line);if(!n||n.hidden)return null;var i=oe(e.doc,t.line),l=Wl(n,i,t.line),a=K(i,e.doc.direction),s="left";a&&(s=at(a,t.ch)%2?"right":"left");var f=Ka(l.map,t.ch,s);return f.offset="right"==f.collapse?f.end:f.start,f}function vn(e,t){return t&&(e.bad=!0),e}function gt(e,t,n){var i;if(t==e.display.lineDiv){if(!(i=e.display.lineDiv.childNodes[n]))return vn(e.clipPos(E(e.display.viewTo-1)),!0);t=null,n=0}else for(i=t;;i=i.parentNode){if(!i||i==e.display.lineDiv)return null;if(i.parentNode&&i.parentNode==e.display.lineDiv)break}for(var l=0;l<e.display.view.length;l++){var a=e.display.view[l];if(a.node==i)return su(a,t,n)}}function su(e,t,n){var i=e.text.firstChild,l=!1;if(!t||!S(i,t))return vn(E(p(e.line),0),!0);if(t==i&&(l=!0,t=i.childNodes[n],n=0,!t)){var a=e.rest?Le(e.rest):e.line;return vn(E(p(a),a.text.length),l)}var s=3==t.nodeType?t:null,u=t;for(!s&&1==t.childNodes.length&&3==t.firstChild.nodeType&&(s=t.firstChild,n&&(n=s.nodeValue.length));u.parentNode!=i;)u=u.parentNode;var f=e.measure,c=f.maps;function h(M,D,F){for(var W=-1;W<(c?c.length:0);W++)for(var I=W<0?f.map:c[W],_=0;_<I.length;_+=3){var q=I[_+2];if(q==M||q==D){var fe=p(W<0?e.line:e.rest[W]),ve=I[_]+F;return(F<0||q!=M)&&(ve=I[_+(F?1:0)]),E(fe,ve)}}}var d=h(s,u,n);if(d)return vn(d,l);for(var m=u.nextSibling,y=s?s.nodeValue.length-n:0;m;m=m.nextSibling){if(d=h(m,m.firstChild,0))return vn(E(d.line,d.ch-y),l);y+=m.textContent.length}for(var w=u.previousSibling,k=n;w;w=w.previousSibling){if(d=h(w,w.firstChild,-1))return vn(E(d.line,d.ch+k),l);k+=w.textContent.length}}Qe.prototype.init=function(e){var t=this,n=this,i=n.cm,l=n.div=e.lineDiv;function a(u){for(var f=u.target;f;f=f.parentNode){if(f==l)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(f.className))break}return!1}function s(u){if(a(u)&&!Be(i,u)){if(i.somethingSelected())Fo({lineWise:!1,text:i.getSelections()}),"cut"==u.type&&i.replaceSelection("",null,"cut");else{if(!i.options.lineWiseCopyCut)return;var f=ba(i);Fo({lineWise:!0,text:f.text}),"cut"==u.type&&i.operation(function(){i.setSelections(f.ranges,0,ht),i.replaceSelection("",null,"cut")})}if(u.clipboardData){u.clipboardData.clearData();var c=mr.text.join("\n");if(u.clipboardData.setData("Text",c),u.clipboardData.getData("Text")==c)return void u.preventDefault()}var h=bl(),d=h.firstChild;i.display.lineSpace.insertBefore(h,i.display.lineSpace.firstChild),d.value=mr.text.join("\n");var m=v();z(d),setTimeout(function(){i.display.lineSpace.removeChild(h),m.focus(),m==l&&n.showPrimarySelection()},50)}}l.contentEditable=!0,Ds(l,i.options.spellcheck,i.options.autocorrect,i.options.autocapitalize),ne(l,"paste",function(u){!a(u)||Be(i,u)||xa(u,i)||Se<=11&&setTimeout(Oe(i,function(){return t.updateFromDOM()}),20)}),ne(l,"compositionstart",function(u){t.composing={data:u.data,done:!1}}),ne(l,"compositionupdate",function(u){t.composing||(t.composing={data:u.data,done:!1})}),ne(l,"compositionend",function(u){t.composing&&(u.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),ne(l,"touchstart",function(){return n.forceCompositionEnd()}),ne(l,"input",function(){t.composing||t.readFromDOMSoon()}),ne(l,"copy",s),ne(l,"cut",s)},Qe.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},Qe.prototype.prepareSelection=function(){var e=uo(this.cm,!1);return e.focus=v()==this.div,e},Qe.prototype.showSelection=function(e,t){!e||!this.cm.display.view.length||((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Qe.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Qe.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,n=t.doc.sel.primary(),i=n.from(),l=n.to();if(t.display.viewTo==t.display.viewFrom||i.line>=t.display.viewTo||l.line<t.display.viewFrom)e.removeAllRanges();else{var a=gt(t,e.anchorNode,e.anchorOffset),s=gt(t,e.focusNode,e.focusOffset);if(!a||a.bad||!s||s.bad||0!=Z(pe(a,s),i)||0!=Z(tr(a,s),l)){var u=t.display.view,f=i.line>=t.display.viewFrom&&ci(t,i)||{node:u[0].measure.map[2],offset:0},c=l.line<t.display.viewTo&&ci(t,l);if(!c){var h=u[u.length-1].measure,d=h.maps?h.maps[h.maps.length-1]:h.map;c={node:d[d.length-1],offset:d[d.length-2]-d[d.length-3]}}if(!f||!c)return void e.removeAllRanges();var y,m=e.rangeCount&&e.getRangeAt(0);try{y=yt(f.node,f.offset,c.offset,c.node)}catch{}y&&(!Me&&t.state.focused?(e.collapse(f.node,f.offset),y.collapsed||(e.removeAllRanges(),e.addRange(y))):(e.removeAllRanges(),e.addRange(y)),m&&null==e.anchorNode?e.addRange(m):Me&&this.startGracePeriod()),this.rememberSelection()}}},Qe.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},Qe.prototype.showMultipleSelections=function(e){re(this.cm.display.cursorDiv,e.cursors),re(this.cm.display.selectionDiv,e.selection)},Qe.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Qe.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return S(this.div,t)},Qe.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&((!this.selectionInEditor()||v()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Qe.prototype.blur=function(){this.div.blur()},Qe.prototype.getField=function(){return this.div},Qe.prototype.supportsTouch=function(){return!0},Qe.prototype.receivedFocus=function(){var e=this,t=this;this.selectionInEditor()?setTimeout(function(){return e.pollSelection()},20):et(this.cm,function(){return t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function n(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,n))})},Qe.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Qe.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(Xt&&ft&&this.cm.display.gutterSpecs.length&&function lu(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=gt(t,e.anchorNode,e.anchorOffset),i=gt(t,e.focusNode,e.focusOffset);n&&i&&et(t,function(){Kt(t.doc,on(n,i),ht),(n.bad||i.bad)&&(t.curOp.selectionChanged=!0)})}}},Qe.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var a,s,u,e=this.cm,t=e.display,n=e.doc.sel.primary(),i=n.from(),l=n.to();if(0==i.ch&&i.line>e.firstLine()&&(i=E(i.line-1,oe(e.doc,i.line-1).length)),l.ch==oe(e.doc,l.line).text.length&&l.line<e.lastLine()&&(l=E(l.line+1,0)),i.line<t.viewFrom||l.line>t.viewTo-1)return!1;i.line==t.viewFrom||0==(a=ur(e,i.line))?(s=p(t.view[0].line),u=t.view[0].node):(s=p(t.view[a].line),u=t.view[a-1].node.nextSibling);var c,h,f=ur(e,l.line);if(f==t.view.length-1?(c=t.viewTo-1,h=t.lineDiv.lastChild):(c=p(t.view[f+1].line)-1,h=t.view[f+1].node.previousSibling),!u)return!1;for(var d=e.doc.splitLines(function au(e,t,n,i,l){var a="",s=!1,u=e.doc.lineSeparator(),f=!1;function h(){s&&(a+=u,f&&(a+=u),s=f=!1)}function d(y){y&&(h(),a+=y)}function m(y){if(1==y.nodeType){var w=y.getAttribute("cm-text");if(w)return void d(w);var M,k=y.getAttribute("cm-marker");if(k){var D=e.findMarks(E(i,0),E(l+1,0),function c(y){return function(w){return w.id==y}}(+k));return void(D.length&&(M=D[0].find(0))&&d(Gt(e.doc,M.from,M.to).join(u)))}if("false"==y.getAttribute("contenteditable"))return;var F=/^(pre|div|p|li|table|br)$/i.test(y.nodeName);if(!/^br$/i.test(y.nodeName)&&0==y.textContent.length)return;F&&h();for(var W=0;W<y.childNodes.length;W++)m(y.childNodes[W]);/^(pre|p)$/i.test(y.nodeName)&&(f=!0),F&&(s=!0)}else 3==y.nodeType&&d(y.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;m(t),t!=n;)t=t.nextSibling,f=!1;return a}(e,u,h,s,c)),m=Gt(e.doc,E(s,0),E(c,oe(e.doc,c).text.length));d.length>1&&m.length>1;)if(Le(d)==Le(m))d.pop(),m.pop(),c--;else{if(d[0]!=m[0])break;d.shift(),m.shift(),s++}for(var y=0,w=0,k=d[0],M=m[0],D=Math.min(k.length,M.length);y<D&&k.charCodeAt(y)==M.charCodeAt(y);)++y;for(var F=Le(d),W=Le(m),I=Math.min(F.length-(1==d.length?y:0),W.length-(1==m.length?y:0));w<I&&F.charCodeAt(F.length-w-1)==W.charCodeAt(W.length-w-1);)++w;if(1==d.length&&1==m.length&&s==i.line)for(;y&&y>i.ch&&F.charCodeAt(F.length-w-1)==W.charCodeAt(W.length-w-1);)y--,w++;d[d.length-1]=F.slice(0,F.length-w).replace(/^\u200b+/,""),d[0]=d[0].slice(y).replace(/\u200b+$/,"");var _=E(s,y),q=E(c,m.length?Le(m).length-w:0);return d.length>1||d[0]||Z(_,q)?(oi(e.doc,d,_,q,"+input"),!0):void 0},Qe.prototype.ensurePolled=function(){this.forceCompositionEnd()},Qe.prototype.reset=function(){this.forceCompositionEnd()},Qe.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Qe.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80))},Qe.prototype.updateFromDOM=function(){var e=this;(this.cm.isReadOnly()||!this.pollContent())&&et(this.cm,function(){return kt(e.cm)})},Qe.prototype.setUneditable=function(e){e.contentEditable="false"},Qe.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Oe(this.cm,yl)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},Qe.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},Qe.prototype.onContextMenu=function(){},Qe.prototype.resetPosition=function(){},Qe.prototype.needsContentAttribute=!0;var Lt=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new le,this.hasSelection=!1,this.composing=null};Lt.prototype.init=function(e){var t=this,n=this,i=this.cm;this.createField(e);var l=this.textarea;function a(s){if(!Be(i,s)){if(i.somethingSelected())Fo({lineWise:!1,text:i.getSelections()});else{if(!i.options.lineWiseCopyCut)return;var u=ba(i);Fo({lineWise:!0,text:u.text}),"cut"==s.type?i.setSelections(u.ranges,null,ht):(n.prevInput="",l.value=u.text.join("\n"),z(l))}"cut"==s.type&&(i.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),rt&&(l.style.width="0px"),ne(l,"input",function(){de&&Se>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()}),ne(l,"paste",function(s){Be(i,s)||xa(s,i)||(i.state.pasteIncoming=+new Date,n.fastPoll())}),ne(l,"cut",a),ne(l,"copy",a),ne(e.scroller,"paste",function(s){if(!Pr(e,s)&&!Be(i,s)){if(!l.dispatchEvent)return i.state.pasteIncoming=+new Date,void n.focus();var u=new Event("paste");u.clipboardData=s.clipboardData,l.dispatchEvent(u)}}),ne(e.lineSpace,"selectstart",function(s){Pr(e,s)||It(s)}),ne(l,"compositionstart",function(){var s=i.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:s,range:i.markText(s,i.getCursor("to"),{className:"CodeMirror-composing"})}}),ne(l,"compositionend",function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)})},Lt.prototype.createField=function(e){this.wrapper=bl(),this.textarea=this.wrapper.firstChild},Lt.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},Lt.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,i=uo(e);if(e.options.moveInputWithCursor){var l=dr(e,n.sel.primary().head,"div"),a=t.wrapper.getBoundingClientRect(),s=t.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,l.top+s.top-a.top)),i.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,l.left+s.left-a.left))}return i},Lt.prototype.showSelection=function(e){var n=this.cm.display;re(n.cursorDiv,e.cursors),re(n.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Lt.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&z(this.textarea),de&&Se>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",de&&Se>=9&&(this.hasSelection=null))}},Lt.prototype.getField=function(){return this.textarea},Lt.prototype.supportsTouch=function(){return!1},Lt.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!lt||v()!=this.textarea))try{this.textarea.focus()}catch{}},Lt.prototype.blur=function(){this.textarea.blur()},Lt.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Lt.prototype.receivedFocus=function(){this.slowPoll()},Lt.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Lt.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,function n(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,n))})},Lt.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,i=this.prevInput;if(this.contextMenuPending||!t.state.focused||Ur(n)&&!i&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var l=n.value;if(l==i&&!t.somethingSelected())return!1;if(de&&Se>=9&&this.hasSelection===l||g&&/[\uf700-\uf7ff]/.test(l))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var a=l.charCodeAt(0);if(8203==a&&!i&&(i="\u200b"),8666==a)return this.reset(),this.cm.execCommand("undo")}for(var s=0,u=Math.min(i.length,l.length);s<u&&i.charCodeAt(s)==l.charCodeAt(s);)++s;return et(t,function(){yl(t,l.slice(s),i.length-s,null,e.composing?"*compose":null),l.length>1e3||l.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=l,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Lt.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Lt.prototype.onKeyPress=function(){de&&Se>=9&&(this.hasSelection=null),this.fastPoll()},Lt.prototype.onContextMenu=function(e){var t=this,n=t.cm,i=n.display,l=t.textarea;t.contextMenuPending&&t.contextMenuPending();var a=Nt(n,e),s=i.scroller.scrollTop;if(a&&!he){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(a)&&Oe(n,Kt)(n.doc,on(a),ht);var d,f=l.style.cssText,c=t.wrapper.style.cssText,h=t.wrapper.offsetParent.getBoundingClientRect();if(t.wrapper.style.cssText="position: static",l.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-h.top-5)+"px; left: "+(e.clientX-h.left-5)+"px;\n      z-index: 1000; background: "+(de?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",qe&&(d=window.scrollY),i.input.focus(),qe&&window.scrollTo(null,d),i.input.reset(),n.somethingSelected()||(l.value=t.prevInput=" "),t.contextMenuPending=y,i.selForContextMenu=n.doc.sel,clearTimeout(i.detectingSelectAll),de&&Se>=9&&m(),te){qr(e);var w=function(){We(window,"mouseup",w),setTimeout(y,20)};ne(window,"mouseup",w)}else setTimeout(y,50)}function m(){if(null!=l.selectionStart){var k=n.somethingSelected(),M="\u200b"+(k?l.value:"");l.value="\u21da",l.value=M,t.prevInput=k?"":"\u200b",l.selectionStart=1,l.selectionEnd=M.length,i.selForContextMenu=n.doc.sel}}function y(){if(t.contextMenuPending==y&&(t.contextMenuPending=!1,t.wrapper.style.cssText=c,l.style.cssText=f,de&&Se<9&&i.scrollbars.setScrollTop(i.scroller.scrollTop=s),null!=l.selectionStart)){(!de||de&&Se<9)&&m();var k=0,M=function(){i.selForContextMenu==n.doc.sel&&0==l.selectionStart&&l.selectionEnd>0&&"\u200b"==t.prevInput?Oe(n,ii)(n):k++<10?i.detectingSelectAll=setTimeout(M,500):(i.selForContextMenu=null,i.input.reset())};i.detectingSelectAll=setTimeout(M,200)}}},Lt.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e,this.textarea.readOnly=!!e},Lt.prototype.setUneditable=function(){},Lt.prototype.needsContentAttribute=!1,function iu(e){var t=e.optionHandlers;function n(i,l,a,s){e.defaults[i]=l,a&&(t[i]=s?function(u,f,c){c!=pn&&a(u,f,c)}:a)}e.defineOption=n,e.Init=pn,n("value","",function(i,l){return i.setValue(l)},!0),n("mode",null,function(i,l){i.doc.modeOption=l,al(i)},!0),n("indentUnit",2,al,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,function(i){ti(i),Li(i),kt(i)},!0),n("lineSeparator",null,function(i,l){if(i.doc.lineSep=l,l){var a=[],s=i.doc.first;i.doc.iter(function(f){for(var c=0;;){var h=f.text.indexOf(l,c);if(-1==h)break;c=h+l.length,a.push(E(s,h))}s++});for(var u=a.length-1;u>=0;u--)oi(i.doc,l,a[u],E(a[u].line,a[u].ch+l.length))}}),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(i,l,a){i.state.specialChars=new RegExp(l.source+(l.test("\t")?"":"|\t"),"g"),a!=pn&&i.refresh()}),n("specialCharPlaceholder",Ws,function(i){return i.refresh()},!0),n("electricChars",!0),n("inputStyle",lt?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),n("spellcheck",!1,function(i,l){return i.getInputField().spellcheck=l},!0),n("autocorrect",!1,function(i,l){return i.getInputField().autocorrect=l},!0),n("autocapitalize",!1,function(i,l){return i.getInputField().autocapitalize=l},!0),n("rtlMoveVisually",!ae),n("wholeLineUpdateBefore",!0),n("theme","default",function(i){ya(i),On(i)},!0),n("keyMap","default",function(i,l,a){var s=_i(l),u=a!=pn&&_i(a);u&&u.detach&&u.detach(i,s),s.attach&&s.attach(i,u||null)}),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,ou,!0),n("gutters",[],function(i,l){i.display.gutterSpecs=ei(l,i.options.lineNumbers),On(i)},!0),n("fixedGutter",!0,function(i,l){i.display.gutters.style.left=l?lo(i.display)+"px":"0",i.refresh()},!0),n("coverGutterNextToScrollbar",!1,function(i){return Jn(i)},!0),n("scrollbarStyle","native",function(i){En(i),Jn(i),i.display.scrollbars.setScrollTop(i.doc.scrollTop),i.display.scrollbars.setScrollLeft(i.doc.scrollLeft)},!0),n("lineNumbers",!1,function(i,l){i.display.gutterSpecs=ei(i.options.gutters,l),On(i)},!0),n("firstLineNumber",1,On,!0),n("lineNumberFormatter",function(i){return i},On,!0),n("showCursorWhenSelecting",!1,Xn,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,function(i,l){"nocursor"==l&&(Yn(i),i.display.input.blur()),i.display.input.readOnlyChanged(l)}),n("screenReaderLabel",null,function(i,l){i.display.input.screenReaderLabelChanged(l=""===l?null:l)}),n("disableInput",!1,function(i,l){l||i.display.input.reset()},!0),n("dragDrop",!0,vt),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,Xn,!0),n("singleCursorHeightPerLine",!0,Xn,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,ti,!0),n("addModeClass",!1,ti,!0),n("pollInterval",100),n("undoDepth",200,function(i,l){return i.doc.history.undoDepth=l}),n("historyEventDelay",1250),n("viewportMargin",10,function(i){return i.refresh()},!0),n("maxHighlightLength",1e4,ti,!0),n("moveInputWithCursor",!0,function(i,l){l||i.display.input.resetPosition()}),n("tabindex",null,function(i,l){return i.display.input.getField().tabIndex=l||""}),n("autofocus",null),n("direction","ltr",function(i,l){return i.doc.setDirection(l)},!0),n("phrases",null)}(st),function As(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(i,l){var a=this.options,s=a[i];a[i]==l&&"mode"!=i||(a[i]=l,t.hasOwnProperty(i)&&Oe(this,t[i])(this,l,s),xt(this,"optionChange",this,i))},getOption:function(i){return this.options[i]},getDoc:function(){return this.doc},addKeyMap:function(i,l){this.state.keyMaps[l?"push":"unshift"](_i(i))},removeKeyMap:function(i){for(var l=this.state.keyMaps,a=0;a<l.length;++a)if(l[a]==i||l[a].name==i)return l.splice(a,1),!0},addOverlay:Ot(function(i,l){var a=i.token?i:e.getMode(this.options,i);if(a.startState)throw new Error("Overlays may not be stateful.");(function X(e,t,n){for(var i=0,l=n(t);i<e.length&&n(e[i])<=l;)i++;e.splice(i,0,t)})(this.state.overlays,{mode:a,modeSpec:i,opaque:l&&l.opaque,priority:l&&l.priority||0},function(s){return s.priority}),this.state.modeGen++,kt(this)}),removeOverlay:Ot(function(i){for(var l=this.state.overlays,a=0;a<l.length;++a){var s=l[a].modeSpec;if(s==i||"string"==typeof i&&s.name==i)return l.splice(a,1),this.state.modeGen++,void kt(this)}}),indentLine:Ot(function(i,l,a){"string"!=typeof l&&"number"!=typeof l&&(l=null==l?this.options.smartIndent?"smart":"prev":l?"add":"subtract"),C(this.doc,i)&&Bn(this,i,l,a)}),indentSelection:Ot(function(i){for(var l=this.doc.sel.ranges,a=-1,s=0;s<l.length;s++){var u=l[s];if(u.empty())u.head.line>a&&(Bn(this,u.head.line,i,!0),a=u.head.line,s==this.doc.sel.primIndex&&Ai(this));else{var f=u.from(),c=u.to(),h=Math.max(a,f.line);a=Math.min(this.lastLine(),c.line-(c.ch?0:1))+1;for(var d=h;d<a;++d)Bn(this,d,i);var m=this.doc.sel.ranges;0==f.ch&&l.length==m.length&&m[s].from().ch>0&&ea(this.doc,s,new De(f,m[s].to()),ht)}}}),getTokenAt:function(i,l){return Tl(this,i,l)},getLineTokens:function(i,l){return Tl(this,E(i),l,!0)},getTokenTypeAt:function(i){i=me(this.doc,i);var f,l=Po(this,oe(this.doc,i.line)),a=0,s=(l.length-1)/2,u=i.ch;if(0==u)f=l[2];else for(;;){var c=a+s>>1;if((c?l[2*c-1]:0)>=u)s=c;else{if(!(l[2*c+1]<u)){f=l[2*c+2];break}a=c+1}}var h=f?f.indexOf("overlay "):-1;return h<0?f:0==h?null:f.slice(0,h-1)},getModeAt:function(i){var l=this.doc.mode;return l.innerMode?e.innerMode(l,this.getTokenAt(i).state).mode:l},getHelper:function(i,l){return this.getHelpers(i,l)[0]},getHelpers:function(i,l){var a=[];if(!n.hasOwnProperty(l))return a;var s=n[l],u=this.getModeAt(i);if("string"==typeof u[l])s[u[l]]&&a.push(s[u[l]]);else if(u[l])for(var f=0;f<u[l].length;f++){var c=s[u[l][f]];c&&a.push(c)}else u.helperType&&s[u.helperType]?a.push(s[u.helperType]):s[u.name]&&a.push(s[u.name]);for(var h=0;h<s._global.length;h++){var d=s._global[h];d.pred(u,this)&&-1==B(a,d.val)&&a.push(d.val)}return a},getStateAfter:function(i,l){var a=this.doc;return mi(this,(i=Ca(a,i??a.first+a.size-1))+1,l).state},cursorCoords:function(i,l){var s=this.doc.sel.primary();return dr(this,null==i?s.head:"object"==typeof i?me(this.doc,i):i?s.from():s.to(),l||"page")},charCoords:function(i,l){return oo(this,me(this.doc,i),l||"page")},coordsChar:function(i,l){return Qo(this,(i=Sr(this,i,l||"page")).left,i.top)},lineAtHeight:function(i,l){return i=Sr(this,{top:i,left:0},l||"page").top,b(this.doc,i+this.display.viewOffset)},heightAtLine:function(i,l,a){var u,s=!1;if("number"==typeof i){var f=this.doc.first+this.doc.size-1;i<this.doc.first?i=this.doc.first:i>f&&(i=f,s=!0),u=oe(this.doc,i)}else u=i;return Kn(this,u,{top:0,left:0},l||"page",a||s).top+(s?this.doc.height-Hr(u):0)},defaultTextHeight:function(){return Sn(this.display)},defaultCharWidth:function(){return kn(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(i,l,a,s,u){var f=this.display,c=(i=dr(this,me(this.doc,i))).bottom,h=i.left;if(l.style.position="absolute",l.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(l),f.sizer.appendChild(l),"over"==s)c=i.top;else if("above"==s||"near"==s){var d=Math.max(f.wrapper.clientHeight,this.doc.height),m=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==s||i.bottom+l.offsetHeight>d)&&i.top>l.offsetHeight?c=i.top-l.offsetHeight:i.bottom+l.offsetHeight<=d&&(c=i.bottom),h+l.offsetWidth>m&&(h=m-l.offsetWidth)}l.style.top=c+"px",l.style.left=l.style.right="","right"==u?(h=f.sizer.clientWidth-l.offsetWidth,l.style.right="0px"):("left"==u?h=0:"middle"==u&&(h=(f.sizer.clientWidth-l.offsetWidth)/2),l.style.left=h+"px"),a&&function zl(e,t){var n=Dn(e,t);null!=n.scrollTop&&_r(e,n.scrollTop),null!=n.scrollLeft&&pr(e,n.scrollLeft)}(this,{left:h,top:c,right:h+l.offsetWidth,bottom:c+l.offsetHeight})},triggerOnKeyDown:Ot(da),triggerOnKeyPress:Ot(gl),triggerOnKeyUp:Cs,triggerOnMouseDown:Ot(Ss),execCommand:function(i){if(Mo.hasOwnProperty(i))return Mo[i].call(null,this)},triggerElectric:Ot(function(i){xl(this,i)}),findPosH:function(i,l,a,s){var u=1;l<0&&(u=-1,l=-l);for(var f=me(this.doc,i),c=0;c<l&&!(f=Xe(this.doc,f,u,a,s)).hitSide;++c);return f},moveH:Ot(function(i,l){var a=this;this.extendSelectionsBy(function(s){return a.display.shift||a.doc.extend||s.empty()?Xe(a.doc,s.head,i,l,a.options.rtlMoveVisually):i<0?s.from():s.to()},Ct)}),deleteH:Ot(function(i,l){var s=this.doc;this.doc.sel.somethingSelected()?s.replaceSelection("",null,"+delete"):Pn(this,function(u){var f=Xe(s,u.head,i,l,!1);return i<0?{from:f,to:u.head}:{from:u.head,to:f}})}),findPosV:function(i,l,a,s){var u=1,f=s;l<0&&(u=-1,l=-l);for(var c=me(this.doc,i),h=0;h<l;++h){var d=dr(this,c,"div");if(null==f?f=d.left:d.left=f,(c=wa(this,d,u,a)).hitSide)break}return c},moveV:Ot(function(i,l){var a=this,s=this.doc,u=[],f=!this.display.shift&&!s.extend&&s.sel.somethingSelected();if(s.extendSelectionsBy(function(h){if(f)return i<0?h.from():h.to();var d=dr(a,h.head,"div");null!=h.goalColumn&&(d.left=h.goalColumn),u.push(d.left);var m=wa(a,d,i,l);return"page"==l&&h==s.sel.primary()&&Zn(a,oo(a,m,"div").top-d.top),m},Ct),u.length)for(var c=0;c<s.sel.ranges.length;c++)s.sel.ranges[c].goalColumn=u[c]}),findWordAt:function(i){var a=oe(this.doc,i.line).text,s=i.ch,u=i.ch;if(a){var f=this.getHelper(i,"wordChars");"before"!=i.sticky&&u!=a.length||!s?++u:--s;for(var c=a.charAt(s),h=we(c,f)?function(d){return we(d,f)}:/\s/.test(c)?function(d){return/\s/.test(d)}:function(d){return!/\s/.test(d)&&!we(d)};s>0&&h(a.charAt(s-1));)--s;for(;u<a.length&&h(a.charAt(u));)++u}return new De(E(i.line,s),E(i.line,u))},toggleOverwrite:function(i){null!=i&&i==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?$(this.display.cursorDiv,"CodeMirror-overwrite"):U(this.display.cursorDiv,"CodeMirror-overwrite"),xt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==v()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Ot(function(i,l){An(this,i,l)}),getScrollInfo:function(){var i=this.display.scroller;return{left:i.scrollLeft,top:i.scrollTop,height:i.scrollHeight-wr(this)-this.display.barHeight,width:i.scrollWidth-wr(this)-this.display.barWidth,clientHeight:Xo(this),clientWidth:zn(this)}},scrollIntoView:Ot(function(i,l){null==i?(i={from:this.doc.sel.primary().head,to:null},null==l&&(l=this.options.cursorScrollMargin)):"number"==typeof i?i={from:E(i,0),to:null}:null==i.from&&(i={from:i,to:null}),i.to||(i.to=i.from),i.margin=l||0,null!=i.from.line?function Ja(e,t){Nn(e),e.curOp.scrollToPos=t}(this,i):Gl(this,i.from,i.to,i.margin)}),setSize:Ot(function(i,l){var a=this,s=function(f){return"number"==typeof f||/^\d+$/.test(String(f))?f+"px":f};null!=i&&(this.display.wrapper.style.width=s(i)),null!=l&&(this.display.wrapper.style.height=s(l)),this.options.lineWrapping&&Hl(this);var u=this.display.viewFrom;this.doc.iter(u,this.display.viewTo,function(f){if(f.widgets)for(var c=0;c<f.widgets.length;c++)if(f.widgets[c].noHScroll){Rr(a,u,"widget");break}++u}),this.curOp.forceUpdate=!0,xt(this,"refresh",this)}),operation:function(i){return et(this,i)},startOperation:function(){return Vn(this)},endOperation:function(){return $n(this)},refresh:Ot(function(){var i=this.display.cachedTextHeight;kt(this),this.curOp.forceUpdate=!0,Li(this),An(this,this.doc.scrollLeft,this.doc.scrollTop),nl(this.display),(null==i||Math.abs(i-Sn(this.display))>.5||this.options.lineWrapping)&&en(this),xt(this,"refresh",this)}),swapDoc:Ot(function(i){var l=this.doc;return l.cm=null,this.state.selectingText&&this.state.selectingText(),ts(this,i),Li(this),this.display.input.reset(),An(this,i.scrollLeft,i.scrollTop),this.curOp.forceScroll=!0,Ft(this,"swapDoc",this,l),l}),phrase:function(i){var l=this.options.phrases;return l&&Object.prototype.hasOwnProperty.call(l,i)?l[i]:i},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},yr(e),e.registerHelper=function(i,l,a){n.hasOwnProperty(i)||(n[i]=e[i]={_global:[]}),n[i][l]=a},e.registerGlobalHelper=function(i,l,a,s){e.registerHelper(i,l,s),n[i]._global.push({pred:a,val:s})}}(st);var r="iter insert remove copy getEditor constructor".split(" ");for(var o in or.prototype)or.prototype.hasOwnProperty(o)&&B(r,o)<0&&(st.prototype[o]=function(e){return function(){return e.apply(this.doc,arguments)}}(or.prototype[o]));return yr(or),st.inputStyles={textarea:Lt,contenteditable:Qe},st.defineMode=function(e){!st.defaults.mode&&"null"!=e&&(st.defaults.mode=e),ar.apply(this,arguments)},st.defineMIME=function Zr(e,t){Nr[e]=t},st.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),st.defineMIME("text/plain","null"),st.defineExtension=function(e,t){st.prototype[e]=t},st.defineDocExtension=function(e,t){or.prototype[e]=t},st.fromTextArea=function uu(e,t){if((t=t?N(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n=v();t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}function i(){e.value=u.getValue()}var l;if(e.form&&(ne(e.form,"submit",i),!t.leaveSubmitMethodAlone)){var a=e.form;l=a.submit;try{var s=a.submit=function(){i(),a.submit=l,a.submit(),a.submit=s}}catch{}}t.finishInit=function(f){f.save=i,f.getTextArea=function(){return e},f.toTextArea=function(){f.toTextArea=isNaN,i(),e.parentNode.removeChild(f.getWrapperElement()),e.style.display="",e.form&&(We(e.form,"submit",i),!t.leaveSubmitMethodAlone&&"function"==typeof e.form.submit&&(e.form.submit=l))}},e.style.display="none";var u=st(function(f){return e.parentNode.insertBefore(f,e.nextSibling)},t);return u},function wl(e){e.off=We,e.on=ne,e.wheelEventPixels=vr,e.Doc=or,e.splitLines=xr,e.countColumn=A,e.findColumn=Et,e.isWordChar=Y,e.Pass=Ce,e.signal=xt,e.Line=bi,e.changeEnd=Xr,e.scrollbarModel=Qa,e.Pos=E,e.cmpPos=Z,e.modes=pi,e.mimeModes=Nr,e.resolveMode=Er,e.getMode=vi,e.modeExtensions=sr,e.extendMode=bn,e.copyState=Fr,e.startState=ie,e.innerMode=pt,e.commands=Mo,e.keyMap=dn,e.keyName=si,e.isModifierKey=ua,e.lookupKey=ai,e.normalizeKeyMap=vs,e.StringStream=$e,e.SharedTextMarker=Bi,e.TextMarker=Tr,e.LineWidget=Co,e.e_preventDefault=It,e.e_stopPropagation=Gr,e.e_stop=qr,e.addClass=$,e.contains=S,e.rmClass=U,e.keyNames=zr}(st),st.version="5.65.0",st},"object"==typeof ee&&typeof ue<"u"?ue.exports=P():void 0!==(je="function"==typeof(J=P)?J.call(ee,ge,ee,ue):J)&&(ue.exports=je)},{}]},{},[1])},7380:(hi,mt,ge)=>{"use strict";ge.r(mt),ge.d(mt,{Web3SandboxModule:()=>qt});var J=ge(8434),je=ge(9417),G=ge(33),ue=ge(7916),ee=ge(5596),j=ge(3746),P=ge(8834),Me=ge(5416),ce=ge(467),Ge=ge(3246),be=ge(6123),de=ge(4173),Se=ge(4048),qe=ge(7358),ct=ge(9293),ft=ge(4194),he=ge(4219);let $t=0;const er=function(){var X=(0,ce.A)(function*({version:Ae,contractBody:L,options:R}){const Y=new Worker(URL.createObjectURL(new Blob([`(${he.V})()`],{type:"module"}))),we=((X,Ae)=>{const L={language:"Solidity",sources:{Compiled_Contracts:{content:X}},settings:{...Ae,outputSelection:{"*":{"*":["*"]}}}};return JSON.stringify(L)})(L,R),Te=$t++;return new Promise((_t,Ue)=>{const zt=({data:bt})=>{const{id:At,result:at}=bt;At===Te&&(Y.removeEventListener("message",zt),Y.removeEventListener("error",dt),Y.terminate(),_t(at))},dt=bt=>{Y.removeEventListener("message",zt),Y.removeEventListener("error",dt),Y.terminate(),Ue(bt)};Y.addEventListener("message",zt),Y.addEventListener("error",dt),Y.postMessage({id:Te,input:we,version:Ae})})});return function(L){return X.apply(this,arguments)}}();var Xt=ge(5360),lt=ge(3955),g=ge(1360);const Wt=["ref"];function ae(X){return X&&X.replace(/\r\n|\r/g,"\n")}let Je=(()=>{class X{constructor(L,R){this._differs=L,this._ngZone=R,this.className="",this.name="codemirror",this.autoFocus=!1,this.preserveScrollPosition=!1,this.cursorActivity=new g.bkB,this.focusChange=new g.bkB,this.scroll=new g.bkB,this.drop=new g.bkB,this.codeMirrorLoaded=new g.bkB,this.value="",this.disabled=!1,this.isFocused=!1,this.onChange=Y=>{},this.onTouched=()=>{}}set options(L){this._options=L,!this._differ&&L&&(this._differ=this._differs.find(L).create())}get codeMirrorGlobal(){return this._codeMirror||(this._codeMirror=typeof CodeMirror<"u"?CodeMirror:Promise.resolve().then(ge.t.bind(ge,1382,19))),this._codeMirror}ngAfterViewInit(){var L=this;this._ngZone.runOutsideAngular((0,ce.A)(function*(){const R=yield L.codeMirrorGlobal;L.codeMirror=(R?.default?R.default:R).fromTextArea(L.ref.nativeElement,L._options),L.codeMirror.on("cursorActivity",we=>L._ngZone.run(()=>L.cursorActive(we))),L.codeMirror.on("scroll",L.scrollChanged.bind(L)),L.codeMirror.on("blur",()=>L._ngZone.run(()=>L.focusChanged(!1))),L.codeMirror.on("focus",()=>L._ngZone.run(()=>L.focusChanged(!0))),L.codeMirror.on("change",(we,Te)=>L._ngZone.run(()=>L.codemirrorValueChanged(we,Te))),L.codeMirror.on("drop",(we,Te)=>{L._ngZone.run(()=>L.dropFiles(we,Te))}),L.codeMirror.setValue(L.value),L.codeMirrorLoaded.emit(L)}))}ngDoCheck(){if(!this._differ)return;const L=this._differ.diff(this._options);L&&(L.forEachChangedItem(R=>this.setOptionIfChanged(R.key,R.currentValue)),L.forEachAddedItem(R=>this.setOptionIfChanged(R.key,R.currentValue)),L.forEachRemovedItem(R=>this.setOptionIfChanged(R.key,R.currentValue)))}ngOnDestroy(){this.codeMirror&&this.codeMirror.toTextArea()}codemirrorValueChanged(L,R){const Y=L.getValue();this.value!==Y&&(this.value=Y,this.onChange(this.value))}setOptionIfChanged(L,R){this.codeMirror&&this.codeMirror.setOption(L,R)}focusChanged(L){this.onTouched(),this.isFocused=L,this.focusChange.emit(L)}scrollChanged(L){this.scroll.emit(L.getScrollInfo())}cursorActive(L){this.cursorActivity.emit(L)}dropFiles(L,R){this.drop.emit([L,R])}writeValue(L){if(null==L)return;if(!this.codeMirror)return void(this.value=L);const R=this.codeMirror.getValue();if(L!==R&&ae(R)!==ae(L))if(this.value=L,this.preserveScrollPosition){const Y=this.codeMirror.getScrollInfo();this.codeMirror.setValue(this.value),this.codeMirror.scrollTo(Y.left,Y.top)}else this.codeMirror.setValue(this.value)}registerOnChange(L){this.onChange=L}registerOnTouched(L){this.onTouched=L}setDisabledState(L){this.disabled=L,this.setOptionIfChanged("readOnly",this.disabled)}}return X.\u0275fac=function(L){return new(L||X)(g.rXU(g.MKu),g.rXU(g.SKi))},X.\u0275cmp=g.VBU({type:X,selectors:[["ngx-codemirror"]],viewQuery:function(L,R){if(1&L&&g.GBs(Wt,5),2&L){let Y;g.mGM(Y=g.lsd())&&(R.ref=Y.first)}},inputs:{className:"className",name:"name",autoFocus:"autoFocus",options:"options",preserveScrollPosition:"preserveScrollPosition"},outputs:{cursorActivity:"cursorActivity",focusChange:"focusChange",scroll:"scroll",drop:"drop",codeMirrorLoaded:"codeMirrorLoaded"},standalone:!1,features:[g.Jv_([{provide:je.kq,useExisting:(0,g.Rfq)(()=>X),multi:!0}])],decls:3,vars:7,consts:[["ref",""],["autocomplete","off",3,"name","autofocus"]],template:function(L,R){1&L&&(g.j41(0,"textarea",1,0),g.EFF(2,"    "),g.k0s()),2&L&&(g.ZvI("ngx-codemirror ",R.className,""),g.AVh("ngx-codemirror--focused",R.isFocused),g.Y8G("name",R.name)("autofocus",R.autoFocus))},encapsulation:2,changeDetection:0}),X})(),T=(()=>{class X{}return X.\u0275fac=function(L){return new(L||X)},X.\u0275mod=g.$C({type:X}),X.\u0275inj=g.G2t({}),X})();var te=ge(5975),x=ge(8559),U=ge(9158);function H(X,Ae){1&X&&(g.j41(0,"span"),g.EFF(1),g.nI1(2,"translate"),g.k0s()),2&X&&(g.R7$(),g.JRh(g.bMT(2,1,"BTN_CONNECT_METAMASK")))}function re(X,Ae){if(1&X&&(g.j41(0,"span"),g.EFF(1),g.k0s()),2&X){const L=g.XpG();g.R7$(),g.Lme("",L.userData.address.substring(0,6),"...",L.userData.address.slice(-6),"")}}function Q(X,Ae){if(1&X&&(g.j41(0,"option",20),g.EFF(1),g.k0s()),2&X){const L=Ae.$implicit;g.Y8G("value",L),g.R7$(),g.SpI(" ",L," ")}}function nt(X,Ae){if(1&X&&(g.j41(0,"li",23),g.EFF(1),g.k0s()),2&X){const L=Ae.$implicit;g.R7$(),g.SpI(" ",L.formattedMessage," ")}}function yt(X,Ae){if(1&X&&(g.j41(0,"div",21)(1,"h4"),g.EFF(2,"Compiler Errors:"),g.k0s(),g.j41(3,"ul"),g.DNE(4,nt,2,1,"li",22),g.k0s()()),2&X){const L=g.XpG();g.R7$(4),g.Y8G("ngForOf",L.compilerErrors)}}function S(X,Ae){if(1&X&&(g.j41(0,"option",20),g.EFF(1),g.k0s()),2&X){const L=Ae.$implicit;g.Y8G("value",L),g.R7$(),g.SpI(" ",L," ")}}function v(X,Ae){if(1&X){const L=g.RV6();g.j41(0,"div")(1,"h3",24),g.EFF(2),g.nI1(3,"translate"),g.k0s(),g.j41(4,"div",25)(5,"mat-form-field",26)(6,"mat-label"),g.EFF(7),g.nI1(8,"translate"),g.k0s(),g.j41(9,"select",13),g.mxI("ngModelChange",function(Y){g.eBV(L);const we=g.XpG();return g.DH7(we.selectedContractName,Y)||(we.selectedContractName=Y),g.Njj(Y)}),g.DNE(10,S,2,2,"option",14),g.k0s()(),g.j41(11,"mat-form-field",27)(12,"mat-label"),g.EFF(13),g.nI1(14,"translate"),g.k0s(),g.j41(15,"input",28),g.mxI("ngModelChange",function(Y){g.eBV(L);const we=g.XpG();return g.DH7(we.commonGweiValue,Y)||(we.commonGweiValue=Y),g.Njj(Y)}),g.k0s()()(),g.j41(16,"button",29),g.bIt("click",function(){g.eBV(L);const Y=g.XpG();return g.Njj(Y.deploySelectedContract())}),g.j41(17,"mat-icon"),g.EFF(18,"link"),g.k0s(),g.EFF(19),g.nI1(20,"translate"),g.k0s()()}if(2&X){const L=g.XpG();g.R7$(2),g.JRh(g.bMT(3,7,"TITLE_CONTRACT_DEPLOYMENT")),g.R7$(5),g.JRh(g.bMT(8,9,"LABEL_COMPILED_CONTRACTS")),g.R7$(2),g.R50("ngModel",L.selectedContractName),g.R7$(),g.Y8G("ngForOf",L.contractNames),g.R7$(3),g.JRh(g.bMT(14,11,"GWEI_VALUE_FOR_SENDING_ETH")),g.R7$(2),g.R50("ngModel",L.commonGweiValue),g.R7$(4),g.SpI(" ",g.bMT(20,13,"BTN_DEPLOY_SELECTED_CONTRACT")," ")}}function $(X,Ae){if(1&X&&(g.j41(0,"div",30),g.EFF(1),g.nI1(2,"translate"),g.k0s()),2&X){const L=g.XpG();g.R7$(),g.Lme(" ",g.bMT(2,2,"LABEL_CONTRACT_ADDRESS")," ",L.deployedContractAddress," ")}}function ye(X,Ae){if(1&X&&(g.j41(0,"div",39),g.EFF(1),g.nI1(2,"translate"),g.k0s()),2&X){const L=g.XpG(2).$implicit;g.R7$(),g.E5c(" ",g.bMT(2,3,"LABEL_OUTPUT_FOR")," ",L.name,": ",L.outputValue," ")}}function z(X,Ae){if(1&X){const L=g.RV6();g.qex(0),g.j41(1,"div",36)(2,"button",29),g.bIt("click",function(){g.eBV(L);const Y=g.XpG().$implicit,we=g.XpG(2);return g.Njj(we.invokeFunction(Y))}),g.j41(3,"mat-icon"),g.EFF(4,"call_to_action"),g.k0s(),g.EFF(5),g.nI1(6,"translate"),g.k0s(),g.j41(7,"mat-form-field",12)(8,"textarea",37),g.mxI("ngModelChange",function(Y){g.eBV(L);const we=g.XpG().$implicit;return g.DH7(we.inputValues,Y)||(we.inputValues=Y),g.Njj(Y)}),g.k0s()()(),g.DNE(9,ye,3,5,"div",38),g.bVm()}if(2&X){const L=g.XpG().$implicit;g.R7$(5),g.Lme(" ",g.bMT(6,6,"BTN_INVOKE")," ",L.name," "),g.R7$(3),g.Mz_("placeholder","(",L.inputHints,")"),g.R50("ngModel",L.inputValues),g.R7$(),g.Y8G("ngIf",""!==L.outputValue)}}function V(X,Ae){if(1&X&&(g.j41(0,"div",39),g.EFF(1),g.nI1(2,"translate"),g.k0s()),2&X){const L=g.XpG(2).$implicit;g.R7$(),g.E5c(" ",g.bMT(2,3,"LABEL_OUTPUT_FOR")," ",L.name,": ",L.outputValue," ")}}function N(X,Ae){if(1&X){const L=g.RV6();g.j41(0,"div")(1,"button",29),g.bIt("click",function(){g.eBV(L);const Y=g.XpG().$implicit,we=g.XpG(2);return g.Njj(we.invokeFunction(Y))}),g.j41(2,"mat-icon"),g.EFF(3,"call_to_action"),g.k0s(),g.EFF(4),g.nI1(5,"translate"),g.k0s(),g.DNE(6,V,3,5,"div",38),g.k0s()}if(2&X){const L=g.XpG().$implicit;g.R7$(4),g.Lme(" ",g.bMT(5,3,"BTN_INVOKE")," ",L.name," "),g.R7$(2),g.Y8G("ngIf",""!==L.outputValue)}}function A(X,Ae){if(1&X&&(g.j41(0,"div")(1,"div",34),g.DNE(2,z,10,8,"ng-container",35)(3,N,7,5,"ng-template",null,0,g.C5r),g.k0s()()),2&X){const L=Ae.$implicit,R=g.sdS(4);g.R7$(2),g.Y8G("ngIf",L.inputs.length>0)("ngIfElse",R)}}function le(X,Ae){if(1&X&&(g.j41(0,"div"),g.EFF(1),g.nI1(2,"translate"),g.k0s()),2&X){const L=g.XpG(2);g.R7$(),g.Lme("",g.bMT(2,2,"LABEL_OUTPUT"),": ",L.invokeOutput,"")}}function B(X,Ae){if(1&X&&(g.j41(0,"div",31)(1,"h3",11),g.EFF(2,"TITLE_INTERACT_WITH_CONTRACT"),g.k0s(),g.DNE(3,A,5,2,"div",32),g.j41(4,"div",33),g.DNE(5,le,3,4,"div",10),g.k0s()()),2&X){const L=g.XpG();g.R7$(3),g.Y8G("ngForOf",L.contractFunctions),g.R7$(2),g.Y8G("ngIf",""!==L.invokeOutput)}}(0,ct.j)({autoConnect:!0,provider:(0,be.xW)()});const{ethereum:Ce}=window,ht={"0.8.21":"soljson-v0.8.21+commit.d9974bed.js","0.8.9":"soljson-v0.8.9+commit.e5eed63a.js","0.7.6":"soljson-v0.7.6+commit.7338295f.js","0.6.12":"soljson-v0.6.12+commit.27d51765.js","0.5.17":"soljson-v0.5.17+commit.d19bba13.js","0.4.26":"soljson-v0.4.26+commit.4563c3fc.js","0.3.6":"soljson-v0.3.6+commit.3fc68da5.js","0.2.2":"soljson-v0.2.2+commit.ef92f566.js","0.1.7":"soljson-v0.1.7+commit.b4e666cc.js"};let Yt=(()=>{class X{keysService;snackBarHelperService;changeDetectorRef;constructor(L,R,Y){this.keysService=L,this.snackBarHelperService=R,this.changeDetectorRef=Y}ngOnInit(){this.handleAuth(),window.ethereum.on("chainChanged",this.handleChainChanged.bind(this))}userData;session=!1;metamaskAddress="";selectedContractName;compiledContracts=[];deployedContractAddress="";contractNames=[];commonGweiValue=0;contractFunctions=[];invokeOutput="";selectedCompilerVersion="0.8.21";compilerVersions=Object.keys(ht);compilerErrors=[];code="// SPDX-License-Identifier: MIT\npragma solidity ^0.8.14;\n\ncontract HelloWorld {\n    function get()public pure returns (string memory){\n        return 'Hello Contracts';\n    }\n}";editorOptions={mode:"text/x-solidity",theme:"dracula",lineNumbers:!0,lineWrapping:!0};compileAndFetchContracts(L){var R=this;return(0,ce.A)(function*(){try{R.deployedContractAddress="";const Y=ht[R.selectedCompilerVersion];if(!Y)return void console.error("Selected compiler version not found.");const we={version:`https://binaries.soliditylang.org/bin/${Y}`,contractBody:L},Te=yield er(we);Te.errors&&Te.errors.length>0&&!Te.contracts?(R.compiledContracts=null,console.log(Te.errors),R.compilerErrors.push(...Te.errors)):(R.compilerErrors=[],console.log("output",Te),R.compiledContracts=Te.contracts.Compiled_Contracts,R.contractNames=Object.keys(R.compiledContracts),R.selectedContractName=R.contractNames[0])}catch(Y){console.error("Error compiling contracts:",Y)}})()}deploySelectedContract(){var L=this;return(0,ce.A)(function*(){if(L.session)try{const Y=L.compiledContracts[L.selectedContractName];if(!Y)return void console.error("Selected contract not found.");const Te=new de.j(window.ethereum).getSigner(),Ue=Y.abi,zt=new Se.PM(Ue,Y.evm.bytecode.object,Te),dt={};L.commonGweiValue>0&&(dt.value=qe.parseUnits(L.commonGweiValue.toString(),"gwei"));const bt=yield zt.deploy(dt);yield bt.deployed(),L.deployedContractAddress=bt.address,L.contractFunctions=Ue.filter(At=>"function"===At.type).map(At=>{const at=At.inputs.length>0?L.getInputHints(At.inputs):"No inputs";return{...At,inputValues:"",outputValue:"",inputHints:at}}),console.log(L.contractFunctions)}catch(R){console.error("Error deploying contract:",R)}else L.snackBarHelperService.open("PLEASE_CONNECT_WEB3_WALLET","errorBar")})()}getInputHints(L){return L.map(R=>`${R.name}: ${R.type}`).join(", ")}parseInputValue(L,R){return"bool"===R?"true"===L.toLowerCase():L}invokeFunction(L){var R=this;return(0,ce.A)(function*(){if(R.session)try{const Y=R.compiledContracts[R.selectedContractName],Te=new de.j(window.ethereum).getSigner(),_t=new Se.NZ(R.deployedContractAddress,Y.abi,Te),Ue=""!==L.inputValues.trim()?L.inputValues.split(",").map((bt,At)=>{const at=L.inputs[At].type;return R.parseInputValue(bt.trim(),at)}):[],zt={};R.commonGweiValue>0&&(zt.value=qe.parseUnits(R.commonGweiValue.toString(),"gwei"));const dt=yield _t.functions[L.name](...Ue,zt);if(console.log(dt),L.outputs.length>0&&("view"===L.stateMutability||"pure"===L.stateMutability)){console.log("hello");const bt=dt[0].toString(),At=R.contractFunctions.find(at=>at.name===L.name);if(At){At.outputValue=bt;const at=R.contractFunctions.indexOf(L);-1!==at&&(R.contractFunctions[at]=At)}console.log(L.outputValue)}console.log("Invoked:",dt)}catch(Y){console.error("Error invoking function",Y);const we=R.contractFunctions.find(Te=>Te.name===L.name);if(we){we.outputValue=Y.message;const Te=R.contractFunctions.indexOf(L);-1!==Te&&(R.contractFunctions[Te]=we)}}else R.snackBarHelperService.open("PLEASE_CONNECT_WEB3_WALLET","errorBar")})()}handleChainChanged(L){var R=this;return(0,ce.A)(function*(){yield R.handleAuth()})()}handleAuth(){var L=this;return(0,ce.A)(function*(){try{const{isConnected:R}=(0,ft.sU)();if(R&&(yield(0,ft.Zf)()),!window.ethereum)return void L.snackBarHelperService.open("PLEASE_INSTALL_WEB3_WALLET","errorBar");const Y=yield(0,ft.Ng)({connector:new ct.I});L.metamaskAddress=Y.account,L.userData={address:Y.account,chain:Y.chain.id,network:"evm"},yield Ce.request({method:"wallet_addEthereumChain",params:[{chainId:"0xaa36a7",chainName:"Sepolia Test Network",nativeCurrency:{name:"SepoliaETH",symbol:"ETH",decimals:18},rpcUrls:["https://ethereum-sepolia.blockpi.network/v1/rpc/public"],blockExplorerUrls:["https://sepolia.etherscan.io/"]}]});const we="11155111",Te=String(Y.chain?.id);Y&&Te!==we?(L.session=!1,L.snackBarHelperService.open("PLEASE_CONNECT_TO_SEPOLIA_NETWORK","errorBar")):(console.log("Should show ethereum chain now"),L.session=!0),console.log("session",L.session),L.changeDetectorRef.detectChanges()}catch{console.log("An error occurred")}})()}static \u0275fac=function(R){return new(R||X)(g.rXU(Ge.o),g.rXU(x.r),g.rXU(g.gRc))};static \u0275cmp=g.VBU({type:X,selectors:[["app-web3-sandbox"]],decls:36,vars:19,consts:[["noInputs",""],[1,"sandbox-container","mat-elevation-z6"],[1,"sandbox-container_body"],[1,"sandbox-container_body_left"],[1,"editor-title"],[3,"ngModelChange","ngModel","options"],[1,"sandbox-container_body_right"],[1,"playground-wallet"],[1,"metamask-button"],["mat-raised-button","","color","accent","type","button",3,"click"],[4,"ngIf"],["translate",""],["appearance","outline","color","accent"],["matNativeControl","",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","button","mat-raised-button","",3,"click"],["class","error-container mat-elevation-z6",4,"ngIf"],["class","deployedaddresstext",4,"ngIf"],["class","invokecontainer mat-elevation-z6",4,"ngIf"],["src","assets/public/images/padding/11px.png"],[3,"value"],[1,"error-container","mat-elevation-z6"],["class","error",4,"ngFor","ngForOf"],[1,"error"],[1,"contracts-title"],[1,"form-fields-container"],["appearance","outline","color","accent",1,"contract-selector"],["appearance","outline","color","accent",1,"gwei-input"],["matInput","","type","number",3,"ngModelChange","ngModel"],["mat-raised-button","","type","button",3,"click"],[1,"deployedaddresstext"],[1,"invokecontainer","mat-elevation-z6"],[4,"ngFor","ngForOf"],[1,"output-container","mat-elevation-z6"],[1,"function-container"],[4,"ngIf","ngIfElse"],[1,"functionwtext-container"],["matAutosizeMinRows","4","matAutosizeMaxRows","4","matTextareaAutosize","","matInput","",3,"ngModelChange","placeholder","ngModel"],["class","invoke-output",4,"ngIf"],[1,"invoke-output"]],template:function(R,Y){1&R&&(g.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),g.EFF(4),g.nI1(5,"translate"),g.k0s(),g.j41(6,"ngx-codemirror",5),g.mxI("ngModelChange",function(Te){return g.DH7(Y.code,Te)||(Y.code=Te),Te}),g.k0s()(),g.j41(7,"div",6)(8,"div",7)(9,"div",8)(10,"button",9),g.bIt("click",function(){return Y.handleAuth()}),g.DNE(11,H,3,3,"span",10)(12,re,2,2,"span",10),g.k0s()()(),g.j41(13,"h2",11),g.EFF(14,"TITLE_WEB3_SANDBOX"),g.k0s(),g.j41(15,"ul")(16,"li",11),g.EFF(17,"EXPLANATION_SMART_CONTRACT_DEPLOYMENT"),g.k0s(),g.j41(18,"li",11),g.EFF(19,"EXPLANATION_GWEI_VALUE_POST_COMPILATION"),g.k0s()(),g.j41(20,"mat-form-field",12)(21,"mat-label"),g.EFF(22),g.nI1(23,"translate"),g.k0s(),g.j41(24,"select",13),g.mxI("ngModelChange",function(Te){return g.DH7(Y.selectedCompilerVersion,Te)||(Y.selectedCompilerVersion=Te),Te}),g.DNE(25,Q,2,2,"option",14),g.k0s()(),g.j41(26,"button",15),g.bIt("click",function(){return Y.compileAndFetchContracts(Y.code)}),g.j41(27,"mat-icon"),g.EFF(28,"build"),g.k0s(),g.EFF(29),g.nI1(30,"translate"),g.k0s(),g.DNE(31,yt,5,1,"div",16)(32,v,21,15,"div",10)(33,$,3,4,"div",17)(34,B,6,2,"div",18),g.k0s()(),g.nrm(35,"img",19),g.k0s()),2&R&&(g.R7$(4),g.JRh(g.bMT(5,13,"TITLE_CONTRACT_EDITOR")),g.R7$(2),g.R50("ngModel",Y.code),g.Y8G("options",Y.editorOptions),g.R7$(5),g.Y8G("ngIf",!Y.session),g.R7$(),g.Y8G("ngIf",Y.session),g.R7$(10),g.JRh(g.bMT(23,15,"LABEL_SELECT_COMPILER_VERSION")),g.R7$(2),g.R50("ngModel",Y.selectedCompilerVersion),g.R7$(),g.Y8G("ngForOf",Y.compilerVersions),g.R7$(4),g.SpI(" ",g.bMT(30,17,"BTN_COMPILE_CONTRACT")," "),g.R7$(2),g.Y8G("ngIf",Y.compilerErrors.length>0),g.R7$(),g.Y8G("ngIf",Y.compiledContracts),g.R7$(),g.Y8G("ngIf",Y.deployedContractAddress),g.R7$(),g.Y8G("ngIf",Y.deployedContractAddress))},dependencies:[T,Je,je.YN,je.xH,je.y7,je.me,je.Q0,je.wz,je.BC,je.vS,P.Hl,P.$z,te.m_,te.An,J.bT,lt.h,lt.D9,lt.Mm,Xt.R,U.rl,U.nJ,j.fS,j.fg,J.Sq],styles:[".playground-wallet[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:18px}.sandbox-container[_ngcontent-%COMP%]{margin:32px}.sandbox-container_body[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:32px;padding:40px}.sandbox-container_body_left[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:70%}.sandbox-container_body_right[_ngcontent-%COMP%]{align-items:flex-start;display:flex;flex-direction:column;width:30%}@media (max-width: 840px){.sandbox-container_body[_ngcontent-%COMP%]{flex-direction:column}.sandbox-container_body_left[_ngcontent-%COMP%], .sandbox-container_body_right[_ngcontent-%COMP%]{width:100%}}.deployedaddresstext[_ngcontent-%COMP%]{color:#2d972d;font-weight:600;margin:10px 0;word-break:break-all}.invokecontainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:16px;max-height:200px;overflow:scroll;padding:16px;width:100%}.error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:16px 0;max-height:300px;overflow:scroll;padding:16px}.error-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-size:12px;padding-left:16px}.editor-title[_ngcontent-%COMP%]{font-size:20px;font-weight:500;margin-bottom:16px;padding:0 8px;width:100%}.function-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:8px}.functionwtext-container[_ngcontent-%COMP%]{align-items:flex-start;display:flex;justify-content:space-between;margin-top:8px}.output-container[_ngcontent-%COMP%]{display:flex;width:100%;word-break:break-all}.invoke-btncontainer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.invoke-output[_ngcontent-%COMP%]{font-size:12px;padding:4px}h2[_ngcontent-%COMP%]{margin:0}ul[_ngcontent-%COMP%]{padding-left:16px}.contracts-title[_ngcontent-%COMP%]{font-weight:500;margin-top:16px}.form-fields-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;margin-bottom:16px;width:100%}.contract-selector[_ngcontent-%COMP%]{flex:1 1 60%;min-width:200px}.gwei-input[_ngcontent-%COMP%]{flex:1 1 30%;min-width:150px}"]})}return X})();ge(1471),ge(1167),ge(5071);var nr=ge(6376);const Le=[{path:"",component:Yt}];let qt=(()=>{class X{configurationService;overlayContainer;constructor(L,R){this.configurationService=L,this.overlayContainer=R,L.getApplicationConfiguration().subscribe(Y=>{R.getContainerElement().classList.add(Y.application.theme+"-theme")})}static \u0275fac=function(R){return new(R||X)(g.KVO(ue.s),g.KVO(nr.Sf))};static \u0275mod=g.$C({type:X});static \u0275inj=g.G2t({imports:[T,J.MD,G.iI.forChild(Le),lt.h,je.YN,je.X1,P.Hl,ee.Hu,j.fS,Me._T,Yt]})}return X})()},8039:(hi,mt,ge)=>{!function(J){"use strict";J.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy","cbl"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp","cs"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists\.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded JavaScript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90","f95"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history)\.md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"text/jinja2",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"],alias:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb","wl","wls"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m"],alias:["objective-c","objc"]},{name:"Objective-C++",mime:"text/x-objectivec++",mode:"clike",ext:["mm"],alias:["objective-c++","objc++"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PostgreSQL",mime:"text/x-pgsql",mode:"sql"},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]},{name:"WebAssembly",mime:"text/webassembly",mode:"wast",ext:["wat","wast"]}];for(var je=0;je<J.modeInfo.length;je++){var G=J.modeInfo[je];G.mimes&&(G.mime=G.mimes[0])}J.findModeByMIME=function(ue){ue=ue.toLowerCase();for(var ee=0;ee<J.modeInfo.length;ee++){var j=J.modeInfo[ee];if(j.mime==ue)return j;if(j.mimes)for(var P=0;P<j.mimes.length;P++)if(j.mimes[P]==ue)return j}return/\+xml$/.test(ue)?J.findModeByMIME("application/xml"):/\+json$/.test(ue)?J.findModeByMIME("application/json"):void 0},J.findModeByExtension=function(ue){ue=ue.toLowerCase();for(var ee=0;ee<J.modeInfo.length;ee++){var j=J.modeInfo[ee];if(j.ext)for(var P=0;P<j.ext.length;P++)if(j.ext[P]==ue)return j}},J.findModeByFileName=function(ue){for(var ee=0;ee<J.modeInfo.length;ee++){var j=J.modeInfo[ee];if(j.file&&j.file.test(ue))return j}var P=ue.lastIndexOf("."),Me=P>-1&&ue.substring(P+1,ue.length);if(Me)return J.findModeByExtension(Me)},J.findModeByName=function(ue){ue=ue.toLowerCase();for(var ee=0;ee<J.modeInfo.length;ee++){var j=J.modeInfo[ee];if(j.name.toLowerCase()==ue)return j;if(j.alias)for(var P=0;P<j.alias.length;P++)if(j.alias[P].toLowerCase()==ue)return j}}}(ge(1382))},8775:(hi,mt,ge)=>{!function(J){"use strict";var je={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},G={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};J.defineMode("xml",function(ue,ee){var Ge,be,j=ue.indentUnit,P={},Me=ee.htmlMode?je:G;for(var ce in Me)P[ce]=Me[ce];for(var ce in ee)P[ce]=ee[ce];function de(x,U){function H(nt){return U.tokenize=nt,nt(x,U)}var re=x.next();return"<"==re?x.eat("!")?x.eat("[")?x.match("CDATA[")?H(ct("atom","]]>")):null:x.match("--")?H(ct("comment","--\x3e")):x.match("DOCTYPE",!0,!0)?(x.eatWhile(/[\w\._\-]/),H(ft(1))):null:x.eat("?")?(x.eatWhile(/[\w\._\-]/),U.tokenize=ct("meta","?>"),"meta"):(Ge=x.eat("/")?"closeTag":"openTag",U.tokenize=Se,"tag bracket"):"&"==re?(x.eat("#")?x.eat("x")?x.eatWhile(/[a-fA-F\d]/)&&x.eat(";"):x.eatWhile(/[\d]/)&&x.eat(";"):x.eatWhile(/[\w\.\-:]/)&&x.eat(";"))?"atom":"error":(x.eatWhile(/[^&<]/),null)}function Se(x,U){var H=x.next();if(">"==H||"/"==H&&x.eat(">"))return U.tokenize=de,Ge=">"==H?"endTag":"selfcloseTag","tag bracket";if("="==H)return Ge="equals",null;if("<"==H){U.tokenize=de,U.state=rt,U.tagName=U.tagStart=null;var re=U.tokenize(x,U);return re?re+" tag error":"tag error"}return/[\'\"]/.test(H)?(U.tokenize=function qe(x){var U=function(H,re){for(;!H.eol();)if(H.next()==x){re.tokenize=Se;break}return"string"};return U.isInAttribute=!0,U}(H),U.stringStartCol=x.column(),U.tokenize(x,U)):(x.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function ct(x,U){return function(H,re){for(;!H.eol();){if(H.match(U)){re.tokenize=de;break}H.next()}return x}}function ft(x){return function(U,H){for(var re;null!=(re=U.next());){if("<"==re)return H.tokenize=ft(x+1),H.tokenize(U,H);if(">"==re){if(1==x){H.tokenize=de;break}return H.tokenize=ft(x-1),H.tokenize(U,H)}}return"meta"}}function he(x){return x&&x.toLowerCase()}function Ze(x,U,H){this.prev=x.context,this.tagName=U||"",this.indent=x.indented,this.startOfLine=H,(P.doNotIndent.hasOwnProperty(U)||x.context&&x.context.noIndent)&&(this.noIndent=!0)}function $t(x){x.context&&(x.context=x.context.prev)}function er(x,U){for(var H;;){if(!x.context||!P.contextGrabbers.hasOwnProperty(he(H=x.context.tagName))||!P.contextGrabbers[he(H)].hasOwnProperty(he(U)))return;$t(x)}}function rt(x,U,H){return"openTag"==x?(H.tagStart=U.column(),Xt):"closeTag"==x?lt:rt}function Xt(x,U,H){return"word"==x?(H.tagName=U.current(),be="tag",ae):P.allowMissingTagName&&"endTag"==x?(be="tag bracket",ae(x,0,H)):(be="error",Xt)}function lt(x,U,H){if("word"==x){var re=U.current();return H.context&&H.context.tagName!=re&&P.implicitlyClosed.hasOwnProperty(he(H.context.tagName))&&$t(H),H.context&&H.context.tagName==re||!1===P.matchClosing?(be="tag",g):(be="tag error",Wt)}return P.allowMissingTagName&&"endTag"==x?(be="tag bracket",g(x,0,H)):(be="error",Wt)}function g(x,U,H){return"endTag"!=x?(be="error",g):($t(H),rt)}function Wt(x,U,H){return be="error",g(x,0,H)}function ae(x,U,H){if("word"==x)return be="attribute",Je;if("endTag"==x||"selfcloseTag"==x){var re=H.tagName,Q=H.tagStart;return H.tagName=H.tagStart=null,"selfcloseTag"==x||P.autoSelfClosers.hasOwnProperty(he(re))?er(H,re):(er(H,re),H.context=new Ze(H,re,Q==H.indented)),rt}return be="error",ae}function Je(x,U,H){return"equals"==x?T:(P.allowMissing||(be="error"),ae(x,0,H))}function T(x,U,H){return"string"==x?te:"word"==x&&P.allowUnquoted?(be="string",ae):(be="error",ae(x,0,H))}function te(x,U,H){return"string"==x?te:ae(x,0,H)}return de.isInText=!0,{startState:function(x){var U={tokenize:de,state:rt,indented:x||0,tagName:null,tagStart:null,context:null};return null!=x&&(U.baseIndent=x),U},token:function(x,U){if(!U.tagName&&x.sol()&&(U.indented=x.indentation()),x.eatSpace())return null;Ge=null;var H=U.tokenize(x,U);return(H||Ge)&&"comment"!=H&&(be=null,U.state=U.state(Ge||H,x,U),be&&(H="error"==be?H+" error":be)),H},indent:function(x,U,H){var re=x.context;if(x.tokenize.isInAttribute)return x.tagStart==x.indented?x.stringStartCol+1:x.indented+j;if(re&&re.noIndent)return J.Pass;if(x.tokenize!=Se&&x.tokenize!=de)return H?H.match(/^(\s*)/)[0].length:0;if(x.tagName)return!1!==P.multilineTagIndentPastTag?x.tagStart+x.tagName.length+2:x.tagStart+j*(P.multilineTagIndentFactor||1);if(P.alignCDATA&&/<!\[CDATA\[/.test(U))return 0;var Q=U&&/^<(\/)?([\w_:\.-]*)/.exec(U);if(Q&&Q[1])for(;re;){if(re.tagName==Q[2]){re=re.prev;break}if(!P.implicitlyClosed.hasOwnProperty(he(re.tagName)))break;re=re.prev}else if(Q)for(;re;){var nt=P.contextGrabbers[he(re.tagName)];if(!nt||!nt.hasOwnProperty(he(Q[2])))break;re=re.prev}for(;re&&re.prev&&!re.startOfLine;)re=re.prev;return re?re.indent+j:x.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:P.htmlMode?"html":"xml",helperType:P.htmlMode?"html":"xml",skipAttribute:function(x){x.state==T&&(x.state=ae)},xmlCurrentTag:function(x){return x.tagName?{name:x.tagName,close:"closeTag"==x.type}:null},xmlCurrentContext:function(x){for(var U=[],H=x.context;H;H=H.prev)U.push(H.tagName);return U.reverse()}}}),J.defineMIME("text/xml","xml"),J.defineMIME("application/xml","xml"),J.mimeModes.hasOwnProperty("text/html")||J.defineMIME("text/html",{name:"xml",htmlMode:!0})}(ge(1382))}}]);