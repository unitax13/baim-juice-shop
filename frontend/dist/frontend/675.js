"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[675],{1675:($,A,n)=>{n.r(A),n.d(A,{WalletWeb3Module:()=>H});var T=n(8434),l=n(9417),I=n(33),S=n(7916),m=n(5596),h=n(3746),u=n(8834),R=n(5416),d=n(467),W=n(3246),p=n(6769),k=n(6123),g=n(4173),f=n(4048),v=n(7358),w=n(9293),E=n(4194),y=n(5975),F=n(5360),b=n(3955),t=n(1360),O=n(8559),B=n(9158);function j(r,x){1&r&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&r&&(t.R7$(),t.JRh(t.bMT(2,1,"BTN_CONNECT_METAMASK")))}function N(r,x){if(1&r&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&r){const e=t.XpG();t.R7$(),t.Lme("",e.userData.address.substring(0,6),"...",e.userData.address.slice(-6),"")}}const{ethereum:P}=window,C="0x413744D59d31AFDC2889aeE602636177805Bd7b0";(0,w.j)({autoConnect:!0,provider:(0,k.xW)()});let M=(()=>{class r{keysService;snackBarHelperService;changeDetectorRef;constructor(e,a,o){this.keysService=e,this.snackBarHelperService=a,this.changeDetectorRef=o}userData;session=!1;walletBalance="0";myBEEBalance=0;inputAmount=null;successResponse=!1;mintButtonDisabled=!0;challengeSolved=!1;errorMessage="";metamaskAddress="";ngOnInit(){this.handleAuth(),window.ethereum.on("chainChanged",this.handleChainChanged.bind(this))}handleChainChanged(e){var a=this;return(0,d.A)(function*(){yield a.handleAuth()})()}depositETH(){var e=this;return(0,d.A)(function*(){try{const o=new g.j(window.ethereum).getSigner(),i=new f.NZ(C,p.P8,o),s=e.inputAmount.toString();yield(yield i.ethdeposit(e.metamaskAddress,{value:v.parseEther(s)})).wait(),e.getUserEthBalance()}catch(a){e.errorMessage=a.message}})()}withdrawETH(){var e=this;return(0,d.A)(function*(){try{const o=new g.j(window.ethereum).getSigner(),i=new f.NZ(C,p.P8,o),s=e.inputAmount.toString();yield(yield i.withdraw(v.parseEther(s))).wait(),e.getUserEthBalance()}catch(a){e.errorMessage=a.message}})()}getUserEthBalance(){var e=this;return(0,d.A)(function*(){try{const o=new g.j(window.ethereum).getSigner(),s=yield new f.NZ(C,p.P8,o).balanceOf(e.metamaskAddress),c=v.formatEther(s);e.walletBalance=c}catch(a){e.errorMessage=a.message}})()}handleAuth(){var e=this;return(0,d.A)(function*(){try{const{isConnected:a}=(0,E.sU)();if(a&&(yield(0,E.Zf)()),!window.ethereum)return void e.snackBarHelperService.open("PLEASE_INSTALL_WEB3_WALLET","errorBar");const o=yield(0,E.Ng)({connector:new w.I});e.metamaskAddress=o.account,e.keysService.walletAddressSend(e.metamaskAddress).subscribe(c=>{c.success&&(e.successResponse=c.status,e.mintButtonDisabled=!0)},c=>{console.error(c)}),e.userData={address:o.account,chain:o.chain.id,network:"evm"},yield P.request({method:"wallet_addEthereumChain",params:[{chainId:"0xaa36a7",chainName:"Sepolia Test Network",nativeCurrency:{name:"SepoliaETH",symbol:"ETH",decimals:18},rpcUrls:["https://ethereum-sepolia.blockpi.network/v1/rpc/public"],blockExplorerUrls:["https://sepolia.etherscan.io/"]}]});const i="11155111",s=String(o.chain?.id);o&&s!==i?(e.session=!1,e.snackBarHelperService.open("PLEASE_CONNECT_TO_SEPOLIA_NETWORK","errorBar")):(e.session=!0,e.getUserEthBalance()),e.changeDetectorRef.detectChanges()}catch(a){console.log(a)}})()}static \u0275fac=function(a){return new(a||r)(t.rXU(W.o),t.rXU(O.r),t.rXU(t.gRc))};static \u0275cmp=t.VBU({type:r,selectors:[["app-wallet-web3"]],decls:39,vars:23,consts:[["appearance","outlined",1,"mat-elevation-z6"],[1,"mdc-card"],[1,"header_container"],[1,"metamask-button"],["mat-raised-button","","color","accent","type","button",3,"click"],[4,"ngIf"],[1,"confirmation"],["color","accent","appearance","outline",2,"width","100%"],["matInput","","type","number","id","inputAmount","aria-label","Text field for the withdrawal amount",3,"ngModelChange","placeholder","ngModel"],[1,"error"],[1,"dwbutton_container"],["type","submit","mat-raised-button","","color","primary","aria-label","Button to deposit",1,"deposit_withdraw_button",3,"click"],["type","submit","mat-raised-button","","color","warning","aria-label","Button to withdraw",1,"deposit_withdraw_button",3,"click"]],template:function(a,o){1&a&&(t.j41(0,"mat-card",0)(1,"div",1)(2,"div",2)(3,"h1"),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"div",3)(7,"button",4),t.bIt("click",function(){return o.handleAuth()}),t.j41(8,"mat-icon"),t.EFF(9," account_balance_wallet "),t.k0s(),t.DNE(10,j,3,3,"span",5)(11,N,2,2,"span",5),t.k0s()()(),t.j41(12,"p")(13,"b")(14,"span"),t.EFF(15),t.nI1(16,"translate"),t.k0s(),t.j41(17,"span",6),t.EFF(18),t.k0s()()(),t.j41(19,"div")(20,"mat-form-field",7)(21,"mat-label"),t.EFF(22),t.nI1(23,"translate"),t.k0s(),t.j41(24,"input",8),t.nI1(25,"translate"),t.mxI("ngModelChange",function(s){return t.DH7(o.inputAmount,s)||(o.inputAmount=s),s}),t.k0s()(),t.j41(26,"h5",9),t.EFF(27),t.k0s()(),t.j41(28,"div",10)(29,"button",11),t.bIt("click",function(){return o.depositETH()}),t.j41(30,"mat-icon"),t.EFF(31,"monetization_on"),t.k0s(),t.EFF(32),t.nI1(33,"translate"),t.k0s(),t.j41(34,"button",12),t.bIt("click",function(){return o.withdrawETH()}),t.j41(35,"mat-icon"),t.EFF(36,"local_atm"),t.k0s(),t.EFF(37),t.nI1(38,"translate"),t.k0s()()()()),2&a&&(t.R7$(4),t.JRh(t.bMT(5,11,"TITLE_CRYPTO_WALLET")),t.R7$(6),t.Y8G("ngIf",!o.session),t.R7$(),t.Y8G("ngIf",o.session),t.R7$(4),t.JRh(t.bMT(16,13,"LABEL_WALLET_BALANCE")),t.R7$(3),t.SpI(" ",o.walletBalance," ETH"),t.R7$(4),t.JRh(t.bMT(23,15,"LABEL_AMOUNT")),t.R7$(2),t.Y8G("placeholder",t.bMT(25,17,"ENTER_ETHER_AMOUNT")),t.R50("ngModel",o.inputAmount),t.R7$(3),t.JRh(o.errorMessage),t.R7$(5),t.SpI(" ",t.bMT(33,19,"BTN_DEPOSIT")," "),t.R7$(5),t.SpI(" ",t.bMT(38,21,"BTN_WITHDRAW")," "))},dependencies:[m.Hu,m.RN,u.Hl,u.$z,T.bT,b.h,b.D9,F.R,B.rl,B.nJ,h.fS,h.fg,l.YN,l.me,l.Q0,l.BC,l.vS,y.m_,y.An],styles:[".header_container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:30px}.dwbutton_container[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:space-between}mat-card[_ngcontent-%COMP%]{display:block;margin-left:30%;margin-right:30%}mat-form-field[_ngcontent-%COMP%]{padding-top:10px;width:100%}.form-container[_ngcontent-%COMP%]{min-width:350px}.deposit_withdraw_button[_ngcontent-%COMP%]{width:100%}.mdc-card[_ngcontent-%COMP%]{border:0}.heading[_ngcontent-%COMP%]{background:#0003;font-size:x-large;justify-content:center;padding:12px 20px}@media (max-width: 1100px){mat-card[_ngcontent-%COMP%]{margin-left:20%;margin-right:20%}}@media (max-width: 580px){mat-card[_ngcontent-%COMP%]{margin-left:10%;margin-right:10%}.header_container[_ngcontent-%COMP%]{flex-direction:column;margin-bottom:16px}}"]})}return r})();var L=n(6376);const D=[{path:"",component:M}];let H=(()=>{class r{configurationService;overlayContainer;constructor(e,a){this.configurationService=e,this.overlayContainer=a,e.getApplicationConfiguration().subscribe(o=>{a.getContainerElement().classList.add(o.application.theme+"-theme")})}static \u0275fac=function(a){return new(a||r)(t.KVO(S.s),t.KVO(L.Sf))};static \u0275mod=t.$C({type:r});static \u0275inj=t.G2t({imports:[T.MD,I.iI.forChild(D),b.h,l.YN,l.X1,u.Hl,m.Hu,h.fS,R._T,M]})}return r})()}}]);