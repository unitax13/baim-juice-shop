"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[388],{4388:(J,x,o)=>{o.r(x),o.d(x,{FaucetModule:()=>G});var B=o(8434),l=o(9417),I=o(33),k=o(7916),C=o(5596),T=o(3746),v=o(8834),R=o(5416),d=o(467),_=o(3246),m=o(3955),h=o(6769),L=o(6123),p=o(4173),g=o(4048),j=o(765),y=o(7358),O=o(9293),f=o(4194),D=o(5360),w=o(5975),t=o(1360),H=o(8559),N=o(9158);function U(i,Z){1&i&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.JRh(t.bMT(2,1,"BTN_CONNECT_METAMASK")))}function $(i,Z){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.Lme("",e.userData.address.substring(0,6),"...",e.userData.address.slice(-6),"")}}(0,O.j)({autoConnect:!0,provider:(0,L.xW)()});const{ethereum:X}=window,A="0x41427790c94E7a592B17ad694eD9c06A02bb9C39",P="0x36435796Ca9be2bf150CE0dECc2D8Fab5C4d6E13",S="0x860e3616aD0E0dEDc23352891f3E10C4131EA5BC";let F=(()=>{class i{keysService;snackBarHelperService;translateService;changeDetectorRef;constructor(e,n,a,r){this.keysService=e,this.snackBarHelperService=n,this.translateService=a,this.changeDetectorRef=r}userData;session=!1;deployedContractAddress="";BEEBalance=0;myBEEBalance=0;withdrawAmount=null;successResponse=!1;mintButtonDisabled=!0;challengeSolved=!1;nftMintText="Mint the Pot - 1000 BEE";errorMessage="";metamaskAddress="";ngOnInit(){this.translateService.get("NFT_MINT_TEXT_INTRO").subscribe(e=>{this.nftMintText=e}),this.handleAuth(),this.checkNftMinted(),this.nftMintListener(),window.ethereum.on("chainChanged",this.handleChainChanged.bind(this))}nftMintListener(){this.keysService.nftMintListen().subscribe(e=>{console.log(e)},e=>{console.error(e)})}checkNftMinted(){this.keysService.checkNftMinted().subscribe(e=>{const n=e.data[0].solved;this.mintButtonDisabled=n,this.challengeSolved=n,n&&this.translateService.get("NFT_MINT_TEXT_SUCCESS").subscribe(a=>{this.nftMintText=a})},e=>{console.error(e),this.successResponse=!1})}fetchMyBeeBalance(){var e=this;return(0,d.A)(function*(){try{const a=new p.j(window.ethereum).getSigner(),r=new g.NZ(P,h.QU,a),s=yield a.getAddress(),u=yield r.balanceOf(s);console.log(u),e.myBEEBalance=u.div(j.lQ).toNumber(),e.myBEEBalance>=1e3&&!e.challengeSolved&&(e.mintButtonDisabled=!1),e.myBEEBalance<=1e3&&!e.challengeSolved&&(e.mintButtonDisabled=!0)}catch(n){console.error("Error fetching BEE balance:",n)}})()}fetchBeeBalance(){var e=this;return(0,d.A)(function*(){try{const a=new p.j(window.ethereum).getSigner(),s=yield new g.NZ(S,h.BP,a).balance();console.log(s),e.BEEBalance=s}catch(n){console.error("Error fetching BEE balance:",n)}})()}handleChainChanged(e){var n=this;return(0,d.A)(function*(){yield n.handleAuth()})()}handleAuth(){var e=this;return(0,d.A)(function*(){try{const{isConnected:n}=(0,f.sU)();if(n&&(yield(0,f.Zf)()),!window.ethereum)return void e.snackBarHelperService.open("PLEASE_INSTALL_WEB3_WALLET","errorBar");const a=yield(0,f.Ng)({connector:new O.I});e.metamaskAddress=a.account,e.userData={address:a.account,chain:a.chain.id,network:"evm"},yield X.request({method:"wallet_addEthereumChain",params:[{chainId:"0xaa36a7",chainName:"Sepolia Test Network",nativeCurrency:{name:"SepoliaETH",symbol:"ETH",decimals:18},rpcUrls:["https://ethereum-sepolia.blockpi.network/v1/rpc/public"],blockExplorerUrls:["https://sepolia.etherscan.io/"]}]});const r="11155111",s=String(a.chain?.id);a&&s!==r?(e.session=!1,e.snackBarHelperService.open("PLEASE_CONNECT_TO_SEPOLIA_NETWORK","errorBar")):(console.log("Should show ethereum chain now"),e.session=!0,yield e.fetchBeeBalance(),yield e.fetchMyBeeBalance()),console.log("session",e.session),e.changeDetectorRef.detectChanges()}catch(n){console.log(n)}})()}extractBEETokens(e=this.withdrawAmount){var n=this;return(0,d.A)(function*(){if(n.session)try{const a=new p.j(window.ethereum),r=a.getSigner(),s=yield r.getAddress(),u=yield a.getBalance(s),E=y.formatEther(u);if(console.log("ETH balance:",E,typeof E),E<"0.001")return void(n.errorMessage="Deposit some test ETH from sepoliafaucet.com or any other ETH faucet to initiate transaction.");yield(yield new g.NZ(S,h.BP,r).withdraw(e)).wait(),console.log("BEE tokens extracted successfully"),n.fetchBeeBalance(),n.fetchMyBeeBalance()}catch(a){console.error("Error extracting BEEs:",a.message),n.errorMessage=a.message}else n.snackBarHelperService.open("PLEASE_CONNECT_WEB3_WALLET","errorBar")})()}mintNFT(){var e=this;return(0,d.A)(function*(){if(e.session){e.translateService.get("NFT_MINT_TEXT_AWAITING_APPROVAL").subscribe(n=>{e.nftMintText=n});try{const a=new p.j(window.ethereum).getSigner(),r=y.parseUnits("1000","18");yield(yield new g.NZ(P,h.QU,a).approve(A,r)).wait(),e.translateService.get("NFT_MINT_TEXT_CONFIRM").subscribe(c=>{e.nftMintText=c});const M=yield new g.NZ(A,h.NP,a).mintNFT();console.log(M),e.translateService.get("NFT_MINT_TEXT_IN_PROGRESS").subscribe(c=>{e.nftMintText=c});const b=yield M.wait();console.log(b),b&&(e.translateService.get("NFT_MINT_TEXT_SUCCESS").subscribe(c=>{e.nftMintText=c}),setTimeout(()=>{e.keysService.verifyNFTWallet(e.metamaskAddress).subscribe(c=>{c.success&&(e.successResponse=c.status,e.mintButtonDisabled=!0)},c=>{console.error(c),e.successResponse=!1})},3500)),console.log("NFT minted successfully!")}catch(n){console.error("Error minting NFT:",n)}}else e.snackBarHelperService.open("PLEASE_CONNECT_WEB3_WALLET","errorBar")})()}signOut(){var e=this;return(0,d.A)(function*(){yield(0,f.Zf)(),e.session=!1})()}static \u0275fac=function(n){return new(n||i)(t.rXU(_.o),t.rXU(H.r),t.rXU(m.c$),t.rXU(t.gRc))};static \u0275cmp=t.VBU({type:i,selectors:[["app-faucet"]],decls:51,vars:35,consts:[[1,"container"],["appearance","outlined",1,"mat-elevation-z6","faucet-container"],[1,"mdc-card"],[1,"faucet-image"],["src","assets/public/images/BeeOwner.png"],[1,"faucet-balance"],["color","accent"],[1,"metamask-button"],["mat-raised-button","","color","accent","type","button",3,"click"],[4,"ngIf"],[1,"withdraw-container"],["color","accent","appearance","outline",2,"width","100%"],["matInput","","type","number","id","withdrawAmount","aria-label","Text field for the withdrawal amount",3,"ngModelChange","placeholder","ngModel"],[1,"error"],["mat-raised-button","","type","button","color","primary",3,"click"],["appearance","outlined",1,"mat-elevation-z6","honeypot-container"],[1,"honeypot-image","mat-elevation-z6"],["src","assets/public/images/HoneyPot.png"],["mat-raised-button","","color","warn","fxFlexAlign","center",1,"mint_button",3,"click","disabled"]],template:function(n,a){1&n&&(t.j41(0,"div",0)(1,"mat-card",1)(2,"div",2)(3,"h1"),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"div",3),t.nrm(7,"img",4),t.k0s(),t.j41(8,"p"),t.EFF(9),t.nI1(10,"translate"),t.k0s(),t.j41(11,"div",5)(12,"span",6),t.EFF(13),t.nI1(14,"translate"),t.nI1(15,"translate"),t.k0s(),t.j41(16,"div",7)(17,"button",8),t.bIt("click",function(){return a.handleAuth()}),t.j41(18,"mat-icon"),t.EFF(19," account_balance_wallet "),t.k0s(),t.DNE(20,U,3,3,"span",9)(21,$,2,2,"span",9),t.k0s()()(),t.j41(22,"div",10)(23,"div")(24,"mat-form-field",11)(25,"mat-label"),t.EFF(26),t.nI1(27,"translate"),t.k0s(),t.j41(28,"input",12),t.nI1(29,"translate"),t.mxI("ngModelChange",function(s){return t.DH7(a.withdrawAmount,s)||(a.withdrawAmount=s),s}),t.k0s()(),t.j41(30,"h5",13),t.EFF(31),t.k0s()(),t.j41(32,"button",14),t.bIt("click",function(){return a.extractBEETokens()}),t.j41(33,"mat-icon"),t.EFF(34," emoji_nature "),t.k0s(),t.EFF(35),t.nI1(36,"translate"),t.k0s()()()(),t.j41(37,"mat-card",15)(38,"div",2)(39,"div",16),t.nrm(40,"img",17),t.k0s(),t.j41(41,"h2"),t.EFF(42),t.nI1(43,"translate"),t.k0s(),t.j41(44,"p"),t.EFF(45),t.nI1(46,"translate"),t.k0s(),t.j41(47,"button",18),t.bIt("click",function(){return a.mintNFT()}),t.j41(48,"mat-icon"),t.EFF(49," image "),t.k0s(),t.EFF(50),t.k0s()()()()),2&n&&(t.R7$(4),t.JRh(t.bMT(5,17,"TITLE_BEE_HAVEN")),t.R7$(5),t.JRh(t.bMT(10,19,"BEE_HAVEN_INTRO")),t.R7$(4),t.LHq(" ",t.bMT(14,21,"FAUCET_BALANCE"),": ",a.BEEBalance," | ",t.bMT(15,23,"BEE_BALANCE"),": ",a.myBEEBalance,""),t.R7$(7),t.Y8G("ngIf",!a.session),t.R7$(),t.Y8G("ngIf",a.session),t.R7$(5),t.JRh(t.bMT(27,25,"LABEL_NUMBER_OF_BEES")),t.R7$(2),t.Y8G("placeholder",t.bMT(29,27,"LABEL_NUMBER_OF_BEES")),t.R50("ngModel",a.withdrawAmount),t.R7$(3),t.JRh(a.errorMessage),t.R7$(4),t.SpI(" ",t.bMT(36,29,"BTN_CLAIM_BEES")," "),t.R7$(7),t.JRh(t.bMT(43,31,"BEE_HONEYPOT_TITLE")),t.R7$(3),t.JRh(t.bMT(46,33,"BEE_HONEYPOT_DESCRIPTION")),t.R7$(2),t.Y8G("disabled",a.mintButtonDisabled),t.R7$(3),t.SpI(" ",a.nftMintText," "))},dependencies:[C.Hu,C.RN,m.h,m.D9,v.Hl,v.$z,B.bT,D.R,N.rl,N.nJ,T.fS,T.fg,l.YN,l.me,l.Q0,l.BC,l.vS,w.m_,w.An],styles:[".container[_ngcontent-%COMP%]{display:flex;grid-gap:34px;margin:0 40px}.faucet-container[_ngcontent-%COMP%]{padding:40px 80px}.faucet-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.faucet-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:700;margin:0;text-align:center}.faucet-balance[_ngcontent-%COMP%]{align-items:center;border:1px solid #7b7b7b;border-radius:10px;display:flex;font-size:18px;justify-content:center;margin:20px 0;padding:8px;text-align:center;width:100%}.faucet-balance[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex-grow:1;font-size:18px;text-align:center}.faucet-image[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:16px}.faucet-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:250px}.metamask-button[_ngcontent-%COMP%]{margin:16px 16px 16px auto}.metamask-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px!important}.metamask-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;height:24px;width:24px}.metamask-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:54px;padding:8px 6px;width:220px}.withdraw-container[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;gap:20px;width:100%}.withdraw-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex-direction:column;width:100%}.withdraw-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:10px;font-weight:500;justify-self:end;margin-top:-20px;padding:16px 24px;width:300px}.honeypot-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:40px 80px;text-align:center;width:35%}.honeypot-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:700}.honeypot-image[_ngcontent-%COMP%]{height:320px;margin:0 auto 16px;width:320px}.honeypot-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:300px;margin:10px}.mint_button[_ngcontent-%COMP%]{border-radius:10px;display:flex;font-weight:500;height:68px;margin-top:32px;padding:16px 48px;width:100%}.mdc-card[_ngcontent-%COMP%]{align-items:center;border:0;display:flex}.withdraw-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:68px}@media (max-width: 1100px){.container[_ngcontent-%COMP%]{flex-direction:column}.honeypot-container[_ngcontent-%COMP%]{margin-bottom:40px;width:auto}.faucet-balance[_ngcontent-%COMP%]{flex-direction:column;padding:24px 0}.metamask-button[_ngcontent-%COMP%]{margin:16px auto auto}}@media (max-width: 580px){.faucet-container[_ngcontent-%COMP%], .honeypot-container[_ngcontent-%COMP%]{padding:30px}.honeypot-image[_ngcontent-%COMP%]{height:240px;width:240px}.honeypot-image[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:220px;width:220px}}"]})}return i})();var z=o(6376);const W=[{path:"",component:F}];let G=(()=>{class i{configurationService;overlayContainer;constructor(e,n){this.configurationService=e,this.overlayContainer=n,e.getApplicationConfiguration().subscribe(a=>{n.getContainerElement().classList.add(a.application.theme+"-theme")})}static \u0275fac=function(n){return new(n||i)(t.KVO(k.s),t.KVO(z.Sf))};static \u0275mod=t.$C({type:i});static \u0275inj=t.G2t({imports:[B.MD,I.iI.forChild(W),m.h,l.YN,l.X1,v.Hl,C.Hu,T.fS,R._T,F]})}return i})()}}]);